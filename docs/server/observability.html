<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-server/observability" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Server observability | Centrifugo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-rh="true" name="twitter:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-rh="true" property="og:url" content="https://centrifugal.dev/docs/server/observability"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Server observability | Centrifugo"><meta data-rh="true" name="description" content="To provide a better server observability Centrifugo supports reporting metrics in Prometheus format and can automatically export metrics to Graphite."><meta data-rh="true" property="og:description" content="To provide a better server observability Centrifugo supports reporting metrics in Prometheus format and can automatically export metrics to Graphite."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://centrifugal.dev/docs/server/observability"><link data-rh="true" rel="alternate" href="https://centrifugal.dev/docs/server/observability" hreflang="en"><link data-rh="true" rel="alternate" href="https://centrifugal.dev/docs/server/observability" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EPXZ1LXJ33-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title=" RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title=" Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title=" JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NZRQD92LEX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-NZRQD92LEX",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Centrifugo" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"><link rel="stylesheet" href="/assets/css/styles.eb5968e0.css">
<script src="/assets/js/runtime~main.dd8e0e97.js" defer="defer"></script>
<script src="/assets/js/main.df29f4cc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Centrifugo</b></a><a class="navbar__item navbar__link" href="/docs/getting-started/introduction">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/server/configuration">Server guide</a><a class="navbar__item navbar__link" href="/docs/transports/overview">Real-time transports / SDK</a><a class="navbar__item navbar__link" href="/docs/pro/overview">Centrifugo PRO ♻️</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Grand tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/centrifugal/centrifugo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/server/observability">v6</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/server/observability">v6</a></li><li><a class="dropdown__link" href="/docs/5/server/observability">v5</a></li><li><a class="dropdown__link" href="/docs/4/getting-started/introduction">v4</a></li><li><a class="dropdown__link" href="/docs/3/getting-started/introduction">v3</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Centrifugo</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/configuration">Configure Centrifugo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/server_api">Server API walkthrough</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/authentication">Client JWT authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/channels">Channels and namespaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/channel_permissions">Channel permission model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/channel_token_auth">Channel JWT authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/server_subs">Server-side subscriptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/engines">Engines and scalability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/consumers">Async consumers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/history_and_recovery">History and recovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/cache_recovery">Cache recovery mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/delta_compression">Delta compression</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/presence">Online presence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/proxy">Proxy events to the backend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/proxy_streams">Proxy subscription streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/admin_web">Admin web UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/server/observability">Server observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/infra_tuning">Infrastructure tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/load_balancing">Load balancing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/codes">Client protocol codes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/console_commands">Helper CLI commands</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Server observability</h1></header><p>To provide a better server observability Centrifugo supports reporting metrics in Prometheus format and can automatically export metrics to Graphite.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="metrics">Metrics<a href="#metrics" class="hash-link" aria-label="Direct link to Metrics" title="Direct link to Metrics">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prometheus-metrics">Prometheus metrics<a href="#prometheus-metrics" class="hash-link" aria-label="Direct link to Prometheus metrics" title="Direct link to Prometheus metrics">​</a></h3>
<p>To enable Prometheus endpoint start Centrifugo with <code>prometheus</code> option on:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">config.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;prometheus&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will enable <code>/metrics</code> endpoint so the Centrifugo instance can be monitored by your Prometheus server.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="graphite-metrics">Graphite metrics<a href="#graphite-metrics" class="hash-link" aria-label="Direct link to Graphite metrics" title="Direct link to Graphite metrics">​</a></h3>
<p>To enable automatic export to Graphite (via TCP):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">config.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;graphite&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;host&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;port&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2003</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, stats will be aggregated over 10 seconds intervals inside Centrifugo and then pushed to Graphite over TCP connection.</p>
<p>If you need to change this aggregation interval use the <code>graphite_interval</code> option (in seconds, default <code>10</code>).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="grafana-dashboard">Grafana dashboard<a href="#grafana-dashboard" class="hash-link" aria-label="Direct link to Grafana dashboard" title="Direct link to Grafana dashboard">​</a></h3>
<p>Check out Centrifugo <a href="https://grafana.com/grafana/dashboards/13039" target="_blank" rel="noopener noreferrer">official Grafana dashboard</a> for Prometheus storage. You can import that dashboard to your Grafana, point to Prometheus storage – and enjoy visualized metrics.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/grafana-60e3752feb2b89948665543a4c2d9661.jpg" width="2818" height="1432" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exposed-metrics">Exposed metrics<a href="#exposed-metrics" class="hash-link" aria-label="Direct link to Exposed metrics" title="Direct link to Exposed metrics">​</a></h3>
<p>Here is a description of various metrics exposed by Centrifugo.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_messages_sent_count">centrifugo_node_messages_sent_count<a href="#centrifugo_node_messages_sent_count" class="hash-link" aria-label="Direct link to centrifugo_node_messages_sent_count" title="Direct link to centrifugo_node_messages_sent_count">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> type</li>
<li><strong>Description:</strong> Tracks the number of messages sent by a node to the broker.</li>
<li><strong>Usage:</strong> Use this metric to monitor the outgoing message rate and detect any anomalies or spikes in the data flow.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_messages_received_count">centrifugo_node_messages_received_count<a href="#centrifugo_node_messages_received_count" class="hash-link" aria-label="Direct link to centrifugo_node_messages_received_count" title="Direct link to centrifugo_node_messages_received_count">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> type</li>
<li><strong>Description:</strong> Measures the number of messages received from the broker.</li>
<li><strong>Usage:</strong> Helps in understanding the incoming message rate and ensures the node is receiving data as expected.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_action_count">centrifugo_node_action_count<a href="#centrifugo_node_action_count" class="hash-link" aria-label="Direct link to centrifugo_node_action_count" title="Direct link to centrifugo_node_action_count">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> action</li>
<li><strong>Description:</strong> Counts the number of various actions called within the node.</li>
<li><strong>Usage:</strong> Useful for tracking specific actions&#x27; usage and frequency.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_num_clients">centrifugo_node_num_clients<a href="#centrifugo_node_num_clients" class="hash-link" aria-label="Direct link to centrifugo_node_num_clients" title="Direct link to centrifugo_node_num_clients">​</a></h4>
<ul>
<li><strong>Type:</strong> Gauge</li>
<li><strong>Description:</strong> Shows the current number of clients connected to the node.</li>
<li><strong>Usage:</strong> Monitor the client connections to ensure the node is not reaching its capacity.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_num_users">centrifugo_node_num_users<a href="#centrifugo_node_num_users" class="hash-link" aria-label="Direct link to centrifugo_node_num_users" title="Direct link to centrifugo_node_num_users">​</a></h4>
<ul>
<li><strong>Type:</strong> Gauge</li>
<li><strong>Description:</strong> Displays the number of unique users connected to the node.</li>
<li><strong>Usage:</strong> Helps in understanding user engagement and capacity planning.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_num_subscriptions">centrifugo_node_num_subscriptions<a href="#centrifugo_node_num_subscriptions" class="hash-link" aria-label="Direct link to centrifugo_node_num_subscriptions" title="Direct link to centrifugo_node_num_subscriptions">​</a></h4>
<ul>
<li><strong>Type:</strong> Gauge</li>
<li><strong>Description:</strong> Indicates the number of active subscriptions.</li>
<li><strong>Usage:</strong> Use this to monitor the subscription levels and identify any potential issues or required optimizations.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_num_nodes">centrifugo_node_num_nodes<a href="#centrifugo_node_num_nodes" class="hash-link" aria-label="Direct link to centrifugo_node_num_nodes" title="Direct link to centrifugo_node_num_nodes">​</a></h4>
<ul>
<li><strong>Type:</strong> Gauge</li>
<li><strong>Description:</strong> Shows the total number of nodes in the cluster.</li>
<li><strong>Usage:</strong> Essential for monitoring the size of the cluster and ensuring that all nodes are operational.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_build">centrifugo_node_build<a href="#centrifugo_node_build" class="hash-link" aria-label="Direct link to centrifugo_node_build" title="Direct link to centrifugo_node_build">​</a></h4>
<ul>
<li><strong>Type:</strong> Gauge</li>
<li><strong>Labels:</strong> version</li>
<li><strong>Description:</strong> Provides build information of the node.</li>
<li><strong>Usage:</strong> Helps in tracking the version of the application running across different environments.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_num_channels">centrifugo_node_num_channels<a href="#centrifugo_node_num_channels" class="hash-link" aria-label="Direct link to centrifugo_node_num_channels" title="Direct link to centrifugo_node_num_channels">​</a></h4>
<ul>
<li><strong>Type:</strong> Gauge</li>
<li><strong>Description:</strong> Counts the number of channels with one or more subscribers.</li>
<li><strong>Usage:</strong> Useful for monitoring the activity and utilization of channels.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_survey_duration_seconds">centrifugo_node_survey_duration_seconds<a href="#centrifugo_node_survey_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_node_survey_duration_seconds" title="Direct link to centrifugo_node_survey_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Summary</li>
<li><strong>Labels:</strong> op</li>
<li><strong>Description:</strong> Captures the duration of surveys conducted by the node.</li>
<li><strong>Usage:</strong> Helps in performance monitoring and identifying any delays or issues in survey operations.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_num_reply_errors">centrifugo_client_num_reply_errors<a href="#centrifugo_client_num_reply_errors" class="hash-link" aria-label="Direct link to centrifugo_client_num_reply_errors" title="Direct link to centrifugo_client_num_reply_errors">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> method, code</li>
<li><strong>Description:</strong> Counts the number of errors in replies sent to clients.</li>
<li><strong>Usage:</strong> Critical for error monitoring and ensuring smooth client interactions.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_num_server_unsubscribes">centrifugo_client_num_server_unsubscribes<a href="#centrifugo_client_num_server_unsubscribes" class="hash-link" aria-label="Direct link to centrifugo_client_num_server_unsubscribes" title="Direct link to centrifugo_client_num_server_unsubscribes">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> code</li>
<li><strong>Description:</strong> Tracks the number of server-initiated unsubscribes.</li>
<li><strong>Usage:</strong> Use this to monitor the health of client connections and identify potential issues with the server.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_num_server_disconnects">centrifugo_client_num_server_disconnects<a href="#centrifugo_client_num_server_disconnects" class="hash-link" aria-label="Direct link to centrifugo_client_num_server_disconnects" title="Direct link to centrifugo_client_num_server_disconnects">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> code</li>
<li><strong>Description:</strong> Tracks the number of server-initiated disconnects.</li>
<li><strong>Usage:</strong> Use this to monitor the health of client connections and identify potential issues with the server.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_command_duration_seconds">centrifugo_client_command_duration_seconds<a href="#centrifugo_client_command_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_client_command_duration_seconds" title="Direct link to centrifugo_client_command_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Summary</li>
<li><strong>Labels:</strong> method</li>
<li><strong>Description:</strong> Measures the duration of commands executed by clients.</li>
<li><strong>Usage:</strong> Essential for performance monitoring and ensuring timely responses to client commands.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_recover">centrifugo_client_recover<a href="#centrifugo_client_recover" class="hash-link" aria-label="Direct link to centrifugo_client_recover" title="Direct link to centrifugo_client_recover">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> recovered</li>
<li><strong>Description:</strong> Counts the number of recover operations performed.</li>
<li><strong>Usage:</strong> Helps in tracking the system&#x27;s resilience and recovery mechanisms.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_connection_limit_reached_total">centrifugo_client_connection_limit_reached_total<a href="#centrifugo_client_connection_limit_reached_total" class="hash-link" aria-label="Direct link to centrifugo_client_connection_limit_reached_total" title="Direct link to centrifugo_client_connection_limit_reached_total">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> None</li>
<li><strong>Description:</strong> Number of refused connections due to the node client connection limit.</li>
<li><strong>Usage:</strong> Useful for monitoring the load on the Centrifugo node and identifying when clients are being refused connections due to reaching the connection limit.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_client_ping_pong_duration_seconds">centrifugo_client_ping_pong_duration_seconds<a href="#centrifugo_client_ping_pong_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_client_ping_pong_duration_seconds" title="Direct link to centrifugo_client_ping_pong_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Histogram</li>
<li><strong>Labels:</strong> transport</li>
<li><strong>Description:</strong> Tracks the duration of ping/pong – i.e. time between sending ping to client and receiving pong from client.</li>
<li><strong>Usage:</strong> Helps in monitoring the client protocol performance, latency, making sure frame processing does not take too much time on the client side.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_transport_messages_sent">centrifugo_transport_messages_sent<a href="#centrifugo_transport_messages_sent" class="hash-link" aria-label="Direct link to centrifugo_transport_messages_sent" title="Direct link to centrifugo_transport_messages_sent">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> transport, frame_type, channel_namespace</li>
<li><strong>Description:</strong> Tracks the number of messages sent to client connections over specific transports.</li>
<li><strong>Usage:</strong> Essential for understanding the data flow and performance of different transports.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_transport_messages_sent_size">centrifugo_transport_messages_sent_size<a href="#centrifugo_transport_messages_sent_size" class="hash-link" aria-label="Direct link to centrifugo_transport_messages_sent_size" title="Direct link to centrifugo_transport_messages_sent_size">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> transport, frame_type, channel_namespace</li>
<li><strong>Description:</strong> Measures the size of messages (in bytes) sent to client connections over specific transports.</li>
<li><strong>Usage:</strong> Helps in monitoring the network bandwidth usage and optimizing the data transfer.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_transport_messages_received">centrifugo_transport_messages_received<a href="#centrifugo_transport_messages_received" class="hash-link" aria-label="Direct link to centrifugo_transport_messages_received" title="Direct link to centrifugo_transport_messages_received">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> transport, frame_type, channel_namespace</li>
<li><strong>Description:</strong> Counts the number of messages received from client connections over specific transports.</li>
<li><strong>Usage:</strong> Important for ensuring that messages are being successfully received and processed.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_transport_messages_received_size">centrifugo_transport_messages_received_size<a href="#centrifugo_transport_messages_received_size" class="hash-link" aria-label="Direct link to centrifugo_transport_messages_received_size" title="Direct link to centrifugo_transport_messages_received_size">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> transport, frame_type, channel_namespace</li>
<li><strong>Description:</strong> Measures the size of messages (in bytes) received from client connections over specific transports.</li>
<li><strong>Usage:</strong> Use this metric to monitor the incoming data size and optimize the application&#x27;s performance.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_proxy_duration_seconds">centrifugo_proxy_duration_seconds<a href="#centrifugo_proxy_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_proxy_duration_seconds" title="Direct link to centrifugo_proxy_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Summary &amp; Histogram</li>
<li><strong>Labels:</strong> protocol, type</li>
<li><strong>Description:</strong> Captures the duration of proxy calls.</li>
<li><strong>Usage:</strong> Critical for understanding the performance of proxy calls and identifying any potential bottlenecks or issues.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_proxy_errors">centrifugo_proxy_errors<a href="#centrifugo_proxy_errors" class="hash-link" aria-label="Direct link to centrifugo_proxy_errors" title="Direct link to centrifugo_proxy_errors">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> protocol, type</li>
<li><strong>Description:</strong> Counts the number of errors occurred during proxy calls.</li>
<li><strong>Usage:</strong> Helps in monitoring the reliability of proxy services and ensuring error-free operations.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_granular_proxy_duration_seconds">centrifugo_granular_proxy_duration_seconds<a href="#centrifugo_granular_proxy_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_granular_proxy_duration_seconds" title="Direct link to centrifugo_granular_proxy_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Summary &amp; Histogram</li>
<li><strong>Labels:</strong> type, name</li>
<li><strong>Description:</strong> Measures the duration of granular proxy calls.</li>
<li><strong>Usage:</strong> Use this to get more detailed insights into the performance of granular proxy operations.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_granular_proxy_errors">centrifugo_granular_proxy_errors<a href="#centrifugo_granular_proxy_errors" class="hash-link" aria-label="Direct link to centrifugo_granular_proxy_errors" title="Direct link to centrifugo_granular_proxy_errors">​</a></h4>
<ul>
<li><strong>Type:</strong> Counter</li>
<li><strong>Labels:</strong> type, name</li>
<li><strong>Description:</strong> Counts the number of errors in granular proxy calls.</li>
<li><strong>Usage:</strong> Essential for error tracking and ensuring the stability of granular proxy services.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_api_command_duration_seconds">centrifugo_api_command_duration_seconds<a href="#centrifugo_api_command_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_api_command_duration_seconds" title="Direct link to centrifugo_api_command_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Summary</li>
<li><strong>Labels:</strong> protocol, method</li>
<li><strong>Description:</strong> Tracks the duration of API commands.</li>
<li><strong>Usage:</strong> Helps in monitoring the API performance and ensuring timely responses.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_api_command_duration_seconds_histogram">centrifugo_api_command_duration_seconds_histogram<a href="#centrifugo_api_command_duration_seconds_histogram" class="hash-link" aria-label="Direct link to centrifugo_api_command_duration_seconds_histogram" title="Direct link to centrifugo_api_command_duration_seconds_histogram">​</a></h4>
<ul>
<li><strong>Type:</strong> Histogram</li>
<li><strong>Labels:</strong> protocol, method</li>
<li><strong>Description:</strong> Tracks the duration of API commands.</li>
<li><strong>Usage:</strong> Helps in monitoring the API performance and ensuring timely responses.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_pub_sub_lag_seconds">centrifugo_node_pub_sub_lag_seconds<a href="#centrifugo_node_pub_sub_lag_seconds" class="hash-link" aria-label="Direct link to centrifugo_node_pub_sub_lag_seconds" title="Direct link to centrifugo_node_pub_sub_lag_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Histogram</li>
<li><strong>Labels:</strong></li>
<li><strong>Description:</strong> Tracks pub sub lag in seconds.</li>
<li><strong>Usage:</strong> Helps in monitoring of PUB/SUB layer performance. Note, this metric may be not exact in distributed environment due to time skew (to minify effect use NTP). In this case it still may be useful to identifies growth in lag.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="centrifugo_node_broadcast_duration_seconds">centrifugo_node_broadcast_duration_seconds<a href="#centrifugo_node_broadcast_duration_seconds" class="hash-link" aria-label="Direct link to centrifugo_node_broadcast_duration_seconds" title="Direct link to centrifugo_node_broadcast_duration_seconds">​</a></h4>
<ul>
<li><strong>Type:</strong> Histogram</li>
<li><strong>Labels:</strong></li>
<li><strong>Description:</strong> Tracks broadcast duration in seconds.</li>
<li><strong>Usage:</strong> Useful to monitor time required for broadcasting the message to subscribers on the node. If it grows and the number of messages increases – may indicate the need to scale.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="traces">Traces<a href="#traces" class="hash-link" aria-label="Direct link to Traces" title="Direct link to Traces">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="opentelemetry">OpenTelemetry<a href="#opentelemetry" class="hash-link" aria-label="Direct link to OpenTelemetry" title="Direct link to OpenTelemetry">​</a></h3>
<p>At this point Centrifugo can export traces for HTTP and GRPC server API requests in OpenTelemetry format.</p>
<p>To enable:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;opentelemetry&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;api&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>OpenTelemetry must be explicitly turned on to avoid tracing overhead when it&#x27;s not needed.</p>
<p>To configure OpenTelemetry export behaviour we are relying on <a href="https://opentelemetry.io/docs/concepts/sdk-configuration/otlp-exporter-configuration/" target="_blank" rel="noopener noreferrer">OpenTelemetry environment vars</a> supporting only HTTP export endpoints for now.</p>
<p>So a simple example to run Centrifugo with server API tracing would be running Jaeger with <code>COLLECTOR_OTLP_ENABLED</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run --rm -it --name jaeger \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -e COLLECTOR_OTLP_ENABLED=true \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 16686:16686 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 4318:4318 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jaegertracing/all-in-one:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then start Centrifugo:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">OTEL_EXPORTER_OTLP_ENDPOINT=&quot;http://localhost:4318&quot; CENTRIFUGO_OPENTELEMETRY=1 CENTRIFUGO_OPENTELEMETRY_API=1 ./centrifugo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Send some API requests - and open <a href="http://localhost:16686" target="_blank" rel="noopener noreferrer">http://localhost:16686</a> to see traces in Jaeger UI.</p>
<p>By default, Centrifugo exports traces in <code>http/protobuf</code> format. If you want to use GRPC exporter then it&#x27;s possible to turn it on by setting environment variable <code>OTEL_EXPORTER_OTLP_PROTOCOL</code> to <code>grpc</code> (GRPC exporter format supported since Centrifugo v5.0.3).</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logs">Logs<a href="#logs" class="hash-link" aria-label="Direct link to Logs" title="Direct link to Logs">​</a></h2>
<p>Logging may be configured using <code>log_level</code> option. It may have the following values:</p>
<ul>
<li><code>none</code></li>
<li><code>trace</code></li>
<li><code>debug</code></li>
<li><code>info</code> (default)</li>
<li><code>warn</code></li>
<li><code>error</code></li>
</ul>
<p>We generally do not recommend anything below info to be used in production.</p>
<p>By default, Centrifugo logs to STDOUT. Usually this is what you need when running servers on modern infrastructures. Logging into file may be configured using <code>log_file</code> option.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/centrifugal/centrifugal.dev/edit/main/docs/server/observability.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/server/admin_web"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Admin web UI</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/server/infra_tuning"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Infrastructure tuning</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#metrics" class="table-of-contents__link toc-highlight">Metrics</a><ul><li><a href="#prometheus-metrics" class="table-of-contents__link toc-highlight">Prometheus metrics</a></li><li><a href="#graphite-metrics" class="table-of-contents__link toc-highlight">Graphite metrics</a></li><li><a href="#grafana-dashboard" class="table-of-contents__link toc-highlight">Grafana dashboard</a></li><li><a href="#exposed-metrics" class="table-of-contents__link toc-highlight">Exposed metrics</a></li></ul></li><li><a href="#traces" class="table-of-contents__link toc-highlight">Traces</a><ul><li><a href="#opentelemetry" class="table-of-contents__link toc-highlight">OpenTelemetry</a></li></ul></li><li><a href="#logs" class="table-of-contents__link toc-highlight">Logs</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contact us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hello@centrifugal.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Send e-mail</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/joinchat/U57MI8Lam9mhpuhd" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/tYgADKx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/centrifugalabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/attributions">Attributions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Centrifugal Labs LTD</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-server/channels" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Channels and namespaces | Centrifugo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-rh="true" name="twitter:image" content="https://centrifugal.dev/img/centrifugo_soc.png"><meta data-rh="true" property="og:url" content="https://centrifugal.dev/docs/server/channels"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Channels and namespaces | Centrifugo"><meta data-rh="true" name="description" content="Centrifugo operates on a PUB/SUB model. Upon connecting to a server, clients can subscribe to channels. A channel is one of the core concepts of Centrifugo. Most of the time when integrating Centrifugo, you will work with channels and determine the optimal channel configuration for your application."><meta data-rh="true" property="og:description" content="Centrifugo operates on a PUB/SUB model. Upon connecting to a server, clients can subscribe to channels. A channel is one of the core concepts of Centrifugo. Most of the time when integrating Centrifugo, you will work with channels and determine the optimal channel configuration for your application."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://centrifugal.dev/docs/server/channels"><link data-rh="true" rel="alternate" href="https://centrifugal.dev/docs/server/channels" hreflang="en"><link data-rh="true" rel="alternate" href="https://centrifugal.dev/docs/server/channels" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EPXZ1LXJ33-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title=" RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title=" Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title=" JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NZRQD92LEX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-NZRQD92LEX",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Centrifugo" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"><link rel="stylesheet" href="/assets/css/styles.b981224e.css">
<script src="/assets/js/runtime~main.d73eb006.js" defer="defer"></script>
<script src="/assets/js/main.5bba70fc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Centrifugo</b></a><a class="navbar__item navbar__link" href="/docs/getting-started/introduction">Getting Started</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Grand tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/server/configuration">Server guide</a><a class="navbar__item navbar__link" href="/docs/transports/overview">Real-time transports / SDK</a><a class="navbar__item navbar__link" href="/docs/pro/overview">Centrifugo PRO ♻️</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/centrifugal/centrifugo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/getting-started/introduction">v5</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/server/channels">v5</a></li><li><a class="dropdown__link" href="/docs/4/server/channels">v4</a></li><li><a class="dropdown__link" href="/docs/3/server/channels">v3</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Centrifugo Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Centrifugo</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/configuration">Configure Centrifugo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/server_api">Server API walkthrough</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/authentication">Client JWT authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/server/channels">Channels and namespaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/channel_permissions">Channel permission model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/channel_token_auth">Channel JWT authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/server_subs">Server-side subscriptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/engines">Engines and scalability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/consumers">Async consumers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/history_and_recovery">History and recovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/cache_recovery">Cache recovery mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/delta_compression">Delta compression</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/presence">Online presence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/proxy">Proxy events to the backend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/proxy_streams">Proxy subscription streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/admin_web">Admin web UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/observability">Server observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/infra_tuning">Infrastructure tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/load_balancing">Load balancing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/tls">Configure TLS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/codes">Client protocol codes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/server/console_commands">Helper CLI commands</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Channels and namespaces</h1></header><p>Centrifugo operates on a PUB/SUB model. Upon connecting to a server, clients can subscribe to channels. A channel is one of the core concepts of Centrifugo. Most of the time when integrating Centrifugo, you will work with channels and determine the optimal channel configuration for your application.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-a-channel">What is a channel?<a href="#what-is-a-channel" class="hash-link" aria-label="Direct link to What is a channel?" title="Direct link to What is a channel?">​</a></h2>
<p>Centrifugo operates on a PUB/SUB model - it has publishers and subscribers. A channel serves as a pathway for messages. Clients can subscribe to a channel to receive all the real-time messages published there. Subscribers to a channel may also request information about the channel&#x27;s online presence or its history.</p>
<p><img decoding="async" loading="lazy" alt="pub_sub" src="/assets/images/pub_sub-5477abf6fb38219fc0848d9c9c3dc2b1.png" width="2924" height="1231" class="img_ev3q"></p>
<p>A channel is simply a string - names like <code>news</code>, <code>comments</code>, <code>personal_feed</code> are examples of valid channel names. However, there are <a href="#channel-name-rules">predefined rules</a> for these strings, as we will discuss later. You can define different behaviors for a channel using a range of available <a href="#channel-options">channel options</a>.</p>
<p>Channels are ephemeral – there is no need to create them explicitly. Channels are automatically created by Centrifugo as soon as the first client subscribes. Similarly, when the last subscriber leaves, the channel is automatically cleaned up.</p>
<p>A channel can be part of a channel namespace. <a href="#channel-namespaces">Channel namespacing</a> is a mechanism to define different behaviors for various channels within Centrifugo. Using namespaces is the recommended approach to manage channels – enabling only those channel options which are necessary for the specific real-time feature you are implementing with Centrifugo.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Ensure you have defined a namespace in the configuration when using channel namespaces. Attempts to subscribe to a channel within an undefined namespace will result in <a href="/docs/server/codes#unknown-channel">102: unknown channel</a> errors.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel-name-rules">Channel name rules<a href="#channel-name-rules" class="hash-link" aria-label="Direct link to Channel name rules" title="Direct link to Channel name rules">​</a></h2>
<p><strong>Only ASCII symbols must be used in a channel string</strong>.</p>
<p>Channel name length limited by <code>255</code> characters by default (controlled by configuration option <code>channel_max_length</code>).</p>
<p>Several symbols in channel names reserved for Centrifugo internal needs:</p>
<ul>
<li><code>:</code> – for namespace channel boundary (see below)</li>
<li><code>#</code> – for user channel boundary (see below)</li>
<li><code>$</code> – for private channel prefix (see below)</li>
<li><code>/</code> – for <a href="/docs/pro/channel_patterns">Channel Patterns</a> in Centrifugo PRO</li>
<li><code>*</code> – for the future Centrifugo needs</li>
<li><code>&amp;</code> – for the future Centrifugo needs</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="namespace-boundary-">namespace boundary (<code>:</code>)<a href="#namespace-boundary-" class="hash-link" aria-label="Direct link to namespace-boundary-" title="Direct link to namespace-boundary-">​</a></h3>
<p><code>:</code> – is a channel namespace boundary. Namespaces are used to set custom options to a group of channels. Each channel belonging to the same namespace will have the same channel options. Read more about <a href="#channel-namespaces">namespaces</a> and <a href="#channel-options">channel options</a> below.</p>
<p>If the channel is <code>public:chat</code> - then Centrifugo will apply options to this channel from the channel namespace with the name <code>public</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>A namespace is an inalienable component of the channel name. If a user is subscribed to a channel with a namespace, such as <code>public:chat</code>, then you must publish messages to the <code>public:chat</code> channel for them to be delivered to the user. There is often confusion among developers who try to publish messages to <code>chat</code>, mistakenly believing that the namespace is stripped upon subscription. This is not the case. You must publish exactly to the same channel string you used for subscribing.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="user-channel-boundary-">user channel boundary (<code>#</code>)<a href="#user-channel-boundary-" class="hash-link" aria-label="Direct link to user-channel-boundary-" title="Direct link to user-channel-boundary-">​</a></h3>
<p>The <code>#</code> symbol serves as the user channel boundary. It acts as a separator to create personal channels for users, known as <em>user-limited channels</em>, without requiring a subscription token.</p>
<p>For instance, if the channel is named <code>news#42</code>, then only the user with ID <code>42</code> can subscribe to this channel. Centrifugo identifies the user ID from the connection credentials provided in the connection JWT.</p>
<p>To create a user-limited channel within the <code>personal</code> namespace, you might use a name such as <code>personal:user#42</code>.</p>
<p>Furthermore, it&#x27;s possible to specify multiple user IDs in the channel name, separated by a comma: <code>dialog#42,43</code>. In this case, only users with IDs <code>42</code> and <code>43</code> are permitted to subscribe to this channel.</p>
<p>This setup is ideal for channels that have a static list of allowed users, such as channels for personal messages to a single user or dialogue channels between specific users. However, for dynamic access management of a channel for numerous users, this type of channel is not appropriate.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>User-limited channels must be enabled for a channel namespace using <a href="#allow_user_limited_channels">allow_user_limited_channels</a> option. See below more information about channel options and channel namespaces.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="private-channel-prefix-">private channel prefix (<code>$</code>)<a href="#private-channel-prefix-" class="hash-link" aria-label="Direct link to private-channel-prefix-" title="Direct link to private-channel-prefix-">​</a></h3>
<p>Centrifugo maintains compatibility with its previous versions which had concept of private channels. In earlier versions — specifically Centrifugo v1, v2, and v3—only – only channels beginning with <code>$</code> required a subscription JWT for subscribing. With Centrifugo v4, this is no longer the case; clients can subscribe to any channel if they have a valid subscription token.</p>
<p>However, for namespaces where the <code>allow_subscribe_for_client</code> option is activated, Centrifugo prohibits subscriptions to channels that start with the <code>private_channel_prefix</code> (which defaults to <code>$</code>) unless a subscription token is provided. This restriction is designed to facilitate a secure migration to Centrifugo v4 or later versions.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel-is-just-a-string">Channel is just a string<a href="#channel-is-just-a-string" class="hash-link" aria-label="Direct link to Channel is just a string" title="Direct link to Channel is just a string">​</a></h3>
<p>Remember that a channel is uniquely identified by its string name. Do not assume that <code>$news</code> and <code>news</code> are the same; they are different because their names are not identical. Therefore, if a user is subscribed to <code>$news</code>, they will not receive messages published to <code>news</code>.</p>
<p>The channels <code>dialog#42,43</code> and <code>dialog#43,42</code> are considered different as well. Centrifugo only applies permission checks when a user subscribes to a channel. So if user-limited channels are enabled then the user with ID <code>42</code> will be able to subscribe on both <code>dialog#42,43</code> and <code>dialog#43,42</code>. But Centrifugo does no magic regarding channel strings when keeping channel-&gt;to-&gt;subscribers map. So if the user subscribed on <code>dialog#42,43</code> you must publish messages to exactly that channel: <code>dialog#42,43</code>.</p>
<p>The same reasoning applies to channels within namespaces. Channels <code>chat:index</code> and <code>index</code> are not the same — they are distinct and, moreover, they belong to different namespaces. The concept of channel namespaces in Centrifugo will be discussed shortly.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel-namespaces">Channel namespaces<a href="#channel-namespaces" class="hash-link" aria-label="Direct link to Channel namespaces" title="Direct link to Channel namespaces">​</a></h2>
<p>Centrifugo allows configuring a list of channel namespaces. Namespaces are optional but super-useful.</p>
<p>A namespace is a container for options applied to channels that start with the namespace name + <code>:</code> separator. For example, if you define a namespace named <code>personal</code> in the configuration, all channels starting with <code>personal:</code> (such as <code>personal:1</code> or <code>personal:2</code>) will inherit the options defined for the <code>personal</code> namespace. This gives you great control over channel behavior, allowing you to set different options for various real-time features in your application.</p>
<p>Namespace has a name, and can contain all the <a href="#channel-options">channel options</a>. Namespace <code>name</code> is required to be set. Name of namespace must be unique, must consist of letters, numbers, underscores, or hyphens and be more than 2 symbols length i.e. satisfy regexp <code>^[-a-zA-Z0-9_]{2,}$</code>.</p>
<p>When you want to use specific namespace options your channel must be prefixed with namespace name and <code>:</code> separator: <code>public:messages</code>, <code>gossips:messages</code> are two channels in <code>public</code> and <code>gossips</code> namespaces.</p>
<p>Centrifugo looks for <code>:</code> symbol in the channel name, if found – extracts the namespace name, and applies all the configured namespace channel options while processing protocol commands from a client or server API calls.</p>
<p>All things together here is an example of <code>config.json</code> which includes some top-level channel options set and has 2 additional channel namespaces configured:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">config.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;token_hmac_secret_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;very-long-secret-key&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;api_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;secret-api-key&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;presence&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;history_size&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;history_ttl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;30s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;namespaces&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;facts&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;history_size&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;history_ttl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;300s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gossips&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Channel <code>news</code> will use globally defined channel options.</li>
<li>Channel <code>facts:sport</code> will use <code>facts</code> namespace options.</li>
<li>Channel <code>gossips:sport</code> will use <code>gossips</code> namespace options.</li>
<li>Channel <code>xxx:hello</code> will result into subscription error since there is no <code>xxx</code> namespace defined in the configuration above.</li>
</ul>
<p><strong>Channel namespaces also work with private channels and user-limited channels</strong>. For example, if you have a namespace called <code>dialogs</code> then the private channel can be constructed as <code>$dialogs:gossips</code>, user-limited channel can be constructed as <code>dialogs:dialog#1,2</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>There is <strong>no inheritance</strong> in channel options and namespaces – for example, you defined <code>presence: true</code> on a top level of configuration and then defined a namespace – that namespace won&#x27;t have online presence enabled - you must enable it for a namespace explicitly.</p></div></div>
<p>There are many options which can be set for channel namespace (on top-level and to named one) to modify behavior of channels belonging to a namespace. Below we describe all these options.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel-options">Channel options<a href="#channel-options" class="hash-link" aria-label="Direct link to Channel options" title="Direct link to Channel options">​</a></h2>
<p>Channel behavior can be modified by using channel options. Channel options can be defined on configuration top-level and for every namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="presence">presence<a href="#presence" class="hash-link" aria-label="Direct link to presence" title="Direct link to presence">​</a></h3>
<p><code>presence</code> (boolean, default <code>false</code>) – enable/disable online presence information for channels in a namespace.</p>
<p>Online presence is information about clients currently subscribed to the channel. It contains each subscriber&#x27;s client ID, user ID, connection info, and channel info. By default, this option is off so no presence information will be available for channels.</p>
<p>Let&#x27;s say you have a channel <code>chat:index</code> with two users subscribed (IDs <code>2694</code> and <code>56</code>). User <code>56</code> has one connection to Centrifugo. User <code>2694</code> has two connections to Centrifugo from different browser tabs. The presence data might look like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --header &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --header &quot;X-API-Key: &lt;API_KEY&gt;&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --data &#x27;{&quot;channel&quot;: &quot;chat:index&quot;}&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  http://localhost:8000/api/presence</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;presence&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;66fdf8d1-06f0-4375-9fac-db959d6ee8d6&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;user&quot;: &quot;2694&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;client&quot;: &quot;66fdf8d1-06f0-4375-9fac-db959d6ee8d6&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;conn_info&quot;: {&quot;name&quot;: &quot;Alex&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;d4516dd3-0b6e-4cfe-84e8-0342fd2bb20c&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;user&quot;: &quot;2694&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;client&quot;: &quot;d4516dd3-0b6e-4cfe-84e8-0342fd2bb20c&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;conn_info&quot;: {&quot;name&quot;: &quot;Alex&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;g3216dd3-1b6e-tcfe-14e8-1342fd2bb20c&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;user&quot;: &quot;56&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;client&quot;: &quot;g3216dd3-1b6e-tcfe-14e8-1342fd2bb20c&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;conn_info&quot;: {&quot;name&quot;: &quot;Alice&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To call presence API from the client connection side client must have permission to do so. See <a href="/docs/server/channel_permissions#presence-permission-model">presence permission model</a>.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Enabling channel online presence adds some overhead since Centrifugo needs to maintain an additional data structure (in a process memory or in a broker memory/disk). So only use it for channels where presence is required.</p></div></div>
<p>See more details about <a href="/docs/getting-started/design#online-presence-considerations">online presence design</a>.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="join_leave">join_leave<a href="#join_leave" class="hash-link" aria-label="Direct link to join_leave" title="Direct link to join_leave">​</a></h3>
<p><code>join_leave</code> (boolean, default <code>false</code>) – enable/disable sending join and leave messages when the client subscribes to a channel (unsubscribes from a channel). Join/leave event includes information about the connection that triggered an event – client ID, user ID, connection info, and channel info (similar to entry inside presence information).</p>
<p>Enabling <code>join_leave</code> means that Join/Leave messages will start being emitted, but by default they are not delivered to clients subscribed to a channel. You need to force this using namespace option <a href="#forcepushjoinleave">force_push_join_leave</a> or explicitly provide intent from a client-side (in this case client must have permission to call presence API).</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Keep in mind that join/leave messages can generate a huge number of messages in a system if turned on for channels with a large number of active subscribers. If you have channels with a large number of subscribers consider avoiding using this feature. It&#x27;s hard to say what is &quot;large&quot; for you though – just estimate the load based on the fact that each subscribe/unsubscribe event in a channel with N subscribers will result into N messages broadcasted to all. If all clients reconnect at the same time the amount of generated messages is N^2.</p></div></div>
<p>Join/leave messages distributed only with at most once delivery guarantee.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="force_push_join_leave">force_push_join_leave<a href="#force_push_join_leave" class="hash-link" aria-label="Direct link to force_push_join_leave" title="Direct link to force_push_join_leave">​</a></h3>
<p>Boolean, default <code>false</code>.</p>
<p>When on all clients will receive join/leave events for a channel in a namespace automatically – without explicit intent to consume join/leave messages from the client side.</p>
<p>If pushing join/leave is not forced then client can provide a corresponding Subscription option to enable it – but it should have permissions to access channel presence (by having an explicit capability or if allowed on a namespace level).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="history_size">history_size<a href="#history_size" class="hash-link" aria-label="Direct link to history_size" title="Direct link to history_size">​</a></h3>
<p><code>history_size</code> (integer, default <code>0</code>) – history size (amount of messages) for channels. As Centrifugo keeps all history messages in process memory (or in a broker memory) it&#x27;s very important to limit the maximum amount of messages in channel history with a reasonable value. <code>history_size</code> defines the maximum amount of messages that Centrifugo will keep for <strong>each</strong> channel in the namespace. As soon as history has more messages than defined by history size – old messages will be evicted.</p>
<p>Setting only <code>history_size</code> <strong>is not enough to enable history in channels</strong> – you also need to wisely configure <code>history_ttl</code> option (see below).</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Enabling channel history adds some overhead (both memory and CPU) since Centrifugo needs to maintain an additional data structure (in a process memory or a broker memory/disk). So only use history for channels where it&#x27;s required.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="history_ttl">history_ttl<a href="#history_ttl" class="hash-link" aria-label="Direct link to history_ttl" title="Direct link to history_ttl">​</a></h3>
<p><code>history_ttl</code> (<a href="/docs/server/configuration#setting-time-duration-options">duration</a>, default <code>0s</code>) – interval how long to keep channel history messages (with seconds precision).</p>
<p>As all history is storing in process memory (or in a broker memory) it is also very important to get rid of old history data for unused (inactive for a long time) channels.</p>
<p>By default history TTL duration is zero – this means that channel history is disabled.</p>
<p><strong>Again – to turn on history you should wisely configure both <code>history_size</code> and <code>history_ttl</code> options</strong>.</p>
<p>Also note, that <code>history_ttl</code> must be less than <a href="#history_meta_ttl">history_meta_ttl</a>.</p>
<p>For example for top-level channels (which do not belong to a namespace):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">config.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;history_size&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;history_ttl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;60s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here&#x27;s an example. You enabled history for the <code>chat</code> namespace and sent two messages in the <code>chat:index</code> channel. The history will look like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --header &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --header &quot;X-API-Key: &lt;API_KEY&gt;&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --data &#x27;{&quot;channel&quot;: &quot;chat:index&quot;, &quot;limit&quot;: 100}&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  http://localhost:8000/api/history</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;publications&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;input&quot;: &quot;1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;offset&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;input&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;offset&quot;: 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;epoch&quot;: &quot;gWuY&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;offset&quot;: 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To call the history API from the client side, the client must have the necessary permissions. For more details, see the <a href="/docs/server/channel_permissions#history-permission-model">history permission model</a>.</p>
<p>See additional information about offsets and epoch in <a href="/docs/server/history_and_recovery">History and recovery</a> chapter.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The persistence properties of history data depend on the Centrifugo engine in use. For instance, with the Memory engine (default), history is retained only until the Centrifugo node restarts. In contrast, with the Redis engine, persistence is determined by the Redis server&#x27;s configuration (similarly for Redis-compatible storages and Tarantool).</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="history_meta_ttl">history_meta_ttl<a href="#history_meta_ttl" class="hash-link" aria-label="Direct link to history_meta_ttl" title="Direct link to history_meta_ttl">​</a></h3>
<p><code>history_meta_ttl</code> (<a href="/docs/server/configuration#setting-time-duration-options">duration</a>) – sets a time of history stream metadata expiration (with seconds precision).</p>
<p>If not specified Centrifugo namespace inherits value from <code>global_history_meta_ttl</code> (<a href="/docs/server/configuration#setting-time-duration-options">duration</a>) option which is 30 days by default (<code>&quot;720h&quot;</code>). This should be a good default for most use cases to avoid tweaking <code>history_meta_ttl</code> on a namespace level at all. If you have <code>history_ttl</code> greater than 30 days – then increase <code>history_meta_ttl</code> for namespace (recommended) or increase <code>global_history_meta_ttl</code> to be larger than <code>history_ttl</code>.</p>
<p>The motivation to have history meta information TTL is as follows. When using a history in a channel, Centrifugo keeps some metadata for each channel stream. Metadata includes the latest stream offset and its epoch value. In some cases, when channels are created for а short time and then not used anymore, created metadata can stay in memory while not useful. For example, you can have a personal user channel but after using your app for a while user left it forever. From a long-term perspective, this can be an unwanted memory growth. Setting a reasonable value to this option can help to expire metadata faster (or slower if you need it). The rule of thumb here is to keep this value larger than history TTL used.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="force_positioning">force_positioning<a href="#force_positioning" class="hash-link" aria-label="Direct link to force_positioning" title="Direct link to force_positioning">​</a></h3>
<p><code>force_positioning</code> (boolean, default <code>false</code>) – when the <code>force_positioning</code> option is on Centrifugo forces all subscriptions in a namespace to be <code>positioned</code>. I.e. Centrifugo will try to compensate at most once delivery of PUB/SUB broker checking client position inside a stream.</p>
<p>If Centrifugo detects a bad position of the client (i.e. potential message loss) it disconnects a client with the <code>Insufficient state</code> disconnect code. Also, when the position option is enabled Centrifugo exposes the current stream top <code>offset</code> and current <code>epoch</code> in subscribe reply making it possible for a client to manually recover its state upon disconnect using history API.</p>
<p><code>force_positioning</code> option must be used in conjunction with reasonably configured message history for a channel i.e. <code>history_size</code> and <code>history_ttl</code> <strong>must be set</strong> (because Centrifugo uses channel history to check client position in a stream).</p>
<p>If positioning is not forced then client can provide a corresponding Subscription option to enable it – but it should have permissions to access channel history (by having an explicit capability or if allowed on a namespace level).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="force_recovery">force_recovery<a href="#force_recovery" class="hash-link" aria-label="Direct link to force_recovery" title="Direct link to force_recovery">​</a></h3>
<p><code>force_recovery</code> (boolean, default <code>false</code>) – when the <code>force_recovery</code> option is on Centrifugo forces all subscriptions in a namespace to be <code>recoverable</code>. When enabled Centrifugo will try to recover missed publications in channels after a client reconnects for some reason (bad internet connection for example). Also when the recovery feature is on Centrifugo automatically enables properties of the <code>force_positioning</code> option described above.</p>
<p><code>force_recovery</code> option must be used in conjunction with reasonably configured message history for channel i.e. <code>history_size</code> and <code>history_ttl</code> <strong>must be set</strong> (because Centrifugo uses channel history to recover messages).</p>
<p>If recovery is not forced then client can provide a corresponding Subscription option to enable it – but it should have permissions to access channel history (by having an explicit capability or if allowed on a namespace level).</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Not all real-time events require this feature turned on so think wisely when you need this. When this option is turned on your application should be designed in a way to tolerate duplicate messages coming from a channel (currently Centrifugo returns recovered publications in order and without duplicates but this is an implementation detail that can be theoretically changed in the future). See more details about how recovery works in <a href="/docs/server/history_and_recovery">special chapter</a>.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="force_recovery_mode">force_recovery_mode<a href="#force_recovery_mode" class="hash-link" aria-label="Direct link to force_recovery_mode" title="Direct link to force_recovery_mode">​</a></h3>
<p><code>force_recovery_mode</code> (string, possible values are <code>stream</code> or <code>cache</code>, when not specified Centrifugo uses <code>&quot;stream&quot;</code>). Allows setting recovery mode for all connections which use recovery in the namespace. By default, Centrifugo uses <code>stream</code> recovery mode – a mode where subscriber interested in all messages to be delivered. The alternative recovery mode which may be forced by using this option is <code>cache</code> – see the detailed description in <a href="/docs/server/cache_recovery">Cache recovery mode</a> chapter.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_subscribe_for_client">allow_subscribe_for_client<a href="#allow_subscribe_for_client" class="hash-link" aria-label="Direct link to allow_subscribe_for_client" title="Direct link to allow_subscribe_for_client">​</a></h3>
<p><code>allow_subscribe_for_client</code> (boolean, default <code>false</code>) – when on all non-anonymous clients will be able to subscribe to any channel in a namespace. To additionally allow anonymous users to subscribe turn on <code>allow_subscribe_for_anonymous</code> (see below).</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Turning this option on effectively makes namespace public – no subscribe permissions will be checked (only the check that current connection is authenticated - i.e. has non-empty user ID). Make sure this is really what you want in terms of channels security.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_subscribe_for_anonymous">allow_subscribe_for_anonymous<a href="#allow_subscribe_for_anonymous" class="hash-link" aria-label="Direct link to allow_subscribe_for_anonymous" title="Direct link to allow_subscribe_for_anonymous">​</a></h3>
<p><code>allow_subscribe_for_anonymous</code> (boolean, default <code>false</code>) – turn on if anonymous clients (with empty user ID) should be able to subscribe on channels in a namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_publish_for_subscriber">allow_publish_for_subscriber<a href="#allow_publish_for_subscriber" class="hash-link" aria-label="Direct link to allow_publish_for_subscriber" title="Direct link to allow_publish_for_subscriber">​</a></h3>
<p><code>allow_publish_for_subscriber</code> (boolean, default <code>false</code>) - when the <code>allow_publish_for_subscriber</code> option is enabled client can publish into a channel in namespace directly from the client side over real-time connection but only if client subscribed to that channel.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Keep in mind that in this case subscriber can publish any payload to a channel – Centrifugo does not validate input at all. Your app backend won&#x27;t receive those messages - publications just go through Centrifugo towards channel subscribers. Consider always validate messages which are being published to channels (i.e. using server API to publish after validating input on the backend side, or using <a href="/docs/server/proxy#publish-proxy">publish proxy</a> - see <a href="/docs/getting-started/design#idiomatic-usage">idiomatic usage</a>).</p></div></div>
<p><code>allow_publish_for_subscriber</code> (or <code>allow_publish_for_client</code> mentioned below) option still can be useful to send something without backend-side validation and saving it into a database – for example, this option may be handy for demos and quick prototyping real-time app ideas.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_publish_for_client">allow_publish_for_client<a href="#allow_publish_for_client" class="hash-link" aria-label="Direct link to allow_publish_for_client" title="Direct link to allow_publish_for_client">​</a></h3>
<p><code>allow_publish_for_client</code> (boolean, default <code>false</code>) – when on allows clients to publish messages into channels directly (from a client-side). It&#x27;s like <code>allow_publish_for_subscriber</code> – but client should not be a channel subscriber to publish.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Keep in mind that in this case client can publish any payload to a channel – Centrifugo does not validate input at all. Your app backend won&#x27;t receive those messages - publications just go through Centrifugo towards channel subscribers. Consider always validate messages which are being published to channels (i.e. using server API to publish after validating input on the backend side, or using <a href="/docs/server/proxy#publish-proxy">publish proxy</a> - see <a href="/docs/getting-started/design#idiomatic-usage">idiomatic usage</a>).</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_publish_for_anonymous">allow_publish_for_anonymous<a href="#allow_publish_for_anonymous" class="hash-link" aria-label="Direct link to allow_publish_for_anonymous" title="Direct link to allow_publish_for_anonymous">​</a></h3>
<p><code>allow_publish_for_anonymous</code> (boolean, default <code>false</code>) – turn on if anonymous clients should be able to publish into channels in a namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_history_for_subscriber">allow_history_for_subscriber<a href="#allow_history_for_subscriber" class="hash-link" aria-label="Direct link to allow_history_for_subscriber" title="Direct link to allow_history_for_subscriber">​</a></h3>
<p><code>allow_history_for_subscriber</code> (boolean, default <code>false</code>) – allows clients who subscribed on a channel to call history API from that channel.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_history_for_client">allow_history_for_client<a href="#allow_history_for_client" class="hash-link" aria-label="Direct link to allow_history_for_client" title="Direct link to allow_history_for_client">​</a></h3>
<p><code>allow_history_for_client</code> (boolean, default <code>false</code>) – allows all clients to call history information in a namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_history_for_anonymous">allow_history_for_anonymous<a href="#allow_history_for_anonymous" class="hash-link" aria-label="Direct link to allow_history_for_anonymous" title="Direct link to allow_history_for_anonymous">​</a></h3>
<p><code>allow_history_for_anonymous</code> (boolean, default <code>false</code>) – turn on if anonymous clients should be able to call history from channels in a namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_presence_for_subscriber">allow_presence_for_subscriber<a href="#allow_presence_for_subscriber" class="hash-link" aria-label="Direct link to allow_presence_for_subscriber" title="Direct link to allow_presence_for_subscriber">​</a></h3>
<p><code>allow_presence_for_subscriber</code> (boolean, default <code>false</code>) – allows clients who subscribed on a channel to call presence information from that channel.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_presence_for_client">allow_presence_for_client<a href="#allow_presence_for_client" class="hash-link" aria-label="Direct link to allow_presence_for_client" title="Direct link to allow_presence_for_client">​</a></h3>
<p><code>allow_presence_for_client</code> (boolean, default <code>false</code>) – allows all clients to call presence information in a namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_presence_for_anonymous">allow_presence_for_anonymous<a href="#allow_presence_for_anonymous" class="hash-link" aria-label="Direct link to allow_presence_for_anonymous" title="Direct link to allow_presence_for_anonymous">​</a></h3>
<p><code>allow_presence_for_anonymous</code> (boolean, default <code>false</code>) – turn on if anonymous clients should be able to call presence from channels in a namespace.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allow_user_limited_channels">allow_user_limited_channels<a href="#allow_user_limited_channels" class="hash-link" aria-label="Direct link to allow_user_limited_channels" title="Direct link to allow_user_limited_channels">​</a></h3>
<p><code>allow_user_limited_channels</code> (boolean, default <code>false</code>) - allows using user-limited channels in a namespace for checking subscribe permission.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If client subscribes to a user-limited channel while this option is off then server rejects subscription with <code>103: permission denied</code> error.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel_regex">channel_regex<a href="#channel_regex" class="hash-link" aria-label="Direct link to channel_regex" title="Direct link to channel_regex">​</a></h3>
<p><code>channel_regex</code> (string, default <code>&quot;&quot;</code>) – is an option to set a regular expression for channels allowed in the namespace. By default Centrifugo does not limit channel name variations. For example, if you have a namespace <code>chat</code>, then channel names inside this namespace are not really limited, it can be <code>chat:index</code>, <code>chat:1</code>, <code>chat:2</code>, <code>chat:zzz</code> and so on. But if you want to be strict and know possible channel patterns you can use <code>channel_regex</code> option. This is especially useful in namespaces where all clients can subscribe to channels.</p>
<p>For example, let&#x27;s only allow digits after <code>chat:</code> for channel names in a <code>chat</code> namespace:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;namespaces&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;chat&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;allow_subscribe_for_client&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;channel_regex&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^[\d+]$&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Note, that we are skipping <code>chat:</code> part in regex. Since namespace prefix is the same for all channels in a namespace we only match the rest (after the prefix) of channel name.</p></div></div>
<p>Channel regex only checked for client-side subscriptions, if you are using server-side subscriptions Centrifugo won&#x27;t check the regex.</p>
<p>Centrifugo uses Go language <a href="https://pkg.go.dev/regexp" target="_blank" rel="noopener noreferrer">regexp</a> package for regular expressions.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="delta_publish">delta_publish<a href="#delta_publish" class="hash-link" aria-label="Direct link to delta_publish" title="Direct link to delta_publish">​</a></h3>
<p><code>delta_publish</code> (boolean, default <code>false</code>) allows marking all publications in the namespace with <code>delta</code> flag, i.e. all publications will result into delta updates for subscribers which negotiated delta compression for a channel.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allowed_delta_types">allowed_delta_types<a href="#allowed_delta_types" class="hash-link" aria-label="Direct link to allowed_delta_types" title="Direct link to allowed_delta_types">​</a></h3>
<p><code>allowed_delta_types</code> (array of strings, the only allowed value now is <code>fossil</code>) - provide an array of allowed delta compression types in the namespace. If not specified – client won&#x27;t be able to negotiate delta compression in channels.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="proxy_subscribe">proxy_subscribe<a href="#proxy_subscribe" class="hash-link" aria-label="Direct link to proxy_subscribe" title="Direct link to proxy_subscribe">​</a></h3>
<p><code>proxy_subscribe</code> (boolean, default <code>false</code>) – turns on subscribe proxy, more info in <a href="/docs/server/proxy">proxy chapter</a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="proxy_publish">proxy_publish<a href="#proxy_publish" class="hash-link" aria-label="Direct link to proxy_publish" title="Direct link to proxy_publish">​</a></h3>
<p><code>proxy_publish</code> (boolean, default <code>false</code>) – turns on publish proxy, more info in <a href="/docs/server/proxy">proxy chapter</a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="proxy_sub_refresh">proxy_sub_refresh<a href="#proxy_sub_refresh" class="hash-link" aria-label="Direct link to proxy_sub_refresh" title="Direct link to proxy_sub_refresh">​</a></h3>
<p><code>proxy_sub_refresh</code> (boolean, default <code>false</code>) – turns on sub refresh proxy, more info in <a href="/docs/server/proxy">proxy chapter</a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="proxy_subscribe_stream">proxy_subscribe_stream<a href="#proxy_subscribe_stream" class="hash-link" aria-label="Direct link to proxy_subscribe_stream" title="Direct link to proxy_subscribe_stream">​</a></h3>
<p><code>proxy_subscribe_stream</code> (boolean, default <code>false</code>) - turns on subscribe stream proxy, see <a href="/docs/server/proxy_streams">subscription streams</a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subscribe_proxy_name">subscribe_proxy_name<a href="#subscribe_proxy_name" class="hash-link" aria-label="Direct link to subscribe_proxy_name" title="Direct link to subscribe_proxy_name">​</a></h3>
<p><code>subscribe_proxy_name</code> (string, default <code>&quot;&quot;</code>) – turns on subscribe proxy when <a href="/docs/server/proxy#granular-proxy-mode">granular proxy mode</a> is used. Note that <code>proxy_subscribe</code> option defined above is ignored in granular proxy mode.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="publish_proxy_name">publish_proxy_name<a href="#publish_proxy_name" class="hash-link" aria-label="Direct link to publish_proxy_name" title="Direct link to publish_proxy_name">​</a></h3>
<p><code>publish_proxy_name</code> (string, default <code>&quot;&quot;</code>) – turns on publish proxy when <a href="/docs/server/proxy#granular-proxy-mode">granular proxy mode</a> is used. Note that <code>proxy_publish</code> option defined above is ignored in granular proxy mode.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sub_refresh_proxy_name">sub_refresh_proxy_name<a href="#sub_refresh_proxy_name" class="hash-link" aria-label="Direct link to sub_refresh_proxy_name" title="Direct link to sub_refresh_proxy_name">​</a></h3>
<p><code>sub_refresh_proxy_name</code> (string, default <code>&quot;&quot;</code>) – turns on sub refresh proxy when <a href="/docs/server/proxy#granular-proxy-mode">granular proxy mode</a> is used. Note that <code>proxy_sub_refresh</code> option defined above is ignored in granular proxy mode.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subscribe_stream_proxy_name">subscribe_stream_proxy_name<a href="#subscribe_stream_proxy_name" class="hash-link" aria-label="Direct link to subscribe_stream_proxy_name" title="Direct link to subscribe_stream_proxy_name">​</a></h3>
<p><code>subscribe_stream_proxy_name</code> (string, default <code>&quot;&quot;</code>) – turns on subscribe stream proxy when <a href="/docs/server/proxy_streams#granular-proxy-mode">granular proxy mode</a> is used. Note that <code>proxy_subscribe_stream</code> option defined above is ignored in granular proxy mode.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cache_empty_proxy_name">cache_empty_proxy_name<a href="#cache_empty_proxy_name" class="hash-link" aria-label="Direct link to cache_empty_proxy_name" title="Direct link to cache_empty_proxy_name">​</a></h3>
<p><code>cache_empty_proxy_name</code> (string, default <code>&quot;&quot;</code>, Centrifugo PRO only) – turns on <a href="/docs/pro/channel_cache_empty">cache empty proxy</a> when <a href="/docs/server/proxy_streams#granular-proxy-mode">granular proxy mode</a> is used. Note that <code>proxy_cache_empty</code> option is ignored in granular proxy mode.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="proxy_cache_empty">proxy_cache_empty<a href="#proxy_cache_empty" class="hash-link" aria-label="Direct link to proxy_cache_empty" title="Direct link to proxy_cache_empty">​</a></h3>
<p><code>proxy_cache_empty</code> (boolean, default <code>false</code>, Centrifugo PRO only) - turns on cache empty proxy, see <a href="/docs/pro/channel_cache_empty">more details</a> in Centrifugo PRO docs.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="shared_position_sync">shared_position_sync<a href="#shared_position_sync" class="hash-link" aria-label="Direct link to shared_position_sync" title="Direct link to shared_position_sync">​</a></h3>
<p><code>shared_position_sync</code> (boolean, default <code>false</code>, Centrifugo PRO only) - can help reducing the number of position synchronization requests from Centrifugo to Broker&#x27;s history API, see <a href="/docs/pro/engine_optimizations#shared-position-sync">more details</a> in Centrifugo PRO docs.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel_state_events">channel_state_events<a href="#channel_state_events" class="hash-link" aria-label="Direct link to channel_state_events" title="Direct link to channel_state_events">​</a></h3>
<p><code>channel_state_events</code> (array of strings, empty by default, Centrifugo PRO only) - can help configuring notifications about channel&#x27;s <code>occupied</code> and <code>vacated</code> state. See <a href="/docs/pro/channel_state_events">more details</a> in Centrifugo PRO docs.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subscribe_cel">subscribe_cel<a href="#subscribe_cel" class="hash-link" aria-label="Direct link to subscribe_cel" title="Direct link to subscribe_cel">​</a></h3>
<p><code>subscribe_cel</code> (string, default <code>&quot;&quot;</code>, Centrifugo PRO only) – CEL expression for subscribe permission, see more details in <a href="/docs/pro/cel_expressions">Channel CEL expressions</a> of Centrifugo PRO.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="publish_cel">publish_cel<a href="#publish_cel" class="hash-link" aria-label="Direct link to publish_cel" title="Direct link to publish_cel">​</a></h3>
<p><code>publish_cel</code> (string, default <code>&quot;&quot;</code>, Centrifugo PRO only) – CEL expression for publish permission, see more details in <a href="/docs/pro/cel_expressions">Channel CEL expressions</a> of Centrifugo PRO.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="history_cel">history_cel<a href="#history_cel" class="hash-link" aria-label="Direct link to history_cel" title="Direct link to history_cel">​</a></h3>
<p><code>history_cel</code> (string, default <code>&quot;&quot;</code>, Centrifugo PRO only) – CEL expression for history permission, see more details in <a href="/docs/pro/cel_expressions">Channel CEL expressions</a> of Centrifugo PRO.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="presence_cel">presence_cel<a href="#presence_cel" class="hash-link" aria-label="Direct link to presence_cel" title="Direct link to presence_cel">​</a></h3>
<p><code>presence_cel</code> (string, default <code>&quot;&quot;</code>, Centrifugo PRO only) – CEL expression for presence permission, see more details in <a href="/docs/pro/cel_expressions">Channel CEL expressions</a> of Centrifugo PRO.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="channel-config-examples">Channel config examples<a href="#channel-config-examples" class="hash-link" aria-label="Direct link to Channel config examples" title="Direct link to Channel config examples">​</a></h2>
<p>Let&#x27;s look at how to set some of these options in a config. In this example we turning on presence, history features, forcing publication recovery. Also allowing all client connections (including anonymous users) to subscribe to channels and call publish, history, presence APIs if subscribed.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">config.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;token_hmac_secret_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-secret-key&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;api_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;secret-api-key&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;presence&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;history_size&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;history_ttl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;300s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;force_recovery&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_subscribe_for_client&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_subscribe_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_publish_for_subscriber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_publish_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_history_for_subscriber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_history_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_presence_for_subscriber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;allow_presence_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we set channel options on config top-level – these options will affect channels without namespace. In many cases defining namespaces is a recommended approach so you can manage options for every real-time feature separately. With namespaces the above config may transform to:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">config.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;token_hmac_secret_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-secret-key&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;api_key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;secret-api-key&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;namespaces&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;feed&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;presence&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;history_size&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;history_ttl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;300s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;force_recovery&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_subscribe_for_client&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_subscribe_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_publish_for_subscriber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_publish_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_history_for_subscriber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_history_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_presence_for_subscriber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allow_presence_for_anonymous&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case channels should be prefixed with <code>feed:</code> to follow the behavior configured for a <code>feed</code> namespace.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/centrifugal/centrifugal.dev/edit/main/docs/server/channels.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/server/authentication"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Client JWT authentication</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/server/channel_permissions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Channel permission model</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-channel" class="table-of-contents__link toc-highlight">What is a channel?</a></li><li><a href="#channel-name-rules" class="table-of-contents__link toc-highlight">Channel name rules</a><ul><li><a href="#namespace-boundary-" class="table-of-contents__link toc-highlight">namespace boundary (<code>:</code>)</a></li><li><a href="#user-channel-boundary-" class="table-of-contents__link toc-highlight">user channel boundary (<code>#</code>)</a></li><li><a href="#private-channel-prefix-" class="table-of-contents__link toc-highlight">private channel prefix (<code>$</code>)</a></li><li><a href="#channel-is-just-a-string" class="table-of-contents__link toc-highlight">Channel is just a string</a></li></ul></li><li><a href="#channel-namespaces" class="table-of-contents__link toc-highlight">Channel namespaces</a></li><li><a href="#channel-options" class="table-of-contents__link toc-highlight">Channel options</a><ul><li><a href="#presence" class="table-of-contents__link toc-highlight">presence</a></li><li><a href="#join_leave" class="table-of-contents__link toc-highlight">join_leave</a></li><li><a href="#force_push_join_leave" class="table-of-contents__link toc-highlight">force_push_join_leave</a></li><li><a href="#history_size" class="table-of-contents__link toc-highlight">history_size</a></li><li><a href="#history_ttl" class="table-of-contents__link toc-highlight">history_ttl</a></li><li><a href="#history_meta_ttl" class="table-of-contents__link toc-highlight">history_meta_ttl</a></li><li><a href="#force_positioning" class="table-of-contents__link toc-highlight">force_positioning</a></li><li><a href="#force_recovery" class="table-of-contents__link toc-highlight">force_recovery</a></li><li><a href="#force_recovery_mode" class="table-of-contents__link toc-highlight">force_recovery_mode</a></li><li><a href="#allow_subscribe_for_client" class="table-of-contents__link toc-highlight">allow_subscribe_for_client</a></li><li><a href="#allow_subscribe_for_anonymous" class="table-of-contents__link toc-highlight">allow_subscribe_for_anonymous</a></li><li><a href="#allow_publish_for_subscriber" class="table-of-contents__link toc-highlight">allow_publish_for_subscriber</a></li><li><a href="#allow_publish_for_client" class="table-of-contents__link toc-highlight">allow_publish_for_client</a></li><li><a href="#allow_publish_for_anonymous" class="table-of-contents__link toc-highlight">allow_publish_for_anonymous</a></li><li><a href="#allow_history_for_subscriber" class="table-of-contents__link toc-highlight">allow_history_for_subscriber</a></li><li><a href="#allow_history_for_client" class="table-of-contents__link toc-highlight">allow_history_for_client</a></li><li><a href="#allow_history_for_anonymous" class="table-of-contents__link toc-highlight">allow_history_for_anonymous</a></li><li><a href="#allow_presence_for_subscriber" class="table-of-contents__link toc-highlight">allow_presence_for_subscriber</a></li><li><a href="#allow_presence_for_client" class="table-of-contents__link toc-highlight">allow_presence_for_client</a></li><li><a href="#allow_presence_for_anonymous" class="table-of-contents__link toc-highlight">allow_presence_for_anonymous</a></li><li><a href="#allow_user_limited_channels" class="table-of-contents__link toc-highlight">allow_user_limited_channels</a></li><li><a href="#channel_regex" class="table-of-contents__link toc-highlight">channel_regex</a></li><li><a href="#delta_publish" class="table-of-contents__link toc-highlight">delta_publish</a></li><li><a href="#allowed_delta_types" class="table-of-contents__link toc-highlight">allowed_delta_types</a></li><li><a href="#proxy_subscribe" class="table-of-contents__link toc-highlight">proxy_subscribe</a></li><li><a href="#proxy_publish" class="table-of-contents__link toc-highlight">proxy_publish</a></li><li><a href="#proxy_sub_refresh" class="table-of-contents__link toc-highlight">proxy_sub_refresh</a></li><li><a href="#proxy_subscribe_stream" class="table-of-contents__link toc-highlight">proxy_subscribe_stream</a></li><li><a href="#subscribe_proxy_name" class="table-of-contents__link toc-highlight">subscribe_proxy_name</a></li><li><a href="#publish_proxy_name" class="table-of-contents__link toc-highlight">publish_proxy_name</a></li><li><a href="#sub_refresh_proxy_name" class="table-of-contents__link toc-highlight">sub_refresh_proxy_name</a></li><li><a href="#subscribe_stream_proxy_name" class="table-of-contents__link toc-highlight">subscribe_stream_proxy_name</a></li><li><a href="#cache_empty_proxy_name" class="table-of-contents__link toc-highlight">cache_empty_proxy_name</a></li><li><a href="#proxy_cache_empty" class="table-of-contents__link toc-highlight">proxy_cache_empty</a></li><li><a href="#shared_position_sync" class="table-of-contents__link toc-highlight">shared_position_sync</a></li><li><a href="#channel_state_events" class="table-of-contents__link toc-highlight">channel_state_events</a></li><li><a href="#subscribe_cel" class="table-of-contents__link toc-highlight">subscribe_cel</a></li><li><a href="#publish_cel" class="table-of-contents__link toc-highlight">publish_cel</a></li><li><a href="#history_cel" class="table-of-contents__link toc-highlight">history_cel</a></li><li><a href="#presence_cel" class="table-of-contents__link toc-highlight">presence_cel</a></li></ul></li><li><a href="#channel-config-examples" class="table-of-contents__link toc-highlight">Channel config examples</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contact us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hello@centrifugal.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Send e-mail</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/joinchat/U57MI8Lam9mhpuhd" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/tYgADKx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/centrifugalabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/attributions">Attributions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Centrifugal Labs LTD</div></div></div></footer></div>
</body>
</html>
"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[242],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},32256:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"transports/overview","title":"Real-time transports","description":"Centrifugo supports a variety of transports to deliver real-time messages to clients.","source":"@site/docs/transports/overview.md","sourceDirName":"transports","slug":"/transports/overview","permalink":"/docs/transports/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/centrifugal/centrifugal.dev/edit/main/docs/transports/overview.md","tags":[],"version":"current","frontMatter":{"id":"overview","title":"Real-time transports"},"sidebar":"Transports","next":{"title":"Client SDK specification","permalink":"/docs/transports/client_api"}}');var r=t(74848),s=t(28453);const o={id:"overview",title:"Real-time transports"},a=void 0,c={},l=[{value:"Bidirectional",id:"bidirectional",level:2},{value:"Unidirectional",id:"unidirectional",level:2},{value:"PING/PONG behavior",id:"pingpong-behavior",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Centrifugo supports a variety of transports to deliver real-time messages to clients."}),"\n",(0,r.jsx)(n.admonition,{title:"Every transport is a persistent connection",type:"info",children:(0,r.jsx)(n.p,{children:"Here we describe supported transports between your application frontend and Centrifugo. Every Centrifugo real-time transport is a persistent connection so the server can push data towards clients at any moment."})}),"\n",(0,r.jsx)(n.p,{children:"The important distinction here is that all supported transports belong to one of two possible groups:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#bidirectional",children:"Bidirectional"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#unidirectional",children:"Unidirectional"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"bidirectional",children:"Bidirectional"}),"\n",(0,r.jsx)(n.p,{children:"Bidirectional transports are capable to serve all Centrifugo features. These transports are the main Centrifugo focus and where Centrifugo really shines."}),"\n",(0,r.jsxs)(n.p,{children:["Bidirectional transports come with the requirement that developers use a special client connector library (real-time SDK) that communicates with Centrifugo over custom ",(0,r.jsx)(n.a,{href:"/docs/transports/client_protocol",children:"client protocol"}),". This is necessary because bidirectional connections are asynchronous, meaning requests must be matched to their corresponding responses, connection state must be properly managed, and request queueing, timeouts, and errors must be handled. Additionally, the SDK is needed to multiplex subscriptions to different channels over a single connection. Bidirectional SDKs allow binary communication with Centrifugo (using Protobuf protocol)."]}),"\n",(0,r.jsxs)(n.p,{children:["Centrifugo has several official ",(0,r.jsx)(n.a,{href:"/docs/transports/client_sdk",children:"client real-time SDKs"})," for popular environments. All of them work over ",(0,r.jsx)(n.a,{href:"/docs/transports/websocket",children:"WebSocket"})," transport. Our Javascript SDK also offers bidirectional fallbacks over ",(0,r.jsx)(n.a,{href:"/docs/transports/http_stream",children:"HTTP-Streaming"}),", ",(0,r.jsx)(n.a,{href:"/docs/transports/sse",children:"Server-Sent Events (SSE)"}),", and has an experimental support for ",(0,r.jsx)(n.a,{href:"/docs/transports/webtransport",children:"WebTransport"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"unidirectional",children:"Unidirectional"}),"\n",(0,r.jsx)(n.p,{children:"Unidirectional transports suit well for use cases without dynamic subscriptions, where channels to subscribe are known at connection time."}),"\n",(0,r.jsxs)(n.p,{children:["The main advantage is that unidirectional transports do not require special client connectors. Developers can use native browser APIs, such as ",(0,r.jsx)(n.a,{href:"/docs/transports/uni_websocket",children:"WebSocket"}),", ",(0,r.jsx)(n.a,{href:"/docs/transports/uni_sse",children:"Server-Sent Events (SSE)"}),", or ",(0,r.jsx)(n.a,{href:"/docs/transports/uni_http_stream",children:"HTTP-streaming"}),"), as well as ",(0,r.jsx)(n.a,{href:"/docs/transports/uni_grpc",children:"gRPC"})," to receive real-time updates from Centrifugo. This eliminates the need for a client connector that abstracts bidirectional communication."]}),"\n",(0,r.jsx)(n.p,{children:"However, the tradeoff is that with unidirectional transports, you won't get some of Centrifugo's advanced features implemented in bidirectional SDKs, such as dynamic subscriptions/unsubscriptions, automatic message recovery on reconnect, ability to send RPC to the backend over a persistent real-time connection."}),"\n",(0,r.jsx)(n.p,{children:"At this point, unidirectional transports only support JSON format for communication."}),"\n",(0,r.jsxs)(n.p,{children:["Learn more about ",(0,r.jsx)(n.a,{href:"/docs/transports/uni_client_protocol",children:"unidirectional protocol"})," and available unidirectional transports."]}),"\n",(0,r.jsx)(n.h2,{id:"pingpong-behavior",children:"PING/PONG behavior"}),"\n",(0,r.jsx)(n.p,{children:"Centrifugo server periodically sends pings to clients and expects pong from clients that works over bidirectional transports. Sending ping and receiving pong allows to find broken connections faster. Centrifugo sends pings on the Centrifugo client protocol level, thus it's possible for clients to handle ping messages on the client side to make sure connection is not broken (our bidirectional SDKs do this automatically)."}),"\n",(0,r.jsx)(n.p,{children:"Here is a scheme how ping/pong works in bidirectional and unidirectional client scenarios:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(95076).A+"",width:"2396",height:"1435"})}),"\n",(0,r.jsxs)(n.p,{children:["By default, Centrifugo sends pings every 25 seconds. This may be changed using ",(0,r.jsx)(n.code,{children:"client.ping_interval"})," option (",(0,r.jsx)(n.a,{href:"/docs/server/configuration#setting-time-duration-options",children:"duration"}),", default ",(0,r.jsx)(n.code,{children:'"25s"'}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["Centrifugo expects pong message from bidirectional client SDK after sending ping to it. By default, it waits no more than 8 seconds before closing a connection. This may be changed using ",(0,r.jsx)(n.code,{children:"client.pong_timeout"})," option (",(0,r.jsx)(n.a,{href:"/docs/server/configuration#setting-time-duration-options",children:"duration"}),", default ",(0,r.jsx)(n.code,{children:'"8s"'}),")."]}),"\n",(0,r.jsx)(n.p,{children:"In most cases default ping/pong intervals are fine so you don't really need to tweak them. Reducing timeouts may help you find non-gracefully closed connections faster, but will increase network traffic and CPU resource usage since ping/pongs are sent faster."}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["When overriding default values make sure that ",(0,r.jsx)(n.code,{children:"client.ping_interval"})," is greater than ",(0,r.jsx)(n.code,{children:"client.pong_timeout"})," \u2013 this is required by the current server implementation."]})}),"\n",(0,r.jsx)(n.p,{children:"Example of configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="config.json"',children:'{\n  "client": {\n    "ping_interval": "25s",\n    "pong_timeout": "8s"\n  }   \n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},95076:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ping_pong-4f67ec945077864d9accb516406fb6d0.png"}}]);
"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[3225],{9521:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"getting-started/installation","title":"Install Centrifugo","description":"Centrifugo server is written in Go language. It\'s an open-source software, the source code is available on Github.","source":"@site/versioned_docs/version-4/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/docs/4/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/centrifugal/centrifugal.dev/edit/main/versioned_docs/version-4/getting-started/installation.md","tags":[],"version":"4","frontMatter":{"id":"installation","title":"Install Centrifugo"},"sidebar":"Introduction","previous":{"title":"Join community","permalink":"/docs/4/getting-started/community"},"next":{"title":"Quickstart tutorial","permalink":"/docs/4/getting-started/quickstart"}}');var t=i(74848),o=i(28453);const s={id:"installation",title:"Install Centrifugo"},c=void 0,l={},a=[{value:"Install from the binary release",id:"install-from-the-binary-release",level:2},{value:"Docker image",id:"docker-image",level:2},{value:"Docker-compose example",id:"docker-compose-example",level:2},{value:"Kubernetes Helm chart",id:"kubernetes-helm-chart",level:2},{value:"RPM and DEB packages for Linux",id:"rpm-and-deb-packages-for-linux",level:2},{value:"With brew on macOS",id:"with-brew-on-macos",level:2},{value:"Build from source",id:"build-from-source",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Centrifugo server is written in Go language. It's an open-source software, the source code is available ",(0,t.jsx)(n.a,{href:"https://github.com/centrifugal/centrifugo",children:"on Github"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"install-from-the-binary-release",children:"Install from the binary release"}),"\n",(0,t.jsx)(n.p,{children:"For a local development you can download prebuilt Centrifugo binary release (i.e. single all-contained executable file) for your system."}),"\n",(0,t.jsxs)(n.p,{children:["Binary releases available on Github. ",(0,t.jsx)(n.a,{href:"https://github.com/centrifugal/centrifugo/releases",children:"Download latest release"})," for your operating system, unpack it and you are done. Centrifugo is pre-built for:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Linux 64-bit (linux_amd64)"}),"\n",(0,t.jsx)(n.li,{children:"Linux 32-bit (linux_386)"}),"\n",(0,t.jsx)(n.li,{children:"Linux ARM 64-bit (linux_arm64)"}),"\n",(0,t.jsx)(n.li,{children:"MacOS (darwin_amd64)"}),"\n",(0,t.jsx)(n.li,{children:"MacOS on Apple Silicon (darwin_arm64)"}),"\n",(0,t.jsx)(n.li,{children:"Windows (windows_amd64)"}),"\n",(0,t.jsx)(n.li,{children:"FreeBSD (freebsd_amd64)"}),"\n",(0,t.jsx)(n.li,{children:"ARM v6 (linux_armv6)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Archives contain a single statically compiled binary ",(0,t.jsx)(n.code,{children:"centrifugo"})," file that is ready to run:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./centrifugo\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If you doubt which distribution you need, then on Linux or MacOS you can use the following command to download and unpack ",(0,t.jsx)(n.code,{children:"centrifugo"})," binary to your current working directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"curl -sSLf https://centrifugal.dev/install.sh | sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"See the version of Centrifugo:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./centrifugo version\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Centrifugo requires a configuration file with several secret keys. If you are new to Centrifugo then there is ",(0,t.jsx)(n.code,{children:"genconfig"})," command which generates a minimal configuration file to get started:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./centrifugo genconfig\n"})}),"\n",(0,t.jsxs)(n.p,{children:["It creates a configuration file ",(0,t.jsx)(n.code,{children:"config.json"})," with some auto-generated option values in a current directory (by default)."]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["It's possible to generate file in YAML or TOML format, i.e. ",(0,t.jsx)(n.code,{children:"./centrifugo genconfig -c config.toml"})]})}),"\n",(0,t.jsx)(n.p,{children:"Having a configuration file you can finally run Centrifugo instance:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./centrifugo --config=config.json\n"})}),"\n",(0,t.jsx)(n.p,{children:"We will talk about a configuration in detail in the next sections."}),"\n",(0,t.jsxs)(n.p,{children:["You can also put or symlink ",(0,t.jsx)(n.code,{children:"centrifugo"})," into your ",(0,t.jsx)(n.code,{children:"bin"})," OS directory and run it from anywhere:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"centrifugo --config=config.json\n"})}),"\n",(0,t.jsx)(n.h2,{id:"docker-image",children:"Docker image"}),"\n",(0,t.jsxs)(n.p,{children:["Centrifugo server has a docker image ",(0,t.jsx)(n.a,{href:"https://hub.docker.com/r/centrifugo/centrifugo/",children:"available on Docker Hub"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker pull centrifugo/centrifugo\n"})}),"\n",(0,t.jsx)(n.p,{children:"Run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --ulimit nofile=262144:262144 -v /host/dir/with/config/file:/centrifugo -p 8000:8000 centrifugo/centrifugo centrifugo -c config.json\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note that docker allows setting ",(0,t.jsx)(n.code,{children:"nofile"})," limits in command-line arguments which is pretty important to handle lots of simultaneous persistent connections and not run out of open file limit (each connection requires one file descriptor). See also ",(0,t.jsx)(n.a,{href:"/docs/4/server/infra_tuning",children:"infrastructure tuning chapter"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["Pin to the exact Docker Image tag in production, for example: ",(0,t.jsx)(n.code,{children:"centrifugo/centrifugo:v4.0.0"}),", this will help to avoid unexpected problems during re-deploy process."]})}),"\n",(0,t.jsx)(n.h2,{id:"docker-compose-example",children:"Docker-compose example"}),"\n",(0,t.jsxs)(n.p,{children:["Create configuration file ",(0,t.jsx)(n.code,{children:"config.json"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "token_hmac_secret_key": "my_secret",\n  "api_key": "my_api_key",\n  "admin_password": "password",\n  "admin_secret": "secret",\n  "admin": true\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:'version: "3.9"\nservices:\n  centrifugo:\n    container_name: centrifugo\n    image: centrifugo/centrifugo:v4\n    volumes:\n      - ./config.json:/centrifugo/config.json\n    command: centrifugo -c config.json\n    ports:\n      - 8000:8000\n    ulimits:\n      nofile:\n        soft: 65535\n        hard: 65535\n'})}),"\n",(0,t.jsx)(n.p,{children:"Run with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker-compose up\n"})}),"\n",(0,t.jsx)(n.h2,{id:"kubernetes-helm-chart",children:"Kubernetes Helm chart"}),"\n",(0,t.jsxs)(n.p,{children:["See our ",(0,t.jsx)(n.a,{href:"https://github.com/centrifugal/helm-charts",children:"official Kubernetes Helm chart"}),". Follow instructions in a Centrifugo chart README to bootstrap Centrifugo inside your Kubernetes cluster."]}),"\n",(0,t.jsx)(n.h2,{id:"rpm-and-deb-packages-for-linux",children:"RPM and DEB packages for Linux"}),"\n",(0,t.jsxs)(n.p,{children:["Every time we make a new Centrifugo release we upload rpm and deb packages for popular Linux distributions on ",(0,t.jsx)(n.a,{href:"https://packagecloud.io/FZambia/centrifugo",children:"packagecloud.io"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"At moment, we support versions of the following distributions:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"64-bit Debian 8 Jessie"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Debian 9 Stretch"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Debian 10 Buster"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Debian 11 Bullseye"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Ubuntu 16.04 Xenial"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Ubuntu 18.04 Bionic"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Ubuntu 20.04 Focal Fossa"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Centos 7"}),"\n",(0,t.jsx)(n.li,{children:"64-bit Centos 8"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"https://packagecloud.io/FZambia/centrifugo",children:"full list of available packages"})," and ",(0,t.jsx)(n.a,{href:"https://packagecloud.io/FZambia/centrifugo/install",children:"installation instructions"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Centrifugo also works on 32-bit architecture, but we don't support packaging for it since 64-bit is more convenient for servers today."}),"\n",(0,t.jsx)(n.h2,{id:"with-brew-on-macos",children:"With brew on macOS"}),"\n",(0,t.jsxs)(n.p,{children:["If you are developing on macOS then you can install Centrifugo over ",(0,t.jsx)(n.code,{children:"brew"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"brew tap centrifugal/centrifugo\nbrew install centrifugo\n"})}),"\n",(0,t.jsx)(n.h2,{id:"build-from-source",children:"Build from source"}),"\n",(0,t.jsx)(n.p,{children:"You need Go language installed:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"git clone https://github.com/centrifugal/centrifugo.git\ncd centrifugo\ngo build\n./centrifugo\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>c});var r=i(96540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);
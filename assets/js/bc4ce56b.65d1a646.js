"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[3264],{21135:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>y,frontMatter:()=>p,metadata:()=>s,toc:()=>m});const s=JSON.parse('{"id":"getting-started/migration_v6","title":"Migrating to v6","description":"In this chapter we help to migrate from Centrifugo v5 to Centrifugo v6.","source":"@site/docs/getting-started/migration-v6.md","sourceDirName":"getting-started","slug":"/getting-started/migration_v6","permalink":"/docs/getting-started/migration_v6","draft":false,"unlisted":false,"editUrl":"https://github.com/centrifugal/centrifugal.dev/edit/main/docs/getting-started/migration-v6.md","tags":[],"version":"current","frontMatter":{"id":"migration_v6","title":"Migrating to v6"},"sidebar":"Introduction","previous":{"title":"Comparing with others","permalink":"/docs/getting-started/comparisons"}}');var _=n(74848),i=n(28453),r=n(96540);const a={redis_address:"engine.redis.address",redis_prefix:"engine.redis.prefix",redis_connect_timeout:"engine.redis.connect_timeout",redis_io_timeout:"engine.redis.io_timeout",redis_use_lists:"engine.redis.history_use_lists",redis_db:"engine.redis.db",redis_user:"engine.redis.user",redis_password:"engine.redis.password",redis_client_name:"engine.redis.client_name",redis_force_resp2:"engine.redis.force_resp2",redis_cluster_address:"engine.redis.cluster_address",redis_sentinel_address:"engine.redis.sentinel_address",redis_sentinel_user:"engine.redis.sentinel_user",redis_sentinel_password:"engine.redis.sentinel_password",redis_sentinel_master_name:"engine.redis.sentinel_master_name",redis_sentinel_client_name:"engine.redis.sentinel_client_name",redis_tls:"engine.redis.tls.enabled",redis_tls_key:"engine.redis.tls.key_pem",redis_tls_cert:"engine.redis.tls.cert_pem",redis_tls_cert_pem:"engine.redis.tls.cert_pem",redis_tls_key_pem:"engine.redis.tls.key_pem",redis_tls_root_ca:"engine.redis.tls.server_ca_pem",redis_tls_root_ca_pem:"engine.redis.tls.server_ca_pem",redis_tls_client_ca:"engine.redis.tls.client_ca_pem",redis_tls_client_ca_pem:"engine.redis.tls.client_ca_pem",redis_tls_server_name:"engine.redis.tls.server_name",redis_tls_insecure_skip_verify:"engine.redis.tls.insecure_skip_verify",redis_sentinel_tls:"engine.redis.sentinel_tls.enabled",redis_sentinel_tls_key:"engine.redis.sentinel_tls.key_pem",redis_sentinel_tls_cert:"engine.redis.sentinel_tls.cert_pem",redis_sentinel_tls_cert_pem:"engine.redis.sentinel_tls.cert_pem",redis_sentinel_tls_key_pem:"engine.redis.sentinel_tls.key_pem",redis_sentinel_tls_root_ca:"engine.redis.sentinel_tls.server_ca_pem",redis_sentinel_tls_root_ca_pem:"engine.redis.sentinel_tls.server_ca_pem",redis_sentinel_tls_client_ca:"engine.redis.sentinel_tls.client_ca_pem",redis_sentinel_tls_client_ca_pem:"engine.redis.sentinel_tls.client_ca_pem",redis_sentinel_tls_server_name:"engine.redis.sentinel_tls.server_name",redis_sentinel_tls_insecure_skip_verify:"engine.redis.sentinel_tls.insecure_skip_verify",name:"node.name",engine:"engine.type",pid_file:"pid_file",opentelemetry:"opentelemetry.enabled",opentelemetry_api:"opentelemetry.api",opentelemetry_consuming:"opentelemetry.consuming",client_insecure:"client.insecure",client_insecure_skip_token_signature_verify:"client.insecure_skip_token_signature_verify",api_insecure:"http_api.insecure",client_user_id_http_header:"client.user_id_http_header",token_hmac_secret_key:"client.token.hmac_secret_key",token_rsa_public_key:"client.token.rsa_public_key",token_ecdsa_public_key:"client.token.ecdsa_public_key",token_jwks_public_endpoint:"client.token.jwks_public_endpoint",token_audience:"client.token.audience",token_audience_regex:"client.token.audience_regex",token_issuer:"client.token.issuer",token_issuer_regex:"client.token.issuer_regex",token_user_id_claim:"client.token.user_id_claim",separate_subscription_token_config:"client.subscription_token.enabled",subscription_token_hmac_secret_key:"client.subscription_token.hmac_secret_key",subscription_token_rsa_public_key:"client.subscription_token.rsa_public_key",subscription_token_ecdsa_public_key:"client.subscription_token.ecdsa_public_key",subscription_token_jwks_public_endpoint:"client.subscription_token.jwks_public_endpoint",subscription_token_audience:"client.subscription_token.audience",subscription_token_audience_regex:"client.subscription_token.audience_regex",subscription_token_issuer:"client.subscription_token.issuer",subscription_token_issuer_regex:"client.subscription_token.issuer_regex",subscription_token_user_id_claim:"client.subscription_token.user_id_claim",allowed_origins:"client.allowed_origins",global_history_meta_ttl:"channel.history_meta_ttl",global_presence_ttl:"redis.presence_ttl",global_redis_presence_user_mapping:"redis.presence_user_mapping",redis_presence_hash_field_ttl:"redis.presence_hash_field_ttl",allowed_delta_types:"channel.without_namespace.allowed_delta_types",delta_publish:"channel.without_namespace.delta_publish",presence:"channel.without_namespace.presence",join_leave:"channel.without_namespace.join_leave",force_push_join_leave:"channel.without_namespace.force_push_join_leave",history_size:"channel.without_namespace.history_size",history_ttl:"channel.without_namespace.history_ttl",history_meta_ttl:"channel.without_namespace.history_meta_ttl",force_positioning:"channel.without_namespace.force_positioning",allow_positioning:"channel.without_namespace.allow_positioning",force_recovery:"channel.without_namespace.force_recovery",allow_recovery:"channel.without_namespace.allow_recovery",force_recovery_mode:"channel.without_namespace.force_recovery_mode",allow_subscribe_for_anonymous:"channel.without_namespace.allow_subscribe_for_anonymous",allow_subscribe_for_client:"channel.without_namespace.allow_subscribe_for_client",allow_publish_for_anonymous:"channel.without_namespace.allow_publish_for_anonymous",allow_publish_for_client:"channel.without_namespace.allow_publish_for_client",allow_publish_for_subscriber:"channel.without_namespace.allow_publish_for_subscriber",allow_presence_for_anonymous:"channel.without_namespace.allow_presence_for_anonymous",allow_presence_for_client:"channel.without_namespace.allow_presence_for_client",allow_presence_for_subscriber:"channel.without_namespace.allow_presence_for_subscriber",allow_history_for_anonymous:"channel.without_namespace.allow_history_for_anonymous",allow_history_for_client:"channel.without_namespace.allow_history_for_client",allow_history_for_subscriber:"channel.without_namespace.allow_history_for_subscriber",allow_user_limited_channels:"channel.without_namespace.allow_user_limited_channels",channel_regex:"channel.without_namespace.channel_regex",proxy_subscribe:"channel.without_namespace.subscribe_proxy_enabled",proxy_publish:"channel.without_namespace.publish_proxy_enabled",proxy_sub_refresh:"channel.without_namespace.sub_refresh_proxy_enabled",proxy_subscribe_stream:"channel.without_namespace.subscribe_stream_proxy_enabled",subscribe_proxy_name:"channel.without_namespace.subscribe_proxy_name",publish_proxy_name:"channel.without_namespace.publish_proxy_name",sub_refresh_proxy_name:"channel.without_namespace.sub_refresh_proxy_name",subscribe_stream_proxy_name:"channel.without_namespace.subscribe_stream_proxy_name",subscribe_cel:"channel.without_namespace.subscribe_cel",publish_cel:"channel.without_namespace.publish_cel",presence_cel:"channel.without_namespace.presence_cel",history_cel:"channel.without_namespace.history_cel",keep_latest_publication:"channel.without_namespace.keep_latest_publication",shared_position_sync:"channel.without_namespace.shared_position_sync",state_events:"channel.without_namespace.state_events",cache_empty_proxy_name:"channel.without_namespace.cache_empty_proxy_name",broker_name:"channel.without_namespace.broker_name",presence_manager_name:"channel.without_namespace.presence_manager_name",node_info_metrics_aggregate_interval:"node.info_metrics_aggregate_interval",allow_anonymous_connect_without_token:"client.allow_anonymous_connect_without_token",disallow_anonymous_connection_tokens:"client.disallow_anonymous_connection_tokens",client_expired_close_delay:"client.expired_close_delay",client_expired_sub_close_delay:"client.expired_sub_close_delay",client_stale_close_delay:"client.stale_close_delay",client_channel_limit:"client.channel_limit",client_queue_max_size:"client.queue_max_size",client_presence_update_interval:"client.presence_update_interval",client_user_connection_limit:"client.user_connection_limit",client_concurrency:"client.concurrency",client_channel_position_check_delay:"client.channel_position_check_delay",client_channel_position_max_time_lag:"client.channel_position_max_time_lag",client_connection_limit:"client.connection_limit",client_connection_rate_limit:"client.connection_rate_limit",client_connect_include_server_time:"client.connect_include_server_time","client_connect_code_to_unidirectional_disconnect.enabled":"client.connect_code_to_unidirectional_disconnect.enabled","client_connect_code_to_unidirectional_disconnect.transforms":"client.connect_code_to_unidirectional_disconnect.transforms",channel_max_length:"channel.max_length",channel_private_prefix:"channel.private_prefix",channel_namespace_boundary:"channel.namespace_boundary",channel_user_boundary:"channel.user_boundary",channel_user_separator:"channel.user_separator",rpc_namespace_boundary:"rpc.namespace_boundary",rpc_ping:"rpc.ping.enabled",rpc_ping_method:"rpc.ping.method",user_subscribe_to_personal:"client.subscribe_to_user_personal_channel.enabled",user_personal_channel_namespace:"client.subscribe_to_user_personal_channel.personal_channel_namespace",user_personal_single_connection:"client.subscribe_to_user_personal_channel.single_connection",debug:"debug.enabled",prometheus:"prometheus.enabled",health:"health.enabled",admin:"admin.enabled",admin_password:"admin.password",admin_secret:"admin.secret",admin_insecure:"admin.insecure",admin_web_path:"admin.web_path",admin_web_proxy_address:"admin.web_proxy_address",websocket_compression:"websocket.compression",websocket_compression_min_size:"websocket.compression_min_size",websocket_compression_level:"websocket.compression_level",websocket_read_buffer_size:"websocket.read_buffer_size",websocket_use_write_buffer_pool:"websocket.use_write_buffer_pool",websocket_write_buffer_size:"websocket.write_buffer_size",websocket_write_timeout:"websocket.write_timeout",websocket_message_size_limit:"websocket.message_size_limit",uni_websocket:"uni_websocket.enabled",uni_websocket_compression:"uni_websocket.compression",uni_websocket_compression_min_size:"uni_websocket.compression_min_size",uni_websocket_compression_level:"uni_websocket.compression_level",uni_websocket_read_buffer_size:"uni_websocket.read_buffer_size",uni_websocket_use_write_buffer_pool:"uni_websocket.use_write_buffer_pool",uni_websocket_write_buffer_size:"uni_websocket.write_buffer_size",uni_websocket_write_timeout:"uni_websocket.write_timeout",uni_websocket_message_size_limit:"uni_websocket.message_size_limit",uni_sse:"uni_sse.enabled",uni_http_stream:"uni_http_stream.enabled","uni_sse_connect_code_to_http_response.enabled":"uni_sse.connect_code_to_http_response.enabled","uni_sse_connect_code_to_http_response.transforms":"uni_sse.connect_code_to_http_response.transforms","uni_http_stream_connect_code_to_http_response.enabled":"uni_http_stream.connect_code_to_http_response.enabled","uni_http_stream_connect_code_to_http_response.transforms":"uni_http_stream.connect_code_to_http_response.transforms",log_level:"log.level",log_file:"log.file",tls:"http_server.tls.enabled",tls_key:"http_server.tls.key_pem",tls_cert:"http_server.tls.cert_pem",tls_cert_pem:"http_server.tls.cert_pem",tls_key_pem:"http_server.tls.key_pem",tls_root_ca:"http_server.tls.server_ca_pem",tls_root_ca_pem:"http_server.tls.server_ca_pem",tls_client_ca:"http_server.tls.client_ca_pem",tls_client_ca_pem:"http_server.tls.client_ca_pem",tls_server_name:"tls.server_name",tls_insecure_skip_verify:"tls.insecure_skip_verify",swagger:"swagger.enabled",admin_external:"admin.external",api_external:"http_api.external",address:"http_server.address",port:"http_server.port",internal_address:"http_server.internal_address",internal_port:"http_server.internal_port",tls_external:"http_server.tls_external",webtransport:"webtransport.enabled",http3:"http_server.http3.enabled",proxy_connect_endpoint:"client.proxy.connect.endpoint",proxy_refresh_endpoint:"client.proxy.refresh.endpoint",proxy_subscribe_endpoint:"channel.proxy.subscribe.endpoint",proxy_publish_endpoint:"channel.proxy.publish.endpoint",proxy_sub_refresh_endpoint:"channel.proxy.sub_refresh.endpoint",proxy_subscribe_stream_endpoint:"channel.proxy.subscribe_stream.endpoint",proxy_rpc_endpoint:"rpc.proxy.endpoint",proxy_connect_timeout:"client.proxy.connect.timeout",proxy_refresh_timeout:"client.proxy.refresh.timeout",proxy_subscribe_timeout:"channel.proxy.subscribe.timeout",proxy_publish_timeout:"channel.proxy.publish.timeout",proxy_sub_refresh_timeout:"channel.proxy.sub_refresh.timeout",proxy_subscribe_stream_timeout:"channel.proxy.subscribe_stream.timeout",proxy_rpc_timeout:"rpc.proxy.timeout",proxy_state_endpoint:"channel.proxy.state.endpoint",proxy_state_timeout:"channel.proxy.state.timeout",proxy_cache_empty_endpoint:"channel.proxy.cache_empty.endpoint",proxy_cache_empty_timeout:"channel.proxy.cache_empty.timeout",api_key:"http_api.key",api_error_mode:"http_api.error_mode",uni_http_stream_max_request_body_size:"uni_http_stream.max_request_body_size",uni_sse_max_request_body_size:"uni_sse.max_request_body_size",http_stream_max_request_body_size:"http_stream.max_request_body_size",sse_max_request_body_size:"sse.max_request_body_size",tls_autocert:"tls_autocert.enabled",tls_autocert_host_whitelist:"tls_autocert.host_whitelist",tls_autocert_cache_dir:"tls_autocert.cache_dir",tls_autocert_email:"tls_autocert.email",tls_autocert_server_name:"tls_autocert.server_name",tls_autocert_http:"tls_autocert.http",tls_autocert_http_addr:"tls_autocert.http_addr",grpc_api:"grpc_api.enabled",grpc_api_error_mode:"grpc_api.error_mode",grpc_api_address:"grpc_api.address",grpc_api_port:"grpc_api.port",grpc_api_key:"grpc_api.key",grpc_api_reflection:"grpc_api.reflection",grpc_api_tls:"grpc_api.tls.enabled",grpc_api_tls_key:"grpc_api.tls.key_pem",grpc_api_tls_cert:"grpc_api.tls.cert_pem",grpc_api_tls_cert_pem:"grpc_api.tls.cert_pem",grpc_api_tls_key_pem:"grpc_api.tls.key_pem",grpc_api_tls_root_ca:"grpc_api.tls.server_ca_pem",grpc_api_tls_root_ca_pem:"grpc_api.tls.server_ca_pem",grpc_api_tls_client_ca:"grpc_api.tls.client_ca_pem",grpc_api_tls_client_ca_pem:"grpc_api.tls.client_ca_pem",grpc_api_tls_server_name:"grpc_api.tls.server_name",grpc_api_tls_insecure_skip_verify:"grpc_api.tls.insecure_skip_verify",grpc_api_max_receive_message_size:"grpc_api.max_receive_message_size",shutdown_timeout:"shutdown.timeout",graphite:"graphite.enabled",graphite_host:"graphite.host",graphite_port:"graphite.port",graphite_prefix:"graphite.prefix",graphite_interval:"graphite.interval",graphite_tags:"graphite.tags",nats_prefix:"broker.nats.prefix",nats_url:"broker.nats.url",nats_dial_timeout:"broker.nats.dial_timeout",nats_write_timeout:"broker.nats.write_timeout",nats_allow_wildcards:"broker.nats.allow_wildcards","nats_raw_mode.enabled":"broker.nats.raw_mode.enabled","nats_raw_mode.channel_replacements":"broker.nats.raw_mode.channel_replacements","nats_raw_mode.prefix":"broker.nats.raw_mode.prefix",websocket_disable:"websocket.disabled",api_disable:"http_api.disabled",websocket_handler_prefix:"websocket.handler_prefix",webtransport_handler_prefix:"webtransport.handler_prefix",http_stream_handler_prefix:"http_stream.handler_prefix",sse_handler_prefix:"sse.handler_prefix",uni_websocket_handler_prefix:"uni_websocket.handler_prefix",uni_sse_handler_prefix:"uni_sse.handler_prefix",uni_http_stream_handler_prefix:"uni_http_stream.handler_prefix",uni_grpc:"uni_grpc.enabled",uni_grpc_address:"uni_grpc.address",uni_grpc_port:"uni_grpc.port",uni_grpc_max_receive_message_size:"uni_grpc.max_receive_message_size",uni_grpc_tls:"uni_grpc.tls.enabled",uni_grpc_tls_key:"uni_grpc.tls.key_pem",uni_grpc_tls_cert:"uni_grpc.tls.cert_pem",uni_grpc_tls_cert_pem:"uni_grpc.tls.cert_pem",uni_grpc_tls_key_pem:"uni_grpc.tls.key_pem",uni_grpc_tls_root_ca:"uni_grpc.tls.server_ca_pem",uni_grpc_tls_root_ca_pem:"uni_grpc.tls.server_ca_pem",uni_grpc_tls_client_ca:"uni_grpc.tls.client_ca_pem",uni_grpc_tls_client_ca_pem:"uni_grpc.tls.client_ca_pem",uni_grpc_tls_server_name:"uni_grpc.tls.server_name",uni_grpc_tls_insecure_skip_verify:"uni_grpc.tls.insecure_skip_verify",http_stream:"http_stream.enabled",sse:"sse.enabled",emulation_handler_prefix:"emulation.handler_prefix",emulation_max_request_body_size:"emulation.max_request_body_size",admin_handler_prefix:"admin.handler_prefix",api_handler_prefix:"http_api.handler_prefix",prometheus_handler_prefix:"prometheus.handler_prefix",health_handler_prefix:"health.handler_prefix",swagger_handler_prefix:"swagger.handler_prefix",client_history_max_publication_limit:"client.history_max_publication_limit",client_recovery_max_publication_limit:"client.recovery_max_publication_limit",usage_stats_disable:"usage_stats.disabled",ping_interval:"client.ping_interval",pong_timeout:"client.pong_timeout",namespaces:"channel.namespaces",rpc_namespaces:"rpc.namespaces",proxies:"proxies",enable_unreleased_features:"enable_unreleased_features",consumers:"consumers",license:"license","database.dsn":"database.postgresql.dsn","database.replica_dsn":"database.postgresql.replica_dsn",channel_patterns:"channel.patterns",use_singleflight:"singleflight.enabled",brokers:"brokers",presence_managers:"presence_managers",channel_namespace_for_transport_messages_sent:"prometheus.channel_namespace_for_transport_messages_sent",channel_namespace_for_transport_messages_received:"prometheus.channel_namespace_for_transport_messages_received",client_write_delay:"client.write_delay",client_reply_without_queue:"client.reply_without_queue",client_max_messages_in_frame:"client.max_messages_in_frame",client_queue_initial_cap:"client.queue_initial_cap","cache.enabled":"cache.enabled","cache.engine":"cache.storage_type","cache.use_redis_from_engine":"cache.redis.use_from_engine","cache.redis":"cache.redis","clickhouse_analytics.enabled":"clickhouse_analytics.enabled","clickhouse_analytics.clickhouse_dsn":"clickhouse_analytics.clickhouse_dsn","clickhouse_analytics.skip_ping_on_start":"clickhouse_analytics.skip_ping_on_start","clickhouse_analytics.skip_schema_initialization":"clickhouse_analytics.skip_schema_initialization","clickhouse_analytics.clickhouse_database":"clickhouse_analytics.clickhouse_database","clickhouse_analytics.clickhouse_cluster":"clickhouse_analytics.clickhouse_cluster","clickhouse_analytics.export_connections":"clickhouse_analytics.export.connections.enabled","clickhouse_analytics.export_subscriptions":"clickhouse_analytics.export.subscriptions.enabled","clickhouse_analytics.export_operations":"clickhouse_analytics.export.operations.enabled","clickhouse_analytics.export_publications":"clickhouse_analytics.export.publications.enabled","clickhouse_analytics.export_notifications":"clickhouse_analytics.export.notifications.enabled","clickhouse_analytics.export_http_headers":"clickhouse_analytics.export.connections.http_headers","clickhouse_analytics.export_grpc_metadata":"clickhouse_analytics.export.connections.grpc_metadata","clickhouse_analytics.connections_max_buffer_size":"clickhouse_analytics.export.connections.max_buffer_size","clickhouse_analytics.operations_max_buffer_size":"clickhouse_analytics.export.operations.max_buffer_size","clickhouse_analytics.publications_max_buffer_size":"clickhouse_analytics.export.publications.max_buffer_size","clickhouse_analytics.subscriptions_max_buffer_size":"clickhouse_analytics.export.subscriptions.max_buffer_size","clickhouse_analytics.notifications_max_buffer_size":"clickhouse_analytics.export.notifications.max_buffer_size","clickhouse_analytics.connections_flush_interval":"clickhouse_analytics.export.connections.flush_interval","clickhouse_analytics.operations_flush_interval":"clickhouse_analytics.export.operations.flush_interval","clickhouse_analytics.publications_flush_interval":"clickhouse_analytics.export.publications.flush_interval","clickhouse_analytics.subscriptions_flush_interval":"clickhouse_analytics.export.subscriptions.flush_interval","clickhouse_analytics.notifications_flush_interval":"clickhouse_analytics.export.notifications.flush_interval","clickhouse_analytics.connections_flush_size":"clickhouse_analytics.export.connections.flush_size","clickhouse_analytics.operations_flush_size":"clickhouse_analytics.export.operations.flush_size","clickhouse_analytics.publications_flush_size":"clickhouse_analytics.export.publications.flush_size","clickhouse_analytics.subscriptions_flush_size":"clickhouse_analytics.export.subscriptions.flush_size","clickhouse_analytics.notifications_flush_size":"clickhouse_analytics.export.notifications.flush_size","clickhouse_analytics.connections_ttl":"clickhouse_analytics.export.connections.ttl","clickhouse_analytics.operations_ttl":"clickhouse_analytics.export.operations.ttl","clickhouse_analytics.publications_ttl":"clickhouse_analytics.export.publications.ttl","clickhouse_analytics.subscriptions_ttl":"clickhouse_analytics.export.subscriptions.ttl","clickhouse_analytics.notifications_ttl":"clickhouse_analytics.export.notifications.ttl","user_tokens_invalidate.enabled":"user_tokens_invalidate.enabled","user_tokens_invalidate.persistence_engine":"user_tokens_invalidate.storage_type","user_tokens_invalidate.redis_address":"user_tokens_invalidate.redis.address","user_block.enabled":"user_block.enabled","user_block.persistence_engine":"user_block.storage_type","user_block.redis_address":"user_block.redis.address","token_revoke.enabled":"token_revoke.enabled","token_revoke.persistence_engine":"token_revoke.storage_type","token_revoke.redis_address":"token_revoke.redis.address","push_notifications.redis_address":"push_notifications.queue.redis.address","push_notifications.use_redis_from_engine":"push_notifications.use_redis_from_engine","push_notifications.enabled_providers":"push_notifications.enabled_providers","push_notifications.dry_run":"push_notifications.dry_run","push_notifications.dry_run_latency":"push_notifications.dry_run_latency","push_notifications.max_inactive_device_days":"push_notifications.max_inactive_device_days","push_notifications.fcm_credentials_file_path":"push_notifications.fcm.credentials_file","push_notifications.hms_app_id":"push_notifications.hms.app_id","push_notifications.hms_app_secret":"push_notifications.hms.app_secret","push_notifications.queue_engine":"push_notifications.queue.type","push_notifications.apns_endpoint":"push_notifications.apns.endpoint","push_notifications.apns_bundle_id":"push_notifications.apns.bundle_id","push_notifications.apns_token_auth_key_path":"push_notifications.apns.token_key_file","push_notifications.apns_token_auth_key_pem":"push_notifications.apns.token_key_pem","push_notifications.apns_token_key_id":"push_notifications.apns.token_key_id","push_notifications.apns_token_team_id":"push_notifications.apns.token_team_id","push_notifications.apns_cert_p12_path":"push_notifications.apns.cert_p12_file","push_notifications.apns_cert_p12_b64":"push_notifications.apns.cert_p12_b64","push_notifications.apns_cert_p12_password":"push_notifications.apns.cert_p12_password","push_notifications.enable_client_cancel_push":"push_notifications.enable_client_cancel_push","push_notifications.use_redis_legacy_reclaim":"push_notifications.use_redis_legacy_reclaim","push_notifications.fcm_tokens_batch_size":"push_notifications.fcm.tokens_batch_size","push_notifications.apns_tokens_batch_size":"push_notifications.apns.tokens_batch_size","push_notifications.hms_tokens_batch_size":"push_notifications.hms.tokens_batch_size","push_notifications.database_queue_prefix":"push_notifications.database_queue_prefix","push_notifications.read_from_replica":"push_notifications.read_from_replica","push_notifications.database_scheduler_consumer_concurrency":"push_notifications.database_scheduler_consumer_concurrency","push_notifications.database_fcm_consumer_concurrency":"push_notifications.fcm.database_consumer_concurrency","push_notifications.database_hms_consumer_concurrency":"push_notifications.hms.database_consumer_concurrency","push_notifications.database_apns_consumer_concurrency":"push_notifications.apns.database_consumer_concurrency","client_command_rate_limit.enabled":"client.rate_limit.client_command.enabled","client_command_rate_limit.total.buckets":"client.rate_limit.client_command.total.buckets","client_command_rate_limit.default.buckets":"client.rate_limit.client_command.default.buckets","client_command_rate_limit.connect.buckets":"client.rate_limit.client_command.connect.buckets","client_command_rate_limit.subscribe.buckets":"client.rate_limit.client_command.subscribe.buckets","client_command_rate_limit.publish.buckets":"client.rate_limit.client_command.publish.buckets","client_command_rate_limit.history.buckets":"client.rate_limit.client_command.history.buckets","client_command_rate_limit.presence.buckets":"client.rate_limit.client_command.presence.buckets","client_command_rate_limit.presence_stats.buckets":"client.rate_limit.client_command.presence_stats.buckets","client_command_rate_limit.refresh.buckets":"client.rate_limit.client_command.refresh.buckets","client_command_rate_limit.sub_refresh.buckets":"client.rate_limit.client_command.sub_refresh.buckets","client_command_rate_limit.rpc.buckets":"client.rate_limit.client_command.rpc.buckets","client_command_rate_limit.rpc.method_override":"client.rate_limit.client_command.rpc.method_override","user_command_rate_limit.enabled":"client.rate_limit.user_command.enabled","user_command_rate_limit.total.buckets":"client.rate_limit.user_command.total.buckets","user_command_rate_limit.default.buckets":"client.rate_limit.user_command.default.buckets","user_command_rate_limit.connect.buckets":"client.rate_limit.user_command.connect.buckets","user_command_rate_limit.subscribe.buckets":"client.rate_limit.user_command.subscribe.buckets","user_command_rate_limit.publish.buckets":"client.rate_limit.user_command.publish.buckets","user_command_rate_limit.history.buckets":"client.rate_limit.user_command.history.buckets","user_command_rate_limit.presence.buckets":"client.rate_limit.user_command.presence.buckets","user_command_rate_limit.presence_stats.buckets":"client.rate_limit.user_command.presence_stats.buckets","user_command_rate_limit.refresh.buckets":"client.rate_limit.user_command.refresh.buckets","user_command_rate_limit.sub_refresh.buckets":"client.rate_limit.user_command.sub_refresh.buckets","user_command_rate_limit.rpc.buckets":"client.rate_limit.user_command.rpc.buckets","user_command_rate_limit.rpc.method_override":"client.rate_limit.user_command.rpc.method_override","redis_user_command_rate_limit.enabled":"client.rate_limit.redis_user_command.enabled","redis_user_command_rate_limit.default.buckets":"client.rate_limit.redis_user_command.default.buckets","redis_user_command_rate_limit.connect.buckets":"client.rate_limit.redis_user_command.connect.buckets","redis_user_command_rate_limit.subscribe.buckets":"client.rate_limit.redis_user_command.subscribe.buckets","redis_user_command_rate_limit.publish.buckets":"client.rate_limit.redis_user_command.publish.buckets","redis_user_command_rate_limit.history.buckets":"client.rate_limit.redis_user_command.history.buckets","redis_user_command_rate_limit.presence.buckets":"client.rate_limit.redis_user_command.presence.buckets","redis_user_command_rate_limit.presence_stats.buckets":"client.rate_limit.redis_user_command.presence_stats.buckets","redis_user_command_rate_limit.refresh.buckets":"client.rate_limit.redis_user_command.refresh.buckets","redis_user_command_rate_limit.sub_refresh.buckets":"client.rate_limit.redis_user_command.sub_refresh.buckets","redis_user_command_rate_limit.rpc.buckets":"client.rate_limit.redis_user_command.rpc.buckets","redis_user_command_rate_limit.rpc.method_override":"client.rate_limit.redis_user_command.rpc.method_override","distributed_rate_limit.enabled":"distributed_rate_limit.enabled","distributed_rate_limit.use_redis_from_engine":"distributed_rate_limit.use_redis_from_engine","client_error_limits.enabled":"client.rate_limit.client_error.enabled","client_error_limits.total.buckets":"client.rate_limit.client_error.total.buckets","user_status.enabled":"user_status.enabled","user_status.use_redis_from_engine":"user_status.use_redis_from_engine","user_status.expire_interval":"user_status.expire_interval","user_status.state_regex":"user_status.state_regex","user_status.disable_for_client":"user_status.disable_for_client",state_vacated_event_delay:"state.vacated_event_delay","partitioned_presence.num_partitions":"state.num_presence_partitions","admin_oidc.enabled":"admin.oidc.enabled","admin_oidc.display_name":"admin.oidc.display_name","admin_oidc.discovery_endpoint":"admin.oidc.discovery_endpoint","admin_oidc.issuer":"admin.oidc.issuer","admin_oidc.client_id":"admin.oidc.client_id","admin_oidc.audience":"admin.oidc.audience","admin_oidc.redirect_uri":"admin.oidc.redirect_uri","admin_oidc.extra_scopes":"admin.oidc.extra_scopes","admin_oidc.access_cel":"admin.oidc.access_cel",websocket_compression_prepared_message_cache_size:"websocket.compression_prepared_message_cache_size",rpc_proxy_name:"rpc.without_namespace.proxy_name"};class c extends r.Component{constructor(){super(),this.onChange=this.onChange.bind(this),this.onClick=this.onClick.bind(this),this.state={config:null,output:"Here will be configuration for v6",logs:"Here will be log of changes made in your config"}}onClick(e){if(!this.state.config)return void alert("Provide a configuration");let t;try{t=JSON.parse(this.state.config)}catch{return void alert("Invalid JSON")}const{newConfig:n,log:s}=function(e,t){const n={},s=[];function _(e,t,n,_){const i=n.split(".");let r=e;for(let s=0;s<i.length-1;s++){const e=i[s];r[e]||(r[e]={}),r=r[e]}r[i[i.length-1]]=_,s.push(`migrate value from "${t}" to path "${n}"`)}for(const[i,r]of Object.entries(t)){const t=i.split(".").reduce(((e,t)=>e&&e[t]),e);void 0!==t&&_(n,i,r,t)}for(const i in e)t.hasOwnProperty(i)||s.push(`Source key "${i}" found in source but not present in migration map, not migrated.`);return e.consumers&&(n.consumers=e.consumers.map((e=>e.disabled?e.disabled?(s.push(`Inject enabled: false to consumer "${e.name}" because it was disabled`),{...e,enabled:!1}):e:(s.push(`Inject enabled: true to consumer "${e.name}"`),{...e,enabled:!0})))),n.client&&n.client.proxy&&n.client.proxy.connect&&n.client.proxy.connect.endpoint&&(n.client.proxy.connect.enabled=!0,n.client.proxy.connect.http={},e.proxy_http_status_code_transforms&&(n.client.proxy.connect.http.status_to_code_transforms=e.proxy_http_status_code_transforms,s.push('migrate value from "proxy_http_status_code_transforms" to path "client.proxy.connect.http.status_to_code_transforms"')),e.proxy_grpc_metadata&&(n.client.proxy.connect.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "client.proxy.connect.grpc_metadata"')),e.proxy_http_headers&&(n.client.proxy.connect.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "client.proxy.connect.http_headers"')),e.proxy_static_http_headers&&(n.client.proxy.connect.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "client.proxy.connect.http.static_headers"')),e.proxy_binary_encoding&&(n.client.proxy.connect.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "client.proxy.connect.binary_encoding"')),e.proxy_include_connection_meta&&(n.client.proxy.connect.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "client.proxy.connect.include_connection_meta"')),n.client.proxy.connect.grpc={},e.proxy_grpc_compression&&(n.client.proxy.connect.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "client.proxy.connect.grpc.compression"')),e.proxy_grpc_tls&&(n.client.proxy.connect.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "client.proxy.connect.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.client.proxy.connect.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "client.proxy.connect.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.client.proxy.connect.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "client.proxy.connect.grpc.credentials_value"'))),n.client&&n.client.proxy&&n.client.proxy.refresh&&n.client.proxy.refresh.endpoint&&(n.client.proxy.refresh.enabled=!0,n.client.proxy.refresh.http={},e.proxy_http_status_code_transforms&&(n.client.proxy.refresh.http.status_to_code_transforms=e.proxy_http_status_code_transforms,s.push('migrate value from "proxy_http_status_code_transforms" to path "client.proxy.refresh.http.status_to_code_transforms"')),e.proxy_grpc_metadata&&(n.refresh.proxy.connect.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "client.proxy.refresh.grpc_metadata"')),e.proxy_http_headers&&(n.client.proxy.refresh.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "client.proxy.refresh.http_headers"')),e.proxy_static_http_headers&&(n.client.proxy.refresh.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "client.proxy.refresh.http.static_headers"')),e.proxy_binary_encoding&&(n.client.proxy.refresh.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "client.proxy.refresh.binary_encoding"')),e.proxy_include_connection_meta&&(n.client.proxy.refresh.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "client.proxy.refresh.include_connection_meta"')),n.client.proxy.refresh.grpc={},e.proxy_grpc_compression&&(n.client.proxy.refresh.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "client.proxy.refresh.grpc.compression"')),e.proxy_grpc_tls&&(n.client.proxy.refresh.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "client.proxy.refresh.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.client.proxy.refresh.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "client.proxy.refresh.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.client.proxy.refresh.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "client.proxy.refresh.grpc.credentials_value"'))),n.channel&&n.channel.proxy&&n.channel.proxy.subscribe&&n.channel.proxy.subscribe.endpoint&&(n.client.proxy.subscribe.http={},e.proxy_http_status_code_transforms&&(n.channel.proxy.subscribe.http.status_to_code_transforms=e.proxy_http_status_code_transforms,s.push('migrate value from "proxy_http_status_code_transforms" to path "client.proxy.subscribe.http.status_to_code_transforms"')),e.proxy_grpc_metadata&&(n.channel.proxy.subscribe.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "channel.proxy.subscribe.grpc_metadata"')),e.proxy_http_headers&&(n.channel.proxy.subscribe.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "channel.proxy.subscribe.http_headers"')),e.proxy_static_http_headers&&(n.channel.proxy.subscribe.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "channel.proxy.subscribe.http.static_headers"')),e.proxy_binary_encoding&&(n.channel.proxy.subscribe.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "channel.proxy.subscribe.binary_encoding"')),e.proxy_include_connection_meta&&(n.channel.proxy.subscribe.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "channel.proxy.subscribe.include_connection_meta"')),n.channel.proxy.subscribe.grpc={},e.proxy_grpc_compression&&(n.channel.proxy.subscribe.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "channel.proxy.subscribe.grpc.compression"')),e.proxy_grpc_tls&&(n.channel.proxy.subscribe.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "channel.proxy.subscribe.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.channel.proxy.subscribe.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy _grpc_credentials_key" to path "channel.proxy.subscribe.grpc.credentials_key"'))),n.channel&&n.channel.proxy&&n.channel.proxy.publish&&n.channel.proxy.publish.endpoint&&(n.client.proxy.publish.http={},e.proxy_http_status_code_transforms&&(n.channel.proxy.publish.http.status_to_code_transforms=e.proxy_http_status_code_transforms,s.push('migrate value from "proxy_http_status_code_transforms" to path "client.proxy.publish.http.status_to_code_transforms"')),e.proxy_grpc_metadata&&(n.channel.proxy.publish.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "channel.proxy.publish.grpc_metadata"')),e.proxy_http_headers&&(n.channel.proxy.publish.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "channel.proxy.publish.http_headers"')),e.proxy_static_http_headers&&(n.channel.proxy.publish.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "channel.proxy.publish.http.static_headers"')),e.proxy_binary_encoding&&(n.channel.proxy.publish.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "channel.proxy.publish.binary_encoding"')),e.proxy_include_connection_meta&&(n.channel.proxy.publish.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "channel.proxy.publish.include_connection_meta"')),n.channel.proxy.publish.grpc={},e.proxy_grpc_compression&&(n.channel.proxy.publish.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "channel.proxy.publish.grpc.compression"')),e.proxy_grpc_tls&&(n.channel.proxy.publish.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "channel.proxy.publish.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.channel.proxy.publish.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "channel.proxy.publish.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.channel.proxy.publish.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "channel.proxy.publish.grpc.credentials_value"'))),n.channel&&n.channel.proxy&&n.channel.proxy.sub_refresh&&n.channel.proxy.sub_refresh.endpoint&&(n.client.proxy.sub_refresh.http={},e.proxy_http_status_code_transforms&&(n.channel.proxy.sub_refresh.http.status_to_code_transforms=e.proxy_http_status_code_transforms,s.push('migrate value from "proxy_http_status_code_transforms" to path "client.proxy.sub_refresh.http.status_to_code_transforms"')),e.proxy_grpc_metadata&&(n.channel.proxy.sub_refresh.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "channel.proxy.sub_refresh.grpc_metadata"')),e.proxy_http_headers&&(n.channel.proxy.sub_refresh.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "channel.proxy.sub_refresh.http_headers"')),e.proxy_static_http_headers&&(n.channel.proxy.sub_refresh.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "channel.proxy.sub_refresh.http.static_headers"')),e.proxy_binary_encoding&&(n.channel.proxy.sub_refresh.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "channel.proxy.sub_refresh.binary_encoding"')),e.proxy_include_connection_meta&&(n.channel.proxy.sub_refresh.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "channel.proxy.sub_refresh.include_connection_meta"')),n.channel.proxy.sub_refresh.grpc={},e.proxy_grpc_compression&&(n.channel.proxy.sub_refresh.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "channel.proxy.sub_refresh.grpc.compression"')),e.proxy_grpc_tls&&(n.channel.proxy.sub_refresh.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "channel.proxy.sub_refresh.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.channel.proxy.sub_refresh.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "channel.proxy.sub_refresh.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.channel.proxy.sub_refresh.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "channel.proxy.sub_refresh.grpc.credentials_value"'))),n.channel&&n.channel.proxy&&n.channel.proxy.subscribe_stream&&n.channel.proxy.subscribe_stream.endpoint&&(n.client.proxy.subscribe_stream.http={},e.proxy_grpc_metadata&&(n.channel.proxy.subscribe_stream.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "channel.proxy.subscribe_stream.grpc_metadata"')),e.proxy_http_headers&&(n.channel.proxy.subscribe_stream.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "channel.proxy.subscribe_stream.http_headers"')),e.proxy_static_http_headers&&(n.channel.proxy.subscribe_stream.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "channel.proxy.subscribe_stream.http.static_headers"')),e.proxy_binary_encoding&&(n.channel.proxy.subscribe_stream.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "channel.proxy.subscribe_stream.binary_encoding"')),e.proxy_include_connection_meta&&(n.channel.proxy.subscribe_stream.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "channel.proxy.subscribe_stream.include_connection_meta"')),n.channel.proxy.subscribe_stream.grpc={},e.proxy_grpc_compression&&(n.channel.proxy.subscribe_stream.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "channel.proxy.subscribe_stream.grpc.compression"')),e.proxy_grpc_tls&&(n.channel.proxy.subscribe_stream.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "channel.proxy.subscribe_stream.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.channel.proxy.subscribe_stream.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "channel.proxy.subscribe_stream.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.channel.proxy.subscribe_stream.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "channel.proxy.subscribe_stream.grpc.credentials_value"'))),n.channel&&n.channel.proxy&&n.channel.proxy.state&&n.channel.proxy.state.endpoint&&(n.client.proxy.state.http={},e.proxy_grpc_metadata&&(n.channel.proxy.state.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "channel.proxy.state.grpc_metadata"')),e.proxy_http_headers&&(n.channel.proxy.state.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "channel.proxy.state.http_headers"')),e.proxy_static_http_headers&&(n.channel.proxy.state.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "channel.proxy.state.http.static_headers"')),e.proxy_binary_encoding&&(n.channel.proxy.state.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "channel.proxy.state.binary_encoding"')),e.proxy_include_connection_meta&&(n.channel.proxy.state.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "channel.proxy.state.include_connection_meta"')),n.channel.proxy.state.grpc={},e.proxy_grpc_compression&&(n.channel.proxy.state.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "channel.proxy.state.grpc.compression"')),e.proxy_grpc_tls&&(n.channel.proxy.state.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "channel.proxy.state.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.channel.proxy.state.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "channel.proxy.state.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.channel.proxy.state.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "channel.proxy.state.grpc.credentials_value"'))),n.channel&&n.channel.proxy&&n.channel.proxy.cache_empty&&n.channel.proxy.cache_empty.endpoint&&(n.client.proxy.cache_empty.http={},e.proxy_grpc_metadata&&(n.channel.proxy.cache_empty.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "channel.proxy.cache_empty.grpc_metadata"')),e.proxy_http_headers&&(n.channel.proxy.cache_empty.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "channel.proxy.cache_empty.http_headers"')),e.proxy_static_http_headers&&(n.channel.proxy.cache_empty.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "channel.proxy.cache_empty.http.static_headers"')),e.proxy_binary_encoding&&(n.channel.proxy.cache_empty.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "channel.proxy.cache_empty.binary_encoding"')),e.proxy_include_connection_meta&&(n.channel.proxy.cache_empty.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "channel.proxy.cache_empty.include_connection_meta"')),n.channel.proxy.cache_empty.grpc={},e.proxy_grpc_compression&&(n.channel.proxy.cache_empty.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "channel.proxy.cache_empty.grpc.compression"')),e.proxy_grpc_tls&&(n.channel.proxy.cache_empty.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "channel.proxy.cache_empty.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.channel.proxy.cache_empty.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "channel.proxy.cache_empty.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.channel.proxy.cache_empty.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "channel.proxy.cache_empty.grpc.credentials_value"'))),n.rpc&&n.rpc.proxy&&n.rpc.proxy.endpoint&&(n.rpc.proxy.http={},e.proxy_http_status_code_transforms&&(n.rpc.proxy.http.status_to_code_transforms=e.proxy_http_status_code_transforms,s.push('migrate value from "proxy_http_status_code_transforms" to path "rpc.proxy.http.status_to_code_transforms"')),e.proxy_grpc_metadata&&(n.rpc.proxy.grpc_metadata=e.proxy_grpc_metadata,s.push('migrate value from "proxy_grpc_metadata" to path "rpc.proxy.grpc_metadata"')),e.proxy_http_headers&&(n.rpc.proxy.http_headers=e.proxy_http_headers,s.push('migrate value from "proxy_http_headers" to path "rpc.proxy.http_headers"')),e.proxy_static_http_headers&&(n.rpc.proxy.http.static_headers=e.proxy_static_http_headers,s.push('migrate value from "proxy_static_http_headers" to path "rpc.proxy.http.static_headers"')),e.proxy_binary_encoding&&(n.rpc.proxy.binary_encoding=e.proxy_binary_encoding,s.push('migrate value from "proxy_binary_encoding" to path "rpc.proxy.binary_encoding"')),e.proxy_include_connection_meta&&(n.rpc.proxy.include_connection_meta=e.proxy_include_connection_meta,s.push('migrate value from "proxy_include_connection_meta" to path "rpc.proxy.include_connection_meta"')),n.rpc.proxy.grpc={},e.proxy_grpc_compression&&(n.rpc.proxy.grpc.compression=e.proxy_grpc_compression,s.push('migrate value from "proxy_grpc_compression" to path "rpc.proxy.grpc.compression"')),e.proxy_grpc_tls&&(n.rpc.proxy.grpc.tls=e.proxy_grpc_tls,s.push('migrate value from "proxy_grpc_tls" to path "rpc.proxy.grpc.tls"')),e.proxy_grpc_credentials_key&&(n.rpc.proxy.grpc.credentials_key=e.proxy_grpc_credentials_key,s.push('migrate value from "proxy_grpc_credentials_key" to path "rpc.proxy.grpc.credentials_key"')),e.proxy_grpc_credentials_value&&(n.rpc.proxy.grpc.credentials_value=e.proxy_grpc_credentials_value,s.push('migrate value from "proxy_grpc_credentials_value" to path "rpc.proxy.grpc.credentials_value"'))),delete n.proxy_http_status_code_transforms,delete n.proxy_grpc_metadata,delete n.proxy_http_headers,delete n.proxy_static_http_headers,delete n.proxy_binary_encoding,delete n.proxy_include_connection_meta,delete n.proxy_grpc_compression,delete n.proxy_grpc_tls,delete n.proxy_grpc_credentials_key,delete n.proxy_grpc_credentials_value,n.channel&&n.channel.namespaces&&(n.channel.namespaces=n.channel.namespaces.map((e=>(e.proxy_subscribe&&(e.subscribe_proxy_enabled=!0,delete e.proxy_subscribe,s.push(`migrate value from "proxy_subscribe" to path "subscribe_proxy_enabled" in namespace "${e.name}"`)),e.proxy_publish&&(e.publish_proxy_enabled=!0,delete e.proxy_publish,s.push(`migrate value from "proxy_publish" to path "publish_proxy_enabled" in namespace "${e.name}"`)),e.proxy_sub_refresh&&(e.sub_refresh_proxy_enabled=!0,delete e.proxy_sub_refresh,s.push(`migrate value from "proxy_sub_refresh" to path "sub_refresh_proxy_enabled" in namespace "${e.name}"`)),e.proxy_subscribe_stream&&(e.subscribe_stream_proxy_enabled=!0,delete e.proxy_subscribe_stream,s.push(`migrate value from "proxy_subscribe_stream" to path "subscribe_stream_proxy_enabled" in namespace "${e.name}"`)),e.proxy_subscribe_stream_bidirectional&&(e.subscribe_stream_proxy_bidirectional=!0,delete e.proxy_subscribe_stream_bidirectional,s.push(`migrate value from "proxy_subscribe_stream_bidirectional" to path "subscribe_stream_proxy_bidirectional" in namespace "${e.name}"`)),e)))),n.channel&&n.channel.namespaces&&(n.channel.namespaces=n.channel.namespaces.map((e=>(e.name.startsWith("/")&&(e.pattern=e.name,e.name=e.name.replace("/","").replace(/:/g,"").replace(/\//g,"_"),s.push(`migrate value from "name" to path "pattern" in namespace "${e.name}"`)),e)))),n.proxies&&(n.proxies=n.proxies.map((e=>(e.http||(e.http={}),e.static_http_headers&&(e.http.static_headers=e.static_http_headers,delete e.static_http_headers,s.push(`migrate value from "static_http_headers" to path "http.static_headers" in proxy "${e.name}"`)),e.grpc||(e.grpc={}),e.grpc_compression&&(e.grpc.compression=e.grpc_compression,s.push(`migrate value from "compression" to path "grpc.compression" in proxy "${e.name}"`)),e.grpc_tls&&(e.grpc.tls={enabled:e.grpc_tls},s.push(`migrate value from "grpc_tls" to path "grpc.tls.enabled" in proxy "${e.name}"`)),e.grpc_credentials_key&&(e.grpc.credentials_key=e.grpc_credentials_key,s.push(`migrate value from "credentials_key" to path "grpc.credentials_key" in proxy "${e.name}"`)),e.grpc_credentials_value&&(e.grpc.credentials_value=e.grpc_credentials_value,s.push(`migrate value from "credentials_value" to path "grpc.credentials_value" in proxy "${e.name}"`)),e)))),n.prometheus&&n.prometheus.enabled&&(n.prometheus.channel_namespace_for_transport_messages_sent||n.prometheus.channel_namespace_for_transport_messages_received)&&(n.prometheus.channel_namespace_resolution=!0,delete n.prometheus.channel_namespace_for_transport_messages_sent,delete n.prometheus.channel_namespace_for_transport_messages_received,s.push('migrate value from "channel_namespace_for_transport_messages_sent" and "channel_namespace_for_transport_messages_received" to path "channel_namespace_resolution" in prometheus')),n.database&&n.database.postgresql&&n.database.postgresql.dsn&&(n.database.enabled=!0,s.push("set database.enabled to true")),n.push_notifications&&n.push_notifications.max_inactive_device_days&&(n.push_notifications.max_inactive_device_interval=24*n.push_notifications.max_inactive_device_days+"h",delete n.push_notifications.max_inactive_device_days,s.push('migrate value from "max_inactive_device_days" to path "max_inactive_device_interval" in push_notifications')),n.rpc&&n.rpc.proxy&&n.rpc.proxy.endpoint&&!n.rpc.without_namespace&&(n.rpc.without_namespace={proxy_enabled:!0},n.rpc.namespace_boundary=":",s.push("set rpc.without_namespace.proxy_enabled")),n.rpc&&n.rpc.namespaces&&(n.rpc.namespaces=n.rpc.namespaces.map((e=>{e.rpc_proxy_name&&(e.proxy_enabled=!0,e.proxy_name=e.rpc_proxy_name,delete e.rpc_proxy_name)}))),{newConfig:n,log:s}}(t,a);console.log(t),console.log(n),console.log(s);this.setState({output:JSON.stringify(n,null,"  ")}),this.setState({logs:JSON.stringify(s,null,"  ")})}onChange(e){this.setState({config:e.target.value})}render(){return(0,_.jsxs)("div",{children:[(0,_.jsx)("textarea",{onChange:this.onChange,placeholder:"Paste your Centrifugo v5 JSON config here, then press Convert button",style:{width:"100%",height:"300px",border:"2px solid #ccc"}}),(0,_.jsx)("button",{onClick:this.onClick,children:"Convert"}),(0,_.jsx)("pre",{style:{marginTop:"10px"},children:this.state.output}),(0,_.jsx)("pre",{style:{marginTop:"10px"},children:this.state.logs})]})}}const o={redis_address:"engine.redis.address",redis_prefix:"engine.redis.prefix",redis_connect_timeout:"engine.redis.connect_timeout",redis_io_timeout:"engine.redis.io_timeout",redis_use_lists:"engine.redis.history_use_lists",redis_db:"engine.redis.db",redis_user:"engine.redis.user",redis_password:"engine.redis.password",redis_client_name:"engine.redis.client_name",redis_force_resp2:"engine.redis.force_resp2",redis_cluster_address:"engine.redis.cluster_address",redis_sentinel_address:"engine.redis.sentinel_address",redis_sentinel_user:"engine.redis.sentinel_user",redis_sentinel_password:"engine.redis.sentinel_password",redis_sentinel_master_name:"engine.redis.sentinel_master_name",redis_sentinel_client_name:"engine.redis.sentinel_client_name",redis_tls:"engine.redis.tls.enabled",redis_tls_key:"engine.redis.tls.key_pem",redis_tls_cert:"engine.redis.tls.cert_pem",redis_tls_cert_pem:"engine.redis.tls.cert_pem",redis_tls_key_pem:"engine.redis.tls.key_pem",redis_tls_root_ca:"engine.redis.tls.server_ca_pem",redis_tls_root_ca_pem:"engine.redis.tls.server_ca_pem",redis_tls_client_ca:"engine.redis.tls.client_ca_pem",redis_tls_client_ca_pem:"engine.redis.tls.client_ca_pem",redis_tls_server_name:"engine.redis.tls.server_name",redis_tls_insecure_skip_verify:"engine.redis.tls.insecure_skip_verify",redis_sentinel_tls:"engine.redis.sentinel_tls.enabled",redis_sentinel_tls_key:"engine.redis.sentinel_tls.key_pem",redis_sentinel_tls_cert:"engine.redis.sentinel_tls.cert_pem",redis_sentinel_tls_cert_pem:"engine.redis.sentinel_tls.cert_pem",redis_sentinel_tls_key_pem:"engine.redis.sentinel_tls.key_pem",redis_sentinel_tls_root_ca:"engine.redis.sentinel_tls.server_ca_pem",redis_sentinel_tls_root_ca_pem:"engine.redis.sentinel_tls.server_ca_pem",redis_sentinel_tls_client_ca:"engine.redis.sentinel_tls.client_ca_pem",redis_sentinel_tls_client_ca_pem:"engine.redis.sentinel_tls.client_ca_pem",redis_sentinel_tls_server_name:"engine.redis.sentinel_tls.server_name",redis_sentinel_tls_insecure_skip_verify:"engine.redis.sentinel_tls.insecure_skip_verify",name:"node.name",engine:"engine.type",pid_file:"pid_file",opentelemetry:"opentelemetry.enabled",opentelemetry_api:"opentelemetry.api",opentelemetry_consuming:"opentelemetry.consuming",client_insecure:"client.insecure",client_insecure_skip_token_signature_verify:"client.insecure_skip_token_signature_verify",api_insecure:"http_api.insecure",client_user_id_http_header:"client.user_id_http_header",token_hmac_secret_key:"client.token.hmac_secret_key",token_rsa_public_key:"client.token.rsa_public_key",token_ecdsa_public_key:"client.token.ecdsa_public_key",token_jwks_public_endpoint:"client.token.jwks_public_endpoint",token_audience:"client.token.audience",token_audience_regex:"client.token.audience_regex",token_issuer:"client.token.issuer",token_issuer_regex:"client.token.issuer_regex",token_user_id_claim:"client.token.user_id_claim",separate_subscription_token_config:"client.subscription_token.enabled",subscription_token_hmac_secret_key:"client.subscription_token.hmac_secret_key",subscription_token_rsa_public_key:"client.subscription_token.rsa_public_key",subscription_token_ecdsa_public_key:"client.subscription_token.ecdsa_public_key",subscription_token_jwks_public_endpoint:"client.subscription_token.jwks_public_endpoint",subscription_token_audience:"client.subscription_token.audience",subscription_token_audience_regex:"client.subscription_token.audience_regex",subscription_token_issuer:"client.subscription_token.issuer",subscription_token_issuer_regex:"client.subscription_token.issuer_regex",subscription_token_user_id_claim:"client.subscription_token.user_id_claim",allowed_origins:"client.allowed_origins",global_history_meta_ttl:"channel.history_meta_ttl",global_presence_ttl:"redis.presence_ttl",global_redis_presence_user_mapping:"redis.presence_user_mapping",redis_presence_hash_field_ttl:"redis.presence_hash_field_ttl",allowed_delta_types:"channel.without_namespace.allowed_delta_types",delta_publish:"channel.without_namespace.delta_publish",presence:"channel.without_namespace.presence",join_leave:"channel.without_namespace.join_leave",force_push_join_leave:"channel.without_namespace.force_push_join_leave",history_size:"channel.without_namespace.history_size",history_ttl:"channel.without_namespace.history_ttl",history_meta_ttl:"channel.without_namespace.history_meta_ttl",force_positioning:"channel.without_namespace.force_positioning",allow_positioning:"channel.without_namespace.allow_positioning",force_recovery:"channel.without_namespace.force_recovery",allow_recovery:"channel.without_namespace.allow_recovery",force_recovery_mode:"channel.without_namespace.force_recovery_mode",allow_subscribe_for_anonymous:"channel.without_namespace.allow_subscribe_for_anonymous",allow_subscribe_for_client:"channel.without_namespace.allow_subscribe_for_client",allow_publish_for_anonymous:"channel.without_namespace.allow_publish_for_anonymous",allow_publish_for_client:"channel.without_namespace.allow_publish_for_client",allow_publish_for_subscriber:"channel.without_namespace.allow_publish_for_subscriber",allow_presence_for_anonymous:"channel.without_namespace.allow_presence_for_anonymous",allow_presence_for_client:"channel.without_namespace.allow_presence_for_client",allow_presence_for_subscriber:"channel.without_namespace.allow_presence_for_subscriber",allow_history_for_anonymous:"channel.without_namespace.allow_history_for_anonymous",allow_history_for_client:"channel.without_namespace.allow_history_for_client",allow_history_for_subscriber:"channel.without_namespace.allow_history_for_subscriber",allow_user_limited_channels:"channel.without_namespace.allow_user_limited_channels",channel_regex:"channel.without_namespace.channel_regex",proxy_subscribe:"channel.without_namespace.subscribe_proxy_enabled",proxy_publish:"channel.without_namespace.publish_proxy_enabled",proxy_sub_refresh:"channel.without_namespace.sub_refresh_proxy_enabled",proxy_subscribe_stream:"channel.without_namespace.subscribe_stream_proxy_enabled",subscribe_proxy_name:"channel.without_namespace.subscribe_proxy_name",publish_proxy_name:"channel.without_namespace.publish_proxy_name",sub_refresh_proxy_name:"channel.without_namespace.sub_refresh_proxy_name",subscribe_stream_proxy_name:"channel.without_namespace.subscribe_stream_proxy_name",subscribe_cel:"channel.without_namespace.subscribe_cel",publish_cel:"channel.without_namespace.publish_cel",presence_cel:"channel.without_namespace.presence_cel",history_cel:"channel.without_namespace.history_cel",keep_latest_publication:"channel.without_namespace.keep_latest_publication",shared_position_sync:"channel.without_namespace.shared_position_sync",state_events:"channel.without_namespace.state_events",cache_empty_proxy_name:"channel.without_namespace.cache_empty_proxy_name",broker_name:"channel.without_namespace.broker_name",presence_manager_name:"channel.without_namespace.presence_manager_name",node_info_metrics_aggregate_interval:"node.info_metrics_aggregate_interval",allow_anonymous_connect_without_token:"client.allow_anonymous_connect_without_token",disallow_anonymous_connection_tokens:"client.disallow_anonymous_connection_tokens",client_expired_close_delay:"client.expired_close_delay",client_expired_sub_close_delay:"client.expired_sub_close_delay",client_stale_close_delay:"client.stale_close_delay",client_channel_limit:"client.channel_limit",client_queue_max_size:"client.queue_max_size",client_presence_update_interval:"client.presence_update_interval",client_user_connection_limit:"client.user_connection_limit",client_concurrency:"client.concurrency",client_channel_position_check_delay:"client.channel_position_check_delay",client_channel_position_max_time_lag:"client.channel_position_max_time_lag",client_connection_limit:"client.connection_limit",client_connection_rate_limit:"client.connection_rate_limit",client_connect_include_server_time:"client.connect_include_server_time","client_connect_code_to_unidirectional_disconnect.enabled":"client.connect_code_to_unidirectional_disconnect.enabled","client_connect_code_to_unidirectional_disconnect.transforms":"client.connect_code_to_unidirectional_disconnect.transforms",channel_max_length:"channel.max_length",channel_private_prefix:"channel.private_prefix",channel_namespace_boundary:"channel.namespace_boundary",channel_user_boundary:"channel.user_boundary",channel_user_separator:"channel.user_separator",rpc_namespace_boundary:"rpc.namespace_boundary",rpc_ping:"rpc.ping.enabled",rpc_ping_method:"rpc.ping.method",user_subscribe_to_personal:"client.subscribe_to_user_personal_channel.enabled",user_personal_channel_namespace:"client.subscribe_to_user_personal_channel.personal_channel_namespace",user_personal_single_connection:"client.subscribe_to_user_personal_channel.single_connection",debug:"debug.enabled",prometheus:"prometheus.enabled",health:"health.enabled",admin:"admin.enabled",admin_password:"admin.password",admin_secret:"admin.secret",admin_insecure:"admin.insecure",admin_web_path:"admin.web_path",admin_web_proxy_address:"admin.web_proxy_address",websocket_compression:"websocket.compression",websocket_compression_min_size:"websocket.compression_min_size",websocket_compression_level:"websocket.compression_level",websocket_read_buffer_size:"websocket.read_buffer_size",websocket_use_write_buffer_pool:"websocket.use_write_buffer_pool",websocket_write_buffer_size:"websocket.write_buffer_size",websocket_write_timeout:"websocket.write_timeout",websocket_message_size_limit:"websocket.message_size_limit",uni_websocket:"uni_websocket.enabled",uni_websocket_compression:"uni_websocket.compression",uni_websocket_compression_min_size:"uni_websocket.compression_min_size",uni_websocket_compression_level:"uni_websocket.compression_level",uni_websocket_read_buffer_size:"uni_websocket.read_buffer_size",uni_websocket_use_write_buffer_pool:"uni_websocket.use_write_buffer_pool",uni_websocket_write_buffer_size:"uni_websocket.write_buffer_size",uni_websocket_write_timeout:"uni_websocket.write_timeout",uni_websocket_message_size_limit:"uni_websocket.message_size_limit",uni_sse:"uni_sse.enabled",uni_http_stream:"uni_http_stream.enabled","uni_sse_connect_code_to_http_response.enabled":"uni_sse.connect_code_to_http_response.enabled","uni_sse_connect_code_to_http_response.transforms":"uni_sse.connect_code_to_http_response.transforms","uni_http_stream_connect_code_to_http_response.enabled":"uni_http_stream.connect_code_to_http_response.enabled","uni_http_stream_connect_code_to_http_response.transforms":"uni_http_stream.connect_code_to_http_response.transforms",log_level:"log.level",log_file:"log.file",tls:"http_server.tls.enabled",tls_key:"http_server.tls.key_pem",tls_cert:"http_server.tls.cert_pem",tls_cert_pem:"http_server.tls.cert_pem",tls_key_pem:"http_server.tls.key_pem",tls_root_ca:"http_server.tls.server_ca_pem",tls_root_ca_pem:"http_server.tls.server_ca_pem",tls_client_ca:"http_server.tls.client_ca_pem",tls_client_ca_pem:"http_server.tls.client_ca_pem",tls_server_name:"tls.server_name",tls_insecure_skip_verify:"tls.insecure_skip_verify",swagger:"swagger.enabled",admin_external:"admin.external",api_external:"http_api.external",address:"http_server.address",port:"http_server.port",internal_address:"http_server.internal_address",internal_port:"http_server.internal_port",tls_external:"http_server.tls_external",webtransport:"webtransport.enabled",http3:"http_server.http3.enabled",proxy_connect_endpoint:"client.proxy.connect.endpoint",proxy_refresh_endpoint:"client.proxy.refresh.endpoint",proxy_subscribe_endpoint:"channel.proxy.subscribe.endpoint",proxy_publish_endpoint:"channel.proxy.publish.endpoint",proxy_sub_refresh_endpoint:"channel.proxy.sub_refresh.endpoint",proxy_subscribe_stream_endpoint:"channel.proxy.subscribe_stream.endpoint",proxy_rpc_endpoint:"rpc.proxy.endpoint",proxy_connect_timeout:"client.proxy.connect.timeout",proxy_refresh_timeout:"client.proxy.refresh.timeout",proxy_subscribe_timeout:"channel.proxy.subscribe.timeout",proxy_publish_timeout:"channel.proxy.publish.timeout",proxy_sub_refresh_timeout:"channel.proxy.sub_refresh.timeout",proxy_subscribe_stream_timeout:"channel.proxy.subscribe_stream.timeout",proxy_rpc_timeout:"rpc.proxy.timeout",proxy_state_endpoint:"channel.proxy.state.endpoint",proxy_state_timeout:"channel.proxy.state.timeout",proxy_cache_empty_endpoint:"channel.proxy.cache_empty.endpoint",proxy_cache_empty_timeout:"channel.proxy.cache_empty.timeout",api_key:"http_api.key",api_error_mode:"http_api.error_mode",uni_http_stream_max_request_body_size:"uni_http_stream.max_request_body_size",uni_sse_max_request_body_size:"uni_sse.max_request_body_size",http_stream_max_request_body_size:"http_stream.max_request_body_size",sse_max_request_body_size:"sse.max_request_body_size",tls_autocert:"tls_autocert.enabled",tls_autocert_host_whitelist:"tls_autocert.host_whitelist",tls_autocert_cache_dir:"tls_autocert.cache_dir",tls_autocert_email:"tls_autocert.email",tls_autocert_server_name:"tls_autocert.server_name",tls_autocert_http:"tls_autocert.http",tls_autocert_http_addr:"tls_autocert.http_addr",grpc_api:"grpc_api.enabled",grpc_api_error_mode:"grpc_api.error_mode",grpc_api_address:"grpc_api.address",grpc_api_port:"grpc_api.port",grpc_api_key:"grpc_api.key",grpc_api_reflection:"grpc_api.reflection",grpc_api_tls:"grpc_api.tls.enabled",grpc_api_tls_key:"grpc_api.tls.key_pem",grpc_api_tls_cert:"grpc_api.tls.cert_pem",grpc_api_tls_cert_pem:"grpc_api.tls.cert_pem",grpc_api_tls_key_pem:"grpc_api.tls.key_pem",grpc_api_tls_root_ca:"grpc_api.tls.server_ca_pem",grpc_api_tls_root_ca_pem:"grpc_api.tls.server_ca_pem",grpc_api_tls_client_ca:"grpc_api.tls.client_ca_pem",grpc_api_tls_client_ca_pem:"grpc_api.tls.client_ca_pem",grpc_api_tls_server_name:"grpc_api.tls.server_name",grpc_api_tls_insecure_skip_verify:"grpc_api.tls.insecure_skip_verify",grpc_api_max_receive_message_size:"grpc_api.max_receive_message_size",shutdown_timeout:"shutdown.timeout",graphite:"graphite.enabled",graphite_host:"graphite.host",graphite_port:"graphite.port",graphite_prefix:"graphite.prefix",graphite_interval:"graphite.interval",graphite_tags:"graphite.tags",nats_prefix:"broker.nats.prefix",nats_url:"broker.nats.url",nats_dial_timeout:"broker.nats.dial_timeout",nats_write_timeout:"broker.nats.write_timeout",nats_allow_wildcards:"broker.nats.allow_wildcards","nats_raw_mode.enabled":"broker.nats.raw_mode.enabled","nats_raw_mode.channel_replacements":"broker.nats.raw_mode.channel_replacements","nats_raw_mode.prefix":"broker.nats.raw_mode.prefix",websocket_disable:"websocket.disabled",api_disable:"http_api.disabled",websocket_handler_prefix:"websocket.handler_prefix",webtransport_handler_prefix:"webtransport.handler_prefix",http_stream_handler_prefix:"http_stream.handler_prefix",sse_handler_prefix:"sse.handler_prefix",uni_websocket_handler_prefix:"uni_websocket.handler_prefix",uni_sse_handler_prefix:"uni_sse.handler_prefix",uni_http_stream_handler_prefix:"uni_http_stream.handler_prefix",uni_grpc:"uni_grpc.enabled",uni_grpc_address:"uni_grpc.address",uni_grpc_port:"uni_grpc.port",uni_grpc_max_receive_message_size:"uni_grpc.max_receive_message_size",uni_grpc_tls:"uni_grpc.tls.enabled",uni_grpc_tls_key:"uni_grpc.tls.key_pem",uni_grpc_tls_cert:"uni_grpc.tls.cert_pem",uni_grpc_tls_cert_pem:"uni_grpc.tls.cert_pem",uni_grpc_tls_key_pem:"uni_grpc.tls.key_pem",uni_grpc_tls_root_ca:"uni_grpc.tls.server_ca_pem",uni_grpc_tls_root_ca_pem:"uni_grpc.tls.server_ca_pem",uni_grpc_tls_client_ca:"uni_grpc.tls.client_ca_pem",uni_grpc_tls_client_ca_pem:"uni_grpc.tls.client_ca_pem",uni_grpc_tls_server_name:"uni_grpc.tls.server_name",uni_grpc_tls_insecure_skip_verify:"uni_grpc.tls.insecure_skip_verify",http_stream:"http_stream.enabled",sse:"sse.enabled",emulation_handler_prefix:"emulation.handler_prefix",emulation_max_request_body_size:"emulation.max_request_body_size",admin_handler_prefix:"admin.handler_prefix",api_handler_prefix:"http_api.handler_prefix",prometheus_handler_prefix:"prometheus.handler_prefix",health_handler_prefix:"health.handler_prefix",swagger_handler_prefix:"swagger.handler_prefix",client_history_max_publication_limit:"client.history_max_publication_limit",client_recovery_max_publication_limit:"client.recovery_max_publication_limit",usage_stats_disable:"usage_stats.disabled",ping_interval:"client.ping_interval",pong_timeout:"client.pong_timeout",namespaces:"channel.namespaces",rpc_namespaces:"rpc.namespaces",proxies:"proxies",enable_unreleased_features:"enable_unreleased_features",consumers:"consumers",license:"license","database.dsn":"database.postgresql.dsn","database.replica_dsn":"database.postgresql.replica_dsn",channel_patterns:"channel.patterns",use_singleflight:"singleflight.enabled",brokers:"brokers",presence_managers:"presence_managers",channel_namespace_for_transport_messages_sent:"prometheus.channel_namespace_for_transport_messages_sent",channel_namespace_for_transport_messages_received:"prometheus.channel_namespace_for_transport_messages_received",client_write_delay:"client.write_delay",client_reply_without_queue:"client.reply_without_queue",client_max_messages_in_frame:"client.max_messages_in_frame",client_queue_initial_cap:"client.queue_initial_cap","cache.enabled":"cache.enabled","cache.engine":"cache.storage_type","cache.use_redis_from_engine":"cache.redis.use_from_engine","cache.redis":"cache.redis","clickhouse_analytics.enabled":"clickhouse_analytics.enabled","clickhouse_analytics.clickhouse_dsn":"clickhouse_analytics.clickhouse_dsn","clickhouse_analytics.skip_ping_on_start":"clickhouse_analytics.skip_ping_on_start","clickhouse_analytics.skip_schema_initialization":"clickhouse_analytics.skip_schema_initialization","clickhouse_analytics.clickhouse_database":"clickhouse_analytics.clickhouse_database","clickhouse_analytics.clickhouse_cluster":"clickhouse_analytics.clickhouse_cluster","clickhouse_analytics.export_connections":"clickhouse_analytics.export.connections.enabled","clickhouse_analytics.export_subscriptions":"clickhouse_analytics.export.subscriptions.enabled","clickhouse_analytics.export_operations":"clickhouse_analytics.export.operations.enabled","clickhouse_analytics.export_publications":"clickhouse_analytics.export.publications.enabled","clickhouse_analytics.export_notifications":"clickhouse_analytics.export.notifications.enabled","clickhouse_analytics.export_http_headers":"clickhouse_analytics.export.connections.http_headers","clickhouse_analytics.export_grpc_metadata":"clickhouse_analytics.export.connections.grpc_metadata","clickhouse_analytics.connections_max_buffer_size":"clickhouse_analytics.export.connections.max_buffer_size","clickhouse_analytics.operations_max_buffer_size":"clickhouse_analytics.export.operations.max_buffer_size","clickhouse_analytics.publications_max_buffer_size":"clickhouse_analytics.export.publications.max_buffer_size","clickhouse_analytics.subscriptions_max_buffer_size":"clickhouse_analytics.export.subscriptions.max_buffer_size","clickhouse_analytics.notifications_max_buffer_size":"clickhouse_analytics.export.notifications.max_buffer_size","clickhouse_analytics.connections_flush_interval":"clickhouse_analytics.export.connections.flush_interval","clickhouse_analytics.operations_flush_interval":"clickhouse_analytics.export.operations.flush_interval","clickhouse_analytics.publications_flush_interval":"clickhouse_analytics.export.publications.flush_interval","clickhouse_analytics.subscriptions_flush_interval":"clickhouse_analytics.export.subscriptions.flush_interval","clickhouse_analytics.notifications_flush_interval":"clickhouse_analytics.export.notifications.flush_interval","clickhouse_analytics.connections_flush_size":"clickhouse_analytics.export.connections.flush_size","clickhouse_analytics.operations_flush_size":"clickhouse_analytics.export.operations.flush_size","clickhouse_analytics.publications_flush_size":"clickhouse_analytics.export.publications.flush_size","clickhouse_analytics.subscriptions_flush_size":"clickhouse_analytics.export.subscriptions.flush_size","clickhouse_analytics.notifications_flush_size":"clickhouse_analytics.export.notifications.flush_size","clickhouse_analytics.connections_ttl":"clickhouse_analytics.export.connections.ttl","clickhouse_analytics.operations_ttl":"clickhouse_analytics.export.operations.ttl","clickhouse_analytics.publications_ttl":"clickhouse_analytics.export.publications.ttl","clickhouse_analytics.subscriptions_ttl":"clickhouse_analytics.export.subscriptions.ttl","clickhouse_analytics.notifications_ttl":"clickhouse_analytics.export.notifications.ttl","user_tokens_invalidate.enabled":"user_tokens_invalidate.enabled","user_tokens_invalidate.persistence_engine":"user_tokens_invalidate.storage_type","user_tokens_invalidate.redis_address":"user_tokens_invalidate.redis.address","user_block.enabled":"user_block.enabled","user_block.persistence_engine":"user_block.storage_type","user_block.redis_address":"user_block.redis.address","token_revoke.enabled":"token_revoke.enabled","token_revoke.persistence_engine":"token_revoke.storage_type","token_revoke.redis_address":"token_revoke.redis.address","push_notifications.redis_address":"push_notifications.queue.redis.address","push_notifications.use_redis_from_engine":"push_notifications.use_redis_from_engine","push_notifications.enabled_providers":"push_notifications.enabled_providers","push_notifications.dry_run":"push_notifications.dry_run","push_notifications.dry_run_latency":"push_notifications.dry_run_latency","push_notifications.max_inactive_device_days":"push_notifications.max_inactive_device_days","push_notifications.fcm_credentials_file_path":"push_notifications.fcm.credentials_file","push_notifications.hms_app_id":"push_notifications.hms.app_id","push_notifications.hms_app_secret":"push_notifications.hms.app_secret","push_notifications.queue_engine":"push_notifications.queue.type","push_notifications.apns_endpoint":"push_notifications.apns.endpoint","push_notifications.apns_bundle_id":"push_notifications.apns.bundle_id","push_notifications.apns_token_auth_key_path":"push_notifications.apns.token_key_file","push_notifications.apns_token_auth_key_pem":"push_notifications.apns.token_key_pem","push_notifications.apns_token_key_id":"push_notifications.apns.token_key_id","push_notifications.apns_token_team_id":"push_notifications.apns.token_team_id","push_notifications.apns_cert_p12_path":"push_notifications.apns.cert_p12_file","push_notifications.apns_cert_p12_b64":"push_notifications.apns.cert_p12_b64","push_notifications.apns_cert_p12_password":"push_notifications.apns.cert_p12_password","push_notifications.enable_client_cancel_push":"push_notifications.enable_client_cancel_push","push_notifications.use_redis_legacy_reclaim":"push_notifications.use_redis_legacy_reclaim","push_notifications.fcm_tokens_batch_size":"push_notifications.fcm.tokens_batch_size","push_notifications.apns_tokens_batch_size":"push_notifications.apns.tokens_batch_size","push_notifications.hms_tokens_batch_size":"push_notifications.hms.tokens_batch_size","push_notifications.database_queue_prefix":"push_notifications.database_queue_prefix","push_notifications.read_from_replica":"push_notifications.read_from_replica","push_notifications.database_scheduler_consumer_concurrency":"push_notifications.database_scheduler_consumer_concurrency","push_notifications.database_fcm_consumer_concurrency":"push_notifications.fcm.database_consumer_concurrency","push_notifications.database_hms_consumer_concurrency":"push_notifications.hms.database_consumer_concurrency","push_notifications.database_apns_consumer_concurrency":"push_notifications.apns.database_consumer_concurrency","client_command_rate_limit.enabled":"client.rate_limit.client_command.enabled","client_command_rate_limit.total.buckets":"client.rate_limit.client_command.total.buckets","client_command_rate_limit.default.buckets":"client.rate_limit.client_command.default.buckets","client_command_rate_limit.connect.buckets":"client.rate_limit.client_command.connect.buckets","client_command_rate_limit.subscribe.buckets":"client.rate_limit.client_command.subscribe.buckets","client_command_rate_limit.publish.buckets":"client.rate_limit.client_command.publish.buckets","client_command_rate_limit.history.buckets":"client.rate_limit.client_command.history.buckets","client_command_rate_limit.presence.buckets":"client.rate_limit.client_command.presence.buckets","client_command_rate_limit.presence_stats.buckets":"client.rate_limit.client_command.presence_stats.buckets","client_command_rate_limit.refresh.buckets":"client.rate_limit.client_command.refresh.buckets","client_command_rate_limit.sub_refresh.buckets":"client.rate_limit.client_command.sub_refresh.buckets","client_command_rate_limit.rpc.buckets":"client.rate_limit.client_command.rpc.buckets","client_command_rate_limit.rpc.method_override":"client.rate_limit.client_command.rpc.method_override","user_command_rate_limit.enabled":"client.rate_limit.user_command.enabled","user_command_rate_limit.total.buckets":"client.rate_limit.user_command.total.buckets","user_command_rate_limit.default.buckets":"client.rate_limit.user_command.default.buckets","user_command_rate_limit.connect.buckets":"client.rate_limit.user_command.connect.buckets","user_command_rate_limit.subscribe.buckets":"client.rate_limit.user_command.subscribe.buckets","user_command_rate_limit.publish.buckets":"client.rate_limit.user_command.publish.buckets","user_command_rate_limit.history.buckets":"client.rate_limit.user_command.history.buckets","user_command_rate_limit.presence.buckets":"client.rate_limit.user_command.presence.buckets","user_command_rate_limit.presence_stats.buckets":"client.rate_limit.user_command.presence_stats.buckets","user_command_rate_limit.refresh.buckets":"client.rate_limit.user_command.refresh.buckets","user_command_rate_limit.sub_refresh.buckets":"client.rate_limit.user_command.sub_refresh.buckets","user_command_rate_limit.rpc.buckets":"client.rate_limit.user_command.rpc.buckets","user_command_rate_limit.rpc.method_override":"client.rate_limit.user_command.rpc.method_override","redis_user_command_rate_limit.enabled":"client.rate_limit.redis_user_command.enabled","redis_user_command_rate_limit.default.buckets":"client.rate_limit.redis_user_command.default.buckets","redis_user_command_rate_limit.connect.buckets":"client.rate_limit.redis_user_command.connect.buckets","redis_user_command_rate_limit.subscribe.buckets":"client.rate_limit.redis_user_command.subscribe.buckets","redis_user_command_rate_limit.publish.buckets":"client.rate_limit.redis_user_command.publish.buckets","redis_user_command_rate_limit.history.buckets":"client.rate_limit.redis_user_command.history.buckets","redis_user_command_rate_limit.presence.buckets":"client.rate_limit.redis_user_command.presence.buckets","redis_user_command_rate_limit.presence_stats.buckets":"client.rate_limit.redis_user_command.presence_stats.buckets","redis_user_command_rate_limit.refresh.buckets":"client.rate_limit.redis_user_command.refresh.buckets","redis_user_command_rate_limit.sub_refresh.buckets":"client.rate_limit.redis_user_command.sub_refresh.buckets","redis_user_command_rate_limit.rpc.buckets":"client.rate_limit.redis_user_command.rpc.buckets","redis_user_command_rate_limit.rpc.method_override":"client.rate_limit.redis_user_command.rpc.method_override","distributed_rate_limit.enabled":"distributed_rate_limit.enabled","distributed_rate_limit.use_redis_from_engine":"distributed_rate_limit.use_redis_from_engine","client_error_limits.enabled":"client.rate_limit.client_error.enabled","client_error_limits.total.buckets":"client.rate_limit.client_error.total.buckets","user_status.enabled":"user_status.enabled","user_status.use_redis_from_engine":"user_status.use_redis_from_engine","user_status.expire_interval":"user_status.expire_interval","user_status.state_regex":"user_status.state_regex","user_status.disable_for_client":"user_status.disable_for_client",state_vacated_event_delay:"state.vacated_event_delay","partitioned_presence.num_partitions":"state.num_presence_partitions","admin_oidc.enabled":"admin.oidc.enabled","admin_oidc.display_name":"admin.oidc.display_name","admin_oidc.discovery_endpoint":"admin.oidc.discovery_endpoint","admin_oidc.issuer":"admin.oidc.issuer","admin_oidc.client_id":"admin.oidc.client_id","admin_oidc.audience":"admin.oidc.audience","admin_oidc.redirect_uri":"admin.oidc.redirect_uri","admin_oidc.extra_scopes":"admin.oidc.extra_scopes","admin_oidc.access_cel":"admin.oidc.access_cel",websocket_compression_prepared_message_cache_size:"websocket.compression_prepared_message_cache_size",rpc_proxy_name:"rpc.without_namespace.proxy_name"};class l extends r.Component{constructor(){super(),this.onChange=this.onChange.bind(this),this.onClick=this.onClick.bind(this),this.state={config:null,output:"Here will be configuration for v6",logs:"Here will be log of changes made in your config"}}onClick(e){if(!this.state.config)return void alert("Provide a configuration");const t=this.state.config,{newEnvVars:n,log:s}=function(e,t){const n=[],s=[],_=e.split("\n").reduce(((e,t)=>{const n=t.trim();if(!n)return e;const[s,_]=n.split("=");return e[s]=_?_.replace(/"/g,""):"",e}),{});for(const[i,r]of Object.entries(t)){const e=`CENTRIFUGO_${i.toUpperCase().replace(/\./g,"_")}`;if(e in _){const t=`CENTRIFUGO_${r.toUpperCase().replace(/\./g,"_")}`;n.push(`${t}="${_[e]}"`),s.push(`Transformed "${e}" to "${t}" with value "${_[e]}"`)}}return{newEnvVars:n.join("\n"),log:s}}(t,o);this.setState({output:n}),this.setState({logs:JSON.stringify(s,null,"  ")})}onChange(e){this.setState({config:e.target.value})}render(){return(0,_.jsxs)("div",{children:[(0,_.jsx)("textarea",{onChange:this.onChange,placeholder:"Paste your Centrifugo v5 env config here, then press Convert button",style:{width:"100%",height:"300px",border:"2px solid #ccc"}}),(0,_.jsx)("button",{onClick:this.onClick,children:"Convert"}),(0,_.jsx)("pre",{style:{marginTop:"10px"},children:this.state.output}),(0,_.jsx)("pre",{style:{marginTop:"10px"},children:this.state.logs})]})}}const p={id:"migration_v6",title:"Migrating to v6"},u=void 0,h={},m=[{value:"Migrating server configuration",id:"migrating-server-configuration",level:2},{value:"Configuration file converter",id:"configuration-file-converter",level:3},{value:"Environment variable converter",id:"environment-variable-converter",level:3},{value:"Alternative way to get environment vars",id:"alternative-way-to-get-environment-vars",level:3},{value:"SockJS transport migration",id:"sockjs-transport-migration",level:2},{value:"Tarantool engine migration",id:"tarantool-engine-migration",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(t.p,{children:"In this chapter we help to migrate from Centrifugo v5 to Centrifugo v6."}),"\n",(0,_.jsx)(t.h2,{id:"migrating-server-configuration",children:"Migrating server configuration"}),"\n",(0,_.jsx)(t.p,{children:"Server configuration refactoring was the main focus of Centrifugo v6 development, and below we concentrate on helping you with the process of adopting the new configuration layout in your application."}),"\n",(0,_.jsx)(t.h3,{id:"configuration-file-converter",children:"Configuration file converter"}),"\n",(0,_.jsx)(t.p,{children:"The number of changes in configuration is too big to describe, so to help you with the migration process of configuration file we provide a configuration converter tool."}),"\n",(0,_.jsx)(t.p,{children:"Paste the JSON config of Centrifugo v5 in the textarea below \u2013 and you will get the JSON config for Centrifugo v6."}),"\n",(0,_.jsx)(t.admonition,{type:"caution",children:(0,_.jsx)(t.p,{children:"Do not blindly deploy things to production \u2013 test your system first, go through the possible usage scenarios, run test cases. The converter is best-effort and does not cover some configuration cases."})}),"\n",(0,_.jsxs)(t.admonition,{type:"tip",children:[(0,_.jsx)(t.p,{children:"If you are using TOML or YAML configuration formats \u2013 you can transform them to JSON using some third-party converters, then put JSON here, then convert the new configuration back to YAML or TOML."}),(0,_.jsxs)(t.p,{children:["There are many online converters. For example, convert ",(0,_.jsx)(t.a,{href:"https://onlineyamltools.com/convert-yaml-to-json",children:"YAML to JSON"})," or ",(0,_.jsx)(t.a,{href:"https://toml-to-json.matiaskorhonen.fi/",children:"TOML to JSON"}),"."]})]}),"\n",(0,_.jsx)(t.admonition,{type:"tip",children:(0,_.jsx)(t.p,{children:"This converter is fully client-side: your data won't be sent anywhere."})}),"\n","\n",(0,_.jsx)(c,{}),"\n",(0,_.jsx)(t.h3,{id:"environment-variable-converter",children:"Environment variable converter"}),"\n",(0,_.jsxs)(t.p,{children:["In addition to configuration file converter we are trying to help migrating environment configuration using the converter below. The converter is also ",(0,_.jsx)(t.strong,{children:"just a best-effort (it can convert things only partly for you, please follow the new docs and do tests), fully client-side"}),"."]}),"\n",(0,_.jsx)(t.p,{children:"Insert environment configuration in a format:"}),"\n",(0,_.jsx)(t.pre,{children:(0,_.jsx)(t.code,{children:'CENTRIFUGO_OPTION1="value"\nCENTRIFUGO_OPTION2="value"\n'})}),"\n","\n",(0,_.jsx)(l,{}),"\n",(0,_.jsx)(t.h3,{id:"alternative-way-to-get-environment-vars",children:"Alternative way to get environment vars"}),"\n",(0,_.jsxs)(t.p,{children:["One alternative way to get environment variables in Centrifugo v6 is to use new ",(0,_.jsx)(t.code,{children:"defaultenv"})," configuration command and use config file as a base."]}),"\n",(0,_.jsxs)(t.p,{children:["In this case, you follow Centrifugo v6 docs which contains many config examples, create ",(0,_.jsx)(t.code,{children:"config.json"})," file, and then you can run ",(0,_.jsx)(t.code,{children:"defaultenv"})," command with ",(0,_.jsx)(t.code,{children:"--base"})," and ",(0,_.jsx)(t.code,{children:"--base-non-zero-only"})," options to only output environment variables for values which were non zero in base config file. For example, let's say you have Centrifugo v6 configuration:"]}),"\n",(0,_.jsx)(t.pre,{children:(0,_.jsx)(t.code,{className:"language-json",metastring:'title="config.json"',children:'{\n  "client": {\n    "allowed_origins": ["http://localhost:8000"]\n  },\n  "engine": {\n    "type": "redis",\n    "redis": {\n        "address": "redis://localhost:6379"\n    }\n  }\n}\n'})}),"\n",(0,_.jsx)(t.p,{children:"Running:"}),"\n",(0,_.jsx)(t.pre,{children:(0,_.jsx)(t.code,{className:"language-bash",children:"centrifugo defaultenv --base config.json --base-non-zero-only\n"})}),"\n",(0,_.jsx)(t.p,{children:"Will output only variables set in config file:"}),"\n",(0,_.jsx)(t.pre,{children:(0,_.jsx)(t.code,{children:'CENTRIFUGO_CLIENT_ALLOWED_ORIGINS="http://localhost:8000"\nCENTRIFUGO_ENGINE_REDIS_ADDRESS="redis://localhost:6379"\nCENTRIFUGO_ENGINE_TYPE="redis"\n'})}),"\n",(0,_.jsx)(t.h2,{id:"sockjs-transport-migration",children:"SockJS transport migration"}),"\n",(0,_.jsxs)(t.p,{children:["Deprecated SockJS transport ",(0,_.jsx)(t.a,{href:"/blog/2025/01/16/centrifugo-v6-released#removing-sockjs",children:"was removed in Centrifugo v6"}),", you need to switch to ",(0,_.jsx)(t.a,{href:"/docs/transports/overview",children:"supported transports"}),". Note, Centrifugo also provides its own WebSocket emulation layer (which is more effective than SockJS and natively supported by our Javascript SDK without third-party requirements) \u2013 so you still have an option for automatic WebSocket fallback with Centrifugo."]}),"\n",(0,_.jsxs)(t.p,{children:["To enable Centrifugo built-in bidirectional emulation you need to enable ",(0,_.jsx)(t.a,{href:"/docs/transports/http_stream",children:"HTTP streaming"})," or ",(0,_.jsx)(t.a,{href:"/docs/transports/sse",children:"SSE"})," transports in server configuration, then configure ",(0,_.jsx)(t.code,{children:"centrifuge-js"})," to use those ",(0,_.jsx)(t.a,{href:"https://github.com/centrifugal/centrifuge-js?tab=readme-ov-file#http-based-websocket-fallbacks",children:"as described here"}),":"]}),"\n",(0,_.jsx)(t.pre,{children:(0,_.jsx)(t.code,{className:"language-javascript",children:"const transports = [\n    {\n        transport: 'websocket',\n        endpoint: 'ws://localhost:8000/connection/websocket'\n    },\n    {\n        transport: 'http_stream',\n        endpoint: 'http://localhost:8000/connection/http_stream'\n    },\n    {\n        transport: 'sse',\n        endpoint: 'http://localhost:8000/connection/sse'\n    }\n];\nconst centrifuge = new Centrifuge(transports);\ncentrifuge.connect()\n"})}),"\n",(0,_.jsx)(t.h2,{id:"tarantool-engine-migration",children:"Tarantool engine migration"}),"\n",(0,_.jsxs)(t.p,{children:["Tarantool experimental engine ",(0,_.jsx)(t.a,{href:"/blog/2025/01/16/centrifugo-v6-released#removing-tarantool",children:"was removed in Centrifugo v6"}),", so you need to migrate to supported engines described in ",(0,_.jsx)(t.a,{href:"/docs/server/engines",children:"Engines and Scalability"})," doc, i.e. choose from:"]}),"\n",(0,_.jsxs)(t.ul,{children:["\n",(0,_.jsx)(t.li,{children:"In memory Engine \u2013 ultrafast, but keeps data in Centrifugo process memory so publication history is lost on restart. And only one Centrifugo node can be used."}),"\n",(0,_.jsx)(t.li,{children:"Redis Engine (Redis-compatible storages are supported also) - allows scaling Centrifugo nodes, data is kept in Redis so survives Centrifugo restarts."}),"\n",(0,_.jsx)(t.li,{children:"Nats broker (supports at most once PUB/SUB, but does not support history/recovery features of Centrifugo)."}),"\n"]})]})}function y(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,_.jsx)(t,{...e,children:(0,_.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var s=n(96540);const _={},i=s.createContext(_);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(_):e.components||_:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);
"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[2469],{3905:(t,e,n)=>{n.d(e,{Zo:()=>s,kt:()=>k});var a=n(7294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var d=a.createContext({}),p=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},s=function(t){var e=p(t.components);return a.createElement(d.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,d=t.parentName,s=o(t,["components","mdxType","originalType","parentName"]),m=p(n),k=i,N=m["".concat(d,".").concat(k)]||m[k]||u[k]||r;return n?a.createElement(N,l(l({ref:e},s),{},{components:n})):a.createElement(N,l({ref:e},s))}));function k(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o.mdxType="string"==typeof t?t:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9323:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={id:"push_notifications",sidebar_label:"Push notification API",title:"Push notification API"},l=void 0,o={unversionedId:"pro/push_notifications",id:"pro/push_notifications",title:"Push notification API",description:"This PRO feature is under active development, some changes expected here \ud83d\udea7",source:"@site/docs/pro/push_notifications.md",sourceDirName:"pro",slug:"/pro/push_notifications",permalink:"/docs/pro/push_notifications",draft:!1,editUrl:"https://github.com/centrifugal/centrifugal.dev/edit/main/docs/pro/push_notifications.md",tags:[],version:"current",frontMatter:{id:"push_notifications",sidebar_label:"Push notification API",title:"Push notification API"},sidebar:"Pro",previous:{title:"Operation throttling",permalink:"/docs/pro/throttling"},next:{title:"User status API",permalink:"/docs/pro/user_status"}},d={},p=[{value:"Motivation and design choices",id:"motivation-and-design-choices",level:2},{value:"Storage for tokens",id:"storage-for-tokens",level:3},{value:"Efficient queuing",id:"efficient-queuing",level:3},{value:"Unified secure topics",id:"unified-secure-topics",level:3},{value:"Non-obtrusive proxying",id:"non-obtrusive-proxying",level:3},{value:"Builtin analytics",id:"builtin-analytics",level:3},{value:"Steps to integrate",id:"steps-to-integrate",level:2},{value:"Configuration",id:"configuration",level:2},{value:"FCM",id:"fcm",level:3},{value:"HMS",id:"hms",level:3},{value:"APNs",id:"apns",level:3},{value:"Other options",id:"other-options",level:3},{value:"push_notifications.max_inactive_device_days",id:"push_notificationsmax_inactive_device_days",level:4},{value:"Use PostgreSQL as queue",id:"use-postgresql-as-queue",level:3},{value:"API description",id:"api-description",level:2},{value:"device_register",id:"device_register",level:3},{value:"device_register request",id:"device_register-request",level:4},{value:"device_register result",id:"device_register-result",level:4},{value:"device_update",id:"device_update",level:3},{value:"device_update request",id:"device_update-request",level:4},{value:"device_update result",id:"device_update-result",level:4},{value:"device_remove",id:"device_remove",level:3},{value:"device_remove request",id:"device_remove-request",level:4},{value:"device_remove result",id:"device_remove-result",level:4},{value:"device_list",id:"device_list",level:3},{value:"device_list request",id:"device_list-request",level:4},{value:"device_list result",id:"device_list-result",level:4},{value:"device_topic_update",id:"device_topic_update",level:3},{value:"device_topic_update request",id:"device_topic_update-request",level:4},{value:"device_topic_update result",id:"device_topic_update-result",level:4},{value:"device_topic_list",id:"device_topic_list",level:3},{value:"device_topic_list request",id:"device_topic_list-request",level:4},{value:"device_topic_list result",id:"device_topic_list-result",level:4},{value:"user_topic_update",id:"user_topic_update",level:3},{value:"user_topic_update request",id:"user_topic_update-request",level:4},{value:"user_topic_update result",id:"user_topic_update-result",level:4},{value:"user_topic_list",id:"user_topic_list",level:3},{value:"user_topic_list request",id:"user_topic_list-request",level:4},{value:"user_topic_list result",id:"user_topic_list-result",level:4},{value:"send_push_notification",id:"send_push_notification",level:3},{value:"send_push_notification request",id:"send_push_notification-request",level:4},{value:"send_push_notification result",id:"send_push_notification-result",level:4},{value:"update_push_status",id:"update_push_status",level:3},{value:"update_push_status request",id:"update_push_status-request",level:4},{value:"update_push_status result",id:"update_push_status-result",level:4},{value:"Metrics",id:"metrics",level:2},{value:"Further reading and tutorials",id:"further-reading-and-tutorials",level:2}],s={toc:p};function u(t){let{components:e,...r}=t;return(0,i.kt)("wrapper",(0,a.Z)({},s,r,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This PRO feature is under active development, some changes expected here \ud83d\udea7"),(0,i.kt)("p",null,"Centrifugo excels in delivering real-time in-app messages to online users. Sometimes though you need a way to engage offline users to come back to your app. Or trigger some update in the app while it's running in the background. That's where push notifications may be used. Push notifications delivered over battery-efficient platform-dependent transport."),(0,i.kt)("p",null,"With Centrifugo PRO push notifications may be delivered to all popular application platforms:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("i",{className:"bi bi-android2",style:{color:"yellowgreen"}})," Android devices"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("i",{className:"bi bi-apple",style:{color:"cornflowerblue"}})," iOS devices"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("i",{className:"bi bi-globe",style:{color:"orange"}})," Web browsers which support Web Push API (Chrome, Firefox, see ",(0,i.kt)("a",{href:"https://caniuse.com/push-api"},"this matrix"),")")),(0,i.kt)("p",null,"Centrifugo PRO provides API to manage user device tokens, device topic subscriptions and API to send push notifications towards registered devices and group of devices (subscribed to a topic)."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Push",src:n(5085).Z,width:"3172",height:"1260"})),(0,i.kt)("p",null,"To deliver push notifications to devices Centrifugo PRO integrates with the following providers:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://firebase.google.com/docs/cloud-messaging"},"Firebase Cloud Messaging (FCM)")," ",(0,i.kt)("i",{className:"bi bi-android2",style:{color:"yellowgreen"}})," ",(0,i.kt)("i",{className:"bi bi-apple",style:{color:"cornflowerblue"}})," ",(0,i.kt)("i",{className:"bi bi-globe",style:{color:"orange"}})),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://developer.huawei.com/consumer/en/hms/huawei-pushkit/"},"Huawei Messaging Service (HMS) Push Kit")," ",(0,i.kt)("i",{className:"bi bi-android2",style:{color:"yellowgreen"}})," ",(0,i.kt)("i",{className:"bi bi-apple",style:{color:"cornflowerblue"}})," ",(0,i.kt)("i",{className:"bi bi-globe",style:{color:"orange"}})),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/documentation/usernotifications"},"Apple Push Notification service (APNs) ")," ",(0,i.kt)("i",{className:"bi bi-apple",style:{color:"cornflowerblue"}}))),(0,i.kt)("p",null,"FCM, HMS, APNs handle the frontend and transport aspects of notification delivery. Device token storage, management and efficient push notification broadcasting is managed by Centrifugo PRO. Tokens are stored in a PostgreSQL database. To facilitate efficient push notification broadcasting towards devices, Centrifugo PRO includes worker queues based on Redis streams (and also provides and option to use PostgreSQL-based queue)."),(0,i.kt)("p",null,"Integration with FCM means that you can use existing Firebase messaging SDKs to extract push notification token for a device on different platforms (iOS, Android, Flutter, web browser) and setting up push notification listeners. The same for HMS and APNs - just use existing native SDKs and best practices on the frontend. Only a couple of additional steps required to integrate frontend with Centrifugo PRO device token and device topic storage. After doing that you will be able to send push notification towards single device, or towards group of devices subscribed to a topic. For example, with a simple Centrifugo API call like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST http://localhost:8000/api/send_push_notification \\\n-H "Authorization: apikey <KEY>" \\\n-d @- <<\'EOF\'\n\n{\n    "recipient": {\n        "filter": {\n            "topics": ["test"]\n        }\n    },\n    "notification": {\n        "fcm": {\n            "message": {\n                "notification": {"title": "Hello", "body": "How are you?"}\n            }\n        }\n    }\n}\nEOF\n')),(0,i.kt)("p",null,"In addition, Centrifugo PRO includes a helpful web UI for inspecting registered devices and sending push notifications:"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(4088).Z,width:"2728",height:"1094"})),(0,i.kt)("h2",{id:"motivation-and-design-choices"},"Motivation and design choices"),(0,i.kt)("p",null,"We tried to be practical with our Push Notification API, let's look at its design choices and implementation properties we were able to achieve."),(0,i.kt)("h3",{id:"storage-for-tokens"},"Storage for tokens"),(0,i.kt)("p",null,"To start delivering push notifications in the application, developers usually need to integrate with providers such as FCM, HMS, and APNs. This integration typically requires the storage of device tokens in the application database and the implementation of sending push messages to provider push services."),(0,i.kt)("p",null,"Centrifugo PRO simplifies the process by providing a backend for device token storage, following best practices in token management. It reacts to errors and periodically removes stale devices/tokens to maintain a working set of device tokens based on provider recommendations."),(0,i.kt)("h3",{id:"efficient-queuing"},"Efficient queuing"),(0,i.kt)("p",null,"Additionally, Centrifugo PRO provides an efficient, scalable queuing mechanism for sending push notifications. Developers can send notifications from the app backend to Centrifugo API with minimal latency and let Centrifugo process sending to FCM, HMS, APNs concurrently using built-in workers. In our tests, we achieved hundreds of thousands of pushes in tens of seconds."),(0,i.kt)("h3",{id:"unified-secure-topics"},"Unified secure topics"),(0,i.kt)("p",null,"FCM and HMS have a built-in way of sending notification to large groups of devices over ",(0,i.kt)("a",{parentName:"p",href:"https://firebase.google.com/docs/cloud-messaging/android/topic-messaging"},"topics")," mechanism (",(0,i.kt)("a",{parentName:"p",href:"https://developer.huawei.com/consumer/en/doc/development/HMS-Plugin-Guides-V1/subscribetopic-0000001056797545-V1"},"the same for HMS"),"). One problem with native FCM or HMS topics though is that client can subscribe to any topic from the frontend side without any permission check. In today's world this is usually not desired. So Centrifugo PRO re-implements FCM, HMS topics by introducing an additional API to manage device subscriptions to topics."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"In some cases you may have real-time channels and device subscription topics with matching names \u2013 to send messages to both online and offline users. Though it's up to you.")),(0,i.kt)("p",null,"Centrifugo PRO device topic subscriptions also add a way to introduce the missing topic semantics for APNs."),(0,i.kt)("p",null,"Centrifugo PRO additionally provides an API to create persistent bindings of user to notification topics. Then \u2013 as soon as user registers a device \u2013 it will be automatically subscribed to its own topics. As soon as user logs out from the app and you update user ID of the device - user topics binded to the device automatically removed/switched. This design solves one of the issues with FCM \u2013 if two different users use the same device it's becoming problematic to unsubscribe the device from large number of topics upon logout. Also, as soon as user to topic binding added (using ",(0,i.kt)("inlineCode",{parentName:"p"},"user_topic_update")," API) \u2013 it will be synchronized across all user active devices. You can still manage such persistent subscriptions on the application backend side if you prefer and provide the full list inside ",(0,i.kt)("inlineCode",{parentName:"p"},"device_register")," call."),(0,i.kt)("h3",{id:"non-obtrusive-proxying"},"Non-obtrusive proxying"),(0,i.kt)("p",null,"Unlike other solutions that combine different provider push sending APIs into a unified API, Centrifugo PRO provides a non-obtrusive proxy for all the mentioned providers. Developers can send notification payloads in a format defined by each provider."),(0,i.kt)("p",null,"It's also possible to send notifications into native FCM, HMS topics or send to raw FCM, HMS, APNs tokens using Centrifugo PRO's push API, allowing them to combine native provider primitives with those added by Centrifugo (i.e., sending to a list of device IDs or to a list of topics)."),(0,i.kt)("h3",{id:"builtin-analytics"},"Builtin analytics"),(0,i.kt)("p",null,"Furthermore, Centrifugo PRO offers the ability to inspect sent push notifications using ",(0,i.kt)("a",{parentName:"p",href:"/docs/pro/analytics#notifications-table"},"ClickHouse analytics"),". Providers may also offer their own analytics, ",(0,i.kt)("a",{parentName:"p",href:"https://firebase.google.com/docs/cloud-messaging/understand-delivery?platform=web"},"such as FCM"),", which provides insight into push notification delivery. Centrifugo PRO also offers a way to analyze push notification delivery and interaction using the ",(0,i.kt)("inlineCode",{parentName:"p"},"update_push_status")," API."),(0,i.kt)("h2",{id:"steps-to-integrate"},"Steps to integrate"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Add provider SDK on the frontend side, follow provider instructions for your platform to obtain a push token for a device. For example, for FCM see instructions for ",(0,i.kt)("a",{parentName:"li",href:"https://firebase.google.com/docs/cloud-messaging/ios/client"},"iOS"),", ",(0,i.kt)("a",{parentName:"li",href:"https://firebase.google.com/docs/cloud-messaging/android/client"},"Android"),", ",(0,i.kt)("a",{parentName:"li",href:"https://firebase.google.com/docs/cloud-messaging/flutter/client"},"Flutter"),", ",(0,i.kt)("a",{parentName:"li",href:"https://firebase.google.com/docs/cloud-messaging/js/client"},"Web Browser"),"). The same for HMS or APNs \u2013 frontend part should be handled by their native SDKs."),(0,i.kt)("li",{parentName:"ol"},"Call Centrifugo PRO backend API with the obtained token. From the application backend call Centrifugo ",(0,i.kt)("inlineCode",{parentName:"li"},"device_register")," API to register the device in Centrifugo PRO storage. Optionally provide list of topics to subscribe device to."),(0,i.kt)("li",{parentName:"ol"},"Centrifugo returns a registered device object. Pass a generated device ID to the frontend and save it on the frontend together with a token received from FCM."),(0,i.kt)("li",{parentName:"ol"},"Call Centrifugo ",(0,i.kt)("inlineCode",{parentName:"li"},"send_push_notification")," API whenever it's time to deliver a push notification.")),(0,i.kt)("p",null,"At any moment you can inspect device storage by calling ",(0,i.kt)("inlineCode",{parentName:"p"},"device_list")," API."),(0,i.kt)("p",null,"Once user logs out from the app, you can detach user ID from device by using ",(0,i.kt)("inlineCode",{parentName:"p"},"device_update")," or remove device with ",(0,i.kt)("inlineCode",{parentName:"p"},"device_remove")," API."),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"In Centrifugo PRO you can configure one push provider or use all of them \u2013 this choice is up to you."),(0,i.kt)("h3",{id:"fcm"},"FCM"),(0,i.kt)("p",null,"As mentioned above Centrifigo uses PostgreSQL for token storage. To enable push notifications make sure ",(0,i.kt)("inlineCode",{parentName:"p"},"database")," section defined in the configration and ",(0,i.kt)("inlineCode",{parentName:"p"},"fcm")," is in the ",(0,i.kt)("inlineCode",{parentName:"p"},"push_notifications.enabled_providers")," list. Centrifugo PRO uses Redis for queuing push notification requests, so Redis address should be configured also. Finally, to integrate with FCM a path to the credentials file must be provided (see how to create one ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Catapush/catapush-docs/blob/master/AndroidSDK/DOCUMENTATION_PLATFORM_GMS_FCM.md"},"in this instruction"),"). So the full configuration to start sending push notifications over FCM may look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...\n    "database": {\n        "dsn": "postgresql://postgres:pass@127.0.0.1:5432/postgres"\n    },\n    "push_notifications": {\n        "redis_address": "localhost:6379",\n        "enabled_providers": ["fcm"],\n        "fcm_credentials_file_path": "/path/to/service/account/credentials.json"\n    }\n}\n')),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Actually, PostgreSQL database configuration is optional here \u2013 you can use push notifications API without it. In this case you will be able to send notifications to FCM, HMS, APNs raw tokens, FCM and HMS native topics and conditions. I.e. using Centrifugo as an efficient proxy for push notifications (for example if you already keep tokens in your database). But sending to device ids and topics, and token/topic management APIs won't be available for usage.")),(0,i.kt)("h3",{id:"hms"},"HMS"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...\n    "database": {\n        "dsn": "postgresql://postgres:pass@127.0.0.1:5432/postgres"\n    },\n    "push_notifications": {\n        "redis_address": "localhost:6379",\n        "enabled_providers": ["hms"],\n        "hms_app_id": "<your_app_id>",\n        "hms_app_secret": "<your_app_secret>",\n    }\n}\n')),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"See example how to get app id and app secret ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Catapush/catapush-docs/blob/master/AndroidSDK/DOCUMENTATION_PLATFORM_HMS_PUSHKIT.md"},"here"),".")),(0,i.kt)("h3",{id:"apns"},"APNs"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...\n    "database": {\n        "dsn": "postgresql://postgres:pass@127.0.0.1:5432/postgres"\n    },\n    "push_notifications": {\n        "redis_address": "localhost:6379",\n        "enabled_providers": ["apns"],\n        "apns_endpoint": "development",\n        "apns_bundle_id": "com.example.your_app",\n        "apns_auth": "token",\n        "apns_token_auth_key_path": "/path/to/auth/key/file.p8",\n        "apns_token_key_id": "<your_key_id>",\n        "apns_token_team_id": "your_team_id",\n    }\n}\n')),(0,i.kt)("p",null,"We also support auth over p12 certificates with the following options:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"push_notifications.apns_cert_p12_path")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"push_notifications.apns_cert_p12_b64")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"push_notifications.apns_cert_p12_password"))),(0,i.kt)("h3",{id:"other-options"},"Other options"),(0,i.kt)("h4",{id:"push_notificationsmax_inactive_device_days"},"push_notifications.max_inactive_device_days"),(0,i.kt)("p",null,"This option configures the number of days to keep device without updates. By default Centrifugo does not remove inactive devices."),(0,i.kt)("h3",{id:"use-postgresql-as-queue"},"Use PostgreSQL as queue"),(0,i.kt)("p",null,"Centrifugo PRO utilizes Redis Streams as the default queue engine for push notifications. However, it also offers the option to employ PostgreSQL for queuing. It's as simple as:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="config.json"',title:'"config.json"'},'{\n    ...\n    "database": {\n        "dsn": "postgresql://postgres:pass@127.0.0.1:5432/postgres"\n    },\n    "push_notifications": {\n        "queue_engine": "database",\n        // rest of the options...\n    }\n}\n')),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Queue based on Redis streams is generally more efficient, so if you start with PostgreSQL based queue \u2013 you have an option to switch to a more performant implementation later. Though in-flight and currently queued push notifications will be lost during a switch.")),(0,i.kt)("h2",{id:"api-description"},"API description"),(0,i.kt)("h3",{id:"device_register"},"device_register"),(0,i.kt)("p",null,"Registers or updates device information."),(0,i.kt)("h4",{id:"device_register-request"},"device_register request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"ID of the device being registered (provide it when updating).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"provider")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Provider of the device token (valid choices: ",(0,i.kt)("inlineCode",{parentName:"td"},"fcm"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"hms"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"apns"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"token")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Push notification token for the device.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"platform")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Platform of the device (valid choices: ",(0,i.kt)("inlineCode",{parentName:"td"},"ios"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"android"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"web"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"user")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"User associated with the device.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"array of strings"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Device topic subscriptions. This should be a full list which replaces all the topics previously accociated with the device. User topics managed by ",(0,i.kt)("inlineCode",{parentName:"td"},"UserTopic")," model will be automatically attached.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"meta")),(0,i.kt)("td",{parentName:"tr",align:null},"map<string, string>"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Additional custom metadata for the device")))),(0,i.kt)("h4",{id:"device_register-result"},"device_register result"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"The device ID that was registered/updated.")))),(0,i.kt)("h3",{id:"device_update"},"device_update"),(0,i.kt)("p",null,"Call this method to update device. For example, when user logs out the app and you need to detach user ID from the device."),(0,i.kt)("h4",{id:"device_update-request"},"device_update request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ids")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Device ids to filter")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"users")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Device users filter")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"user_update")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DeviceUserUpdate")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional user update object")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"meta_update")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DeviceMetaUpdate")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional device meta update object")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics_update")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DeviceTopicsUpdate")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional topics update object")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DeviceUserUpdate"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"user")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"User to set")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DeviceMetaUpdate"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"meta")),(0,i.kt)("td",{parentName:"tr",align:null},"map<string, string>"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Meta to set")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DeviceTopicsUpdate"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"op")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Operation to make: ",(0,i.kt)("inlineCode",{parentName:"td"},"add"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"remove")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"set"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Topics for the operation")))),(0,i.kt)("h4",{id:"device_update-result"},"device_update result"),(0,i.kt)("p",null,"Empty object."),(0,i.kt)("h3",{id:"device_remove"},"device_remove"),(0,i.kt)("p",null,"Removes device from storage. This may be also called when user logs out the app and you don't need its device token after that."),(0,i.kt)("h4",{id:"device_remove-request"},"device_remove request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ids")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"A list of device IDs to be removed")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"users")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"A list of device user IDs to filter devices to remove")))),(0,i.kt)("h4",{id:"device_remove-result"},"device_remove result"),(0,i.kt)("p",null,"Empty object."),(0,i.kt)("h3",{id:"device_list"},"device_list"),(0,i.kt)("p",null,"Returns a paginated list of registered devices according to request filter conditions."),(0,i.kt)("h4",{id:"device_list-request"},"device_list request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"filter")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DeviceFilter")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"How to filter results")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cursor")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Cursor for pagination (last device id in previous batch, empty for first page).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"limit")),(0,i.kt)("td",{parentName:"tr",align:null},"int32"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Maximum number of devices to retrieve.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"include_total_count")),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag indicating whether to include total count for the current filter.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"include_topics")),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag indicating whether to include topics information for each device.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"include_meta")),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag indicating whether to include meta information for each device.")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DeviceFilter"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ids")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device IDs to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"providers")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device token providers to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"platforms")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device platforms to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"users")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device users to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of topics to filter results.")))),(0,i.kt)("h4",{id:"device_list-result"},"device_list result"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"items")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated ",(0,i.kt)("inlineCode",{parentName:"td"},"Device")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"A list of devices")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"next_cursor")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Cursor string for retreiving the next page, if not set - then no next page exists")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"total_count")),(0,i.kt)("td",{parentName:"tr",align:null},"integer"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Total count value (if ",(0,i.kt)("inlineCode",{parentName:"td"},"include_total_count")," used)")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Device"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"The device's ID.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"provider")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"The device's token provider.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"token")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"The device's token.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"platform")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"The device's platform.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"user")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"The user associated with the device.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"array of strings"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Only included if ",(0,i.kt)("inlineCode",{parentName:"td"},"include_topics")," was true")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"meta")),(0,i.kt)("td",{parentName:"tr",align:null},"map<string, string>"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Only included if ",(0,i.kt)("inlineCode",{parentName:"td"},"include_meta")," was true")))),(0,i.kt)("h3",{id:"device_topic_update"},"device_topic_update"),(0,i.kt)("p",null,"Manage mapping of device to topics."),(0,i.kt)("h4",{id:"device_topic_update-request"},"device_topic_update request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Device ID.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"op")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"add")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"remove")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"set"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of topics.")))),(0,i.kt)("h4",{id:"device_topic_update-result"},"device_topic_update result"),(0,i.kt)("p",null,"Empty object."),(0,i.kt)("h3",{id:"device_topic_list"},"device_topic_list"),(0,i.kt)("p",null,"List device to topic mapping."),(0,i.kt)("h4",{id:"device_topic_list-request"},"device_topic_list request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"filter")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DeviceTopicFilter")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device IDs to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cursor")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Cursor for pagination (last device id in previous batch, empty for first page).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"limit")),(0,i.kt)("td",{parentName:"tr",align:null},"int32"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Maximum number of devices to retrieve.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"include_device")),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag indicating whether to include Device information for each object.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"include_total_count")),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag indicating whether to include total count info to response.")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DeviceTopicFilter"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_ids")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device IDs to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_providers")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device token providers to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_platforms")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device platforms to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_users")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of device users to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of topics to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topic_prefix")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Topic prefix to filter results.")))),(0,i.kt)("h4",{id:"device_topic_list-result"},"device_topic_list result"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"items")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated ",(0,i.kt)("inlineCode",{parentName:"td"},"DeviceTopic")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"A list of DeviceChannel objects")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"next_cursor")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Cursor string for retreiving the next page, if not set - then no next page exists")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"total_count")),(0,i.kt)("td",{parentName:"tr",align:null},"integer"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Total count value (if ",(0,i.kt)("inlineCode",{parentName:"td"},"include_total_count")," used)")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DeviceTopic"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"ID of DeviceTopic object")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Device ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topic")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Topic")))),(0,i.kt)("h3",{id:"user_topic_update"},"user_topic_update"),(0,i.kt)("p",null,"Manage mapping of topics with users. These user topics will be automatically attached to user devices upon registering. And removed from device upon deattaching user."),(0,i.kt)("h4",{id:"user_topic_update-request"},"user_topic_update request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"user")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"User ID.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"op")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"add")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"remove")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"set"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of topics.")))),(0,i.kt)("h4",{id:"user_topic_update-result"},"user_topic_update result"),(0,i.kt)("p",null,"Empty object."),(0,i.kt)("h3",{id:"user_topic_list"},"user_topic_list"),(0,i.kt)("p",null,"List user to topic mapping."),(0,i.kt)("h4",{id:"user_topic_list-request"},"user_topic_list request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"flter")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"UserTopicFilter")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Filter object.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cursor")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Cursor for pagination (last id in previous batch, empty for first page).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"limit")),(0,i.kt)("td",{parentName:"tr",align:null},"int32"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Maximum number of ",(0,i.kt)("inlineCode",{parentName:"td"},"UserTopic")," objects to retrieve.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"include_total_count")),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag indicating whether to include total count info to response.")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"UserTopicFilter"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"users")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of users to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topics")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"List of topics to filter results.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topic_prefix")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Channel prefix to filter results.")))),(0,i.kt)("h4",{id:"user_topic_list-result"},"user_topic_list result"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"items")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated ",(0,i.kt)("inlineCode",{parentName:"td"},"UserTopic")),(0,i.kt)("td",{parentName:"tr",align:null},"A list of UserTopic objects")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"next_cursor")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"total_count")),(0,i.kt)("td",{parentName:"tr",align:null},"integer"),(0,i.kt)("td",{parentName:"tr",align:null},"No")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"UserTopic"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"ID of ",(0,i.kt)("inlineCode",{parentName:"td"},"UserTopic"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"user")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"User ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"topic")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Topic")))),(0,i.kt)("h3",{id:"send_push_notification"},"send_push_notification"),(0,i.kt)("p",null,"Send push notification to specific ",(0,i.kt)("inlineCode",{parentName:"p"},"device_ids"),", or to ",(0,i.kt)("inlineCode",{parentName:"p"},"topics"),", or native provider identifiers like ",(0,i.kt)("inlineCode",{parentName:"p"},"fcm_tokens"),", or to ",(0,i.kt)("inlineCode",{parentName:"p"},"fcm_topic"),". Request will be queued by Centrifugo, consumed by Centrifugo built-in workers and sent to the provider API."),(0,i.kt)("h4",{id:"send_push_notification-request"},"send_push_notification request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"recipient")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"PushRecipient")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Recipient of push notification")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"notification")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"PushNotification")),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Push notification to send")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"PushRecipient")," (you ",(0,i.kt)("strong",{parentName:"p"},"must set only one of the following fields"),"):"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"filter")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DeviceFilter")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to device IDs based on Centrifugo device storage filter")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fcm_tokens")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a list of FCM native tokens")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fcm_topic")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a FCM native topic")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fcm_condition")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a FCM native condition")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hms_tokens")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a list of HMS native tokens")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hms_topic")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a HMS native topic")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hms_condition")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a HMS native condition")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"apns_tokens")),(0,i.kt)("td",{parentName:"tr",align:null},"repeated string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Send to a list of APNs native tokens")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"PushNotification"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"uid")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Unique send id, used for Centrifugo builtin analytics")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"expire_at")),(0,i.kt)("td",{parentName:"tr",align:null},"int64"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Unix timestamp when Centrifugo stops attempting to send this notification. Note, it's Centrifugo specific and does not relate to notification TTL fields. We generally recommend to always set this to a reasonable value to protect your app from old push notifications sending")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fcm")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"FcmPushNotification")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Notification for FCM")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hms")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"HmsPushNotification")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Notification for HMS")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"apns")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ApnsPushNotification")),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Notification for APNs")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"FcmPushNotification"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"message")),(0,i.kt)("td",{parentName:"tr",align:null},"JSON object"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"FCM ",(0,i.kt)("a",{parentName:"td",href:"https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages#Message"},"Message")," described in FCM docs.")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"HmsPushNotification"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"message")),(0,i.kt)("td",{parentName:"tr",align:null},"JSON object"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"HMS ",(0,i.kt)("a",{parentName:"td",href:"https://developer.huawei.com/consumer/en/doc/development/HMSCore-References/https-send-api-0000001050986197#EN-US_TOPIC_0000001134031085__p1324218481619"},"Message")," described in HMS Push Kit docs.")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ApnsPushNotification"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"headers")),(0,i.kt)("td",{parentName:"tr",align:null},"map<string, string>"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"APNs ",(0,i.kt)("a",{parentName:"td",href:"https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/sending_notification_requests_to_apns"},"headers"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"payload")),(0,i.kt)("td",{parentName:"tr",align:null},"JSON object"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"APNs ",(0,i.kt)("a",{parentName:"td",href:"https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification"},"payload"))))),(0,i.kt)("h4",{id:"send_push_notification-result"},"send_push_notification result"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"uid")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Unique send id, matches ",(0,i.kt)("inlineCode",{parentName:"td"},"uid")," in request if it was provided")))),(0,i.kt)("h3",{id:"update_push_status"},"update_push_status"),(0,i.kt)("p",null,"This API call is experimental, some changes may happen here."),(0,i.kt)("p",null,"Centrifugo PRO also allows tracking status of push notification delivery and interaction. It's possible to use ",(0,i.kt)("inlineCode",{parentName:"p"},"update_push_status")," API to save the updated status of push notification to the ",(0,i.kt)("inlineCode",{parentName:"p"},"notifications")," ",(0,i.kt)("a",{parentName:"p",href:"/docs/pro/analytics#notifications-table"},"analytics table"),". Then it's possible to build insights into push notification effectiveness by querying the table."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"update_push_status")," API supposes that you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"uid")," field with each notification sent and you are using Centrifugo PRO generated device IDs (as described in ",(0,i.kt)("a",{parentName:"p",href:"#steps-to-integrate"},"steps to integrate"),")."),(0,i.kt)("p",null,"This is a part of server API at the moment, so you need to proxy requests to this endpoint over your backend. We can consider making this API suitable for requests from the client side \u2013 please reach out if your use case requires it."),(0,i.kt)("h4",{id:"update_push_status-request"},"update_push_status request"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"uid")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"uid")," (unique send id) from ",(0,i.kt)("inlineCode",{parentName:"td"},"send_push_notification"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"status")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Status of push notification - ",(0,i.kt)("inlineCode",{parentName:"td"},"delivered")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"interacted"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"device_id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Device ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"msg_id")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"Message ID")))),(0,i.kt)("h4",{id:"update_push_status-result"},"update_push_status result"),(0,i.kt)("p",null,"Empty object."),(0,i.kt)("h2",{id:"metrics"},"Metrics"),(0,i.kt)("p",null,"Several metrics are available to monitor the state of Centrifugo push worker system:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"centrifugo_push_notification_count")," - counter, shows total count of push notifications sent to providers (splitted by provider, recipient type, platform, success, error code)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"centrifugo_push_queue_consuming_lag")," - gauge, shows the lag of queues, should be close to zero most of the time. Splitted by provider and name of queue."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"centrifugo_push_consuming_inflight_jobs")," - gauge, shows immediate number of workers proceccing pushes. Splitted by provider and name of queue."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"centrifugo_push_job_duration_seconds")," - summary, provides insights about worker job duration timings. Splitted by provider and recipient type.")),(0,i.kt)("h2",{id:"further-reading-and-tutorials"},"Further reading and tutorials"),(0,i.kt)("p",null,"Coming soon."))}u.isMDXComponent=!0},5085:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/push_notifications-b625f9f23cee5e6bfed9b18bb15631b1.png"},4088:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/push_ui-01989161306e71d882a064b605395dcb.png"}}]);
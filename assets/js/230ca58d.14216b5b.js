"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[1171],{15083:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>p});const o=JSON.parse('{"id":"pro/performance","title":"Faster performance","description":"Centrifugo PRO has performance improvements for several server parts. These improvements can help to reduce tail end-to-end latencies in the application, increase server throughput and/or reduce CPU usage on server machines. Our open-source version has a decent performance by itself, with PRO improvements Cenrifugo steps even further.","source":"@site/docs/pro/performance.md","sourceDirName":"pro","slug":"/pro/performance","permalink":"/docs/pro/performance","draft":false,"unlisted":false,"editUrl":"https://github.com/centrifugal/centrifugal.dev/edit/main/docs/pro/performance.md","tags":[],"version":"current","frontMatter":{"id":"performance","title":"Faster performance"},"sidebar":"Pro","previous":{"title":"Delta for at most once","permalink":"/docs/pro/delta_at_most_once"},"next":{"title":"Scalability optimizations","permalink":"/docs/pro/scalability"}}');var n=i(74848),s=i(28453);const t={id:"performance",title:"Faster performance"},a=void 0,c={},p=[{value:"Faster HTTP API",id:"faster-http-api",level:2},{value:"Faster GRPC API",id:"faster-grpc-api",level:2},{value:"Faster HTTP proxy",id:"faster-http-proxy",level:2},{value:"Faster GRPC proxy",id:"faster-grpc-proxy",level:2},{value:"Faster JWT decoding",id:"faster-jwt-decoding",level:2},{value:"Faster GRPC unidirectional stream",id:"faster-grpc-unidirectional-stream",level:2},{value:"WebSocket compression optimizations",id:"websocket-compression-optimizations",level:2},{value:"Examples",id:"examples",level:2},{value:"Publish HTTP API",id:"publish-http-api",level:3},{value:"History HTTP API",id:"history-http-api",level:3}];function l(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:"/img/logo_animated_fast.svg",width:"100px",height:"100px",align:"left",style:{marginRight:"10px",float:"left"}}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has performance improvements for several server parts. These improvements can help to reduce tail end-to-end latencies in the application, increase server throughput and/or reduce CPU usage on server machines. Our open-source version has a decent performance by itself, with PRO improvements Cenrifugo steps even further."}),"\n",(0,n.jsx)(r.h2,{id:"faster-http-api",children:"Faster HTTP API"}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has an optimized JSON serialization/deserialization for HTTP API."}),"\n",(0,n.jsx)(r.p,{children:"The effect can be noticeable under load. The exact numbers heavily depend on usage scenario. According to our benchmarks you can expect 10-15% more requests/sec for small message publications over HTTP API, and up to several times throughput boost when you are frequently get lots of messages from a history, see a couple of examples below."}),"\n",(0,n.jsx)(r.h2,{id:"faster-grpc-api",children:"Faster GRPC API"}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has an optimized Protobuf serialization/deserialization for GRPC API. The effect can be noticeable under load. The exact numbers heavily depend on usage scenario."}),"\n",(0,n.jsx)(r.h2,{id:"faster-http-proxy",children:"Faster HTTP proxy"}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has an optimized JSON serialization/deserialization for HTTP proxy. The effect can be noticeable under load. The exact numbers heavily depend on usage scenario."}),"\n",(0,n.jsx)(r.h2,{id:"faster-grpc-proxy",children:"Faster GRPC proxy"}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has an optimized Protobuf serialization/deserialization for GRPC API. The effect can be noticeable under load. The exact numbers heavily depend on usage scenario."}),"\n",(0,n.jsx)(r.h2,{id:"faster-jwt-decoding",children:"Faster JWT decoding"}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has an optimized decoding of JWT claims."}),"\n",(0,n.jsx)(r.h2,{id:"faster-grpc-unidirectional-stream",children:"Faster GRPC unidirectional stream"}),"\n",(0,n.jsx)(r.p,{children:"Centrifugo PRO has an optimized Protobuf deserialization for GRPC unidirectional stream. This only affects deserialization of initial connect command."}),"\n",(0,n.jsx)(r.h2,{id:"websocket-compression-optimizations",children:"WebSocket compression optimizations"}),"\n",(0,n.jsxs)(r.p,{children:["Centrifugo PRO provides an integer option ",(0,n.jsx)(r.code,{children:"websocket.compression_prepared_message_size"})," (in bytes, default ",(0,n.jsx)(r.code,{children:"0"}),") which when set to a value > 0 tells Centrifugo to use a cache or prepared websocket messages when working with connections with WebSocket compression negotiated."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-json",metastring:'title="config.json"',children:'{\n  "websocket": {\n    "compression_prepared_message_size": 10485760\n  }\n}\n'})}),"\n",(0,n.jsxs)(r.p,{children:["This can significantly improve CPU and memory Centrifufo resource usage when using ",(0,n.jsx)(r.a,{href:"/docs/transports/websocket#websocketcompression",children:"WebSocket compression feature"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["Check out blog post ",(0,n.jsx)(r.a,{href:"/blog/2024/08/19/optimizing-websocket-compression",children:"Performance optimizations of WebSocket compression in Go application"})," which describes the possible effect of this optimization."]}),"\n",(0,n.jsx)(r.h2,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(r.p,{children:"Let's look at quick live comparisons of Centrifugo OSS and Centrifugo PRO regarding HTTP API performance."}),"\n",(0,n.jsx)(r.h3,{id:"publish-http-api",children:"Publish HTTP API"}),"\n",(0,n.jsxs)("video",{width:"100%",controls:!0,children:[(0,n.jsx)("source",{src:"/img/pro_api_publish_perf.mp4",type:"video/mp4"}),(0,n.jsx)(r.p,{children:"Sorry, your browser doesn't support embedded video."})]}),"\n",(0,n.jsx)(r.p,{children:"In this video you can see a 13% speed up for publish operation. But for more complex API calls with larger payloads the difference can be much bigger. See next example that demonstrates this."}),"\n",(0,n.jsx)(r.h3,{id:"history-http-api",children:"History HTTP API"}),"\n",(0,n.jsxs)("video",{width:"100%",controls:!0,children:[(0,n.jsx)("source",{src:"/img/pro_api_history_perf.mp4",type:"video/mp4"}),(0,n.jsx)(r.p,{children:"Sorry, your browser doesn't support embedded video."})]}),"\n",(0,n.jsx)(r.p,{children:"In this video you can see an almost 2x overall speed up while asking 100 messages from Centrifugo history API."})]})}function d(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,r,i)=>{i.d(r,{R:()=>t,x:()=>a});var o=i(96540);const n={},s=o.createContext(n);function t(e){const r=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);
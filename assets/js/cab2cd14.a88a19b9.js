"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[7425],{34387:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"type":"mdx","permalink":"/license_management","source":"@site/src/pages/license_management.md","title":"Centrifugo PRO license management","description":"Ensure secure usage of license keys within your organization. See Centrifugo PRO license.","frontMatter":{"id":"license_management","title":"Centrifugo PRO license management","hide_table_of_contents":true},"unlisted":false}');var s=i(74848),n=i(28453),a=i(96540),o=i(41776);class l extends a.Component{constructor(){super(),this.state={projectMainKey:"",projectName:"",projectKey:"",stagingProviderKey:"",stagingKey:"",developerProviderKey:"",developerName:"",developerKey:""}}async issueLicense(e,t,i){void 0===i&&(i=null);const r={license:e,type:t};i&&(r.name=i);const s=await fetch("https://centrifugal.fly.dev/centrifugo/license/issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(`Unexpected status code ${s.status}`);const n=await s.json();if(n.error)throw new Error(n.error);return n.license}handleStagingSubmit=async()=>{if(this.state.stagingProviderKey)try{const e=await this.issueLicense(this.state.stagingProviderKey,"staging");this.setState({stagingKey:e,stagingProviderKey:""})}catch(e){alert(`Error issuing staging license: ${e.message}`)}else alert("Provide a license key")};handleProjectSubmit=async()=>{if(this.state.projectMainKey)if(this.state.projectName)try{const e=await this.issueLicense(this.state.projectMainKey,"project",this.state.projectName);this.setState({projectKey:e,projectMainKey:"",projectName:""})}catch(e){alert(`Error issuing project license: ${e.message}`)}else alert("Provide a project name");else alert("Provide a main license key")};handleDeveloperSubmit=async()=>{if(this.state.developerProviderKey)if(this.state.developerName)try{const e=await this.issueLicense(this.state.developerProviderKey,"developer",this.state.developerName);this.setState({developerKey:e,developerProviderKey:"",developerName:""})}catch(e){alert(`Error issuing developer license: ${e.message}`)}else alert("Provide a developer name");else alert("Provide a license key")};handleInputChange=e=>t=>{this.setState({[e]:t.target.value})};renderKeyIssueForm(e){let{title:t,description:i,providerKeyValue:r,providerKeyField:n,nameValue:a="",nameField:l="",keyPlaceholder:c="",showNameInput:d=!1,onSubmit:h,resultKey:p}=e;const u={backgroundColor:"#230808",color:"#ccc",width:"100%",height:"3em",border:"1px solid #ccc",padding:"5px",fontSize:"1em",borderRadius:"5px"};return(0,s.jsxs)("div",{style:{width:"100%",border:"1px solid #ccc",borderRadius:"5px",padding:"25px",marginTop:"20px"},children:[(0,s.jsx)("h2",{children:t}),(0,s.jsx)("p",{children:i}),(0,s.jsx)("input",{onChange:this.handleInputChange(n),value:r,placeholder:c,style:u}),d&&(0,s.jsx)("input",{onChange:this.handleInputChange(l),value:a,placeholder:"projectName"===l?"Enter the project name here...":"Write the name of the developer here...",style:{...u,marginTop:"10px"}}),(0,s.jsx)("button",{onClick:h,style:{background:"#FC6459",height:50,border:"none",textAlign:"center",cursor:"pointer",textTransform:"uppercase",outline:"none",overflow:"hidden",position:"relative",color:"#fff",fontWeight:700,fontSize:15,padding:"17px 17px",marginTop:10,borderRadius:"5px"},children:"Submit"}),this.state[p]&&(0,s.jsx)("div",{style:{marginTop:"10px"},children:(0,s.jsx)(o.A,{language:"text",children:this.state[p]})})]})}render(){return(0,s.jsxs)("div",{children:[this.renderKeyIssueForm({title:"Create derived project key from main license key",description:"Generate a project-specific license key from your main license. This allows different projects within your company to have their own keys while deriving from the main license.",providerKeyValue:this.state.projectMainKey,providerKeyField:"projectMainKey",nameValue:this.state.projectName,nameField:"projectName",keyPlaceholder:"Paste the main license key received from Centrifugal Labs here...",showNameInput:!0,onSubmit:this.handleProjectSubmit,resultKey:"projectKey"}),this.renderKeyIssueForm({title:"Issue the staging license key (for staging or test environments)",description:"This is a separate key that may be used for staging or test environments. It references the project key.",providerKeyValue:this.state.stagingProviderKey,providerKeyField:"stagingProviderKey",keyPlaceholder:"Paste the project license key here...",onSubmit:this.handleStagingSubmit,resultKey:"stagingKey"}),this.renderKeyIssueForm({title:"Issue the key for a specific organization developer",description:"This key is issued for six months. Centrifugo PRO will not start with such a key after six months. The developer key must be derived from the staging license key (see above).",providerKeyValue:this.state.developerProviderKey,providerKeyField:"developerProviderKey",nameValue:this.state.developerName,nameField:"developerName",keyPlaceholder:"Paste the staging license key here...",showNameInput:!0,onSubmit:this.handleDeveloperSubmit,resultKey:"developerKey"})]})}}const c={id:"license_management",title:"Centrifugo PRO license management",hide_table_of_contents:!0},d="License key management",h={},p=[];function u(e){const t={a:"a",admonition:"admonition",h1:"h1",header:"header",p:"p",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"license-key-management",children:"License key management"})}),"\n",(0,s.jsx)(t.admonition,{title:"Keep license keys secure",type:"info",children:(0,s.jsxs)(t.p,{children:["Ensure secure usage of license keys within your organization. See ",(0,s.jsx)(t.a,{href:"/license",children:"Centrifugo PRO license"}),"."]})}),"\n","\n",(0,s.jsx)(l,{})]})}function m(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);